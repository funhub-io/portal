2021-07-06 11:37:15,035 INFO o.s.b.StartupInfoLogger [main] Starting DaoMetaUnitTest on hanjiahao-MacBook-Pro.local with PID 18370 (started by hanjiahao in /Users/hanjiahao/Documents/workspace/nce-gdashboard/gateway-portal)
2021-07-06 11:37:15,039 INFO o.s.b.SpringApplication [main] The following profiles are active: test
2021-07-06 11:37:15,111 INFO o.s.c.s.AbstractApplicationContext [main] Refreshing org.springframework.web.context.support.GenericWebApplicationContext@49872d67: startup date [Tue Jul 06 11:37:15 CST 2021]; root of context hierarchy
2021-07-06 11:37:15,656 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 5.3.5.Final
2021-07-06 11:37:16,643 INFO o.s.b.f.x.XmlBeanDefinitionReader [main] Loading XML bean definitions from class path resource [applicationContext.xml]
2021-07-06 11:37:19,372 INFO o.h.m.TraceWriterAdapter [main] jdbc[4] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:19,374 INFO o.h.m.TraceWriterAdapter [main] jdbc[4] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:19,374 INFO o.h.m.TraceWriterAdapter [main] jdbc[4] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:19,375 INFO o.h.m.TraceWriterAdapter [main] jdbc[4] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:19,375 INFO o.h.m.TraceWriterAdapter [main] jdbc[4] 
/**/Connection conn1 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:19,377 INFO o.h.m.TraceWriterAdapter [main] jdbc[5] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:19,377 INFO o.h.m.TraceWriterAdapter [main] jdbc[5] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:19,377 INFO o.h.m.TraceWriterAdapter [main] jdbc[5] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:19,378 INFO o.h.m.TraceWriterAdapter [main] jdbc[5] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:19,378 INFO o.h.m.TraceWriterAdapter [main] jdbc[5] 
/**/Connection conn2 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:19,379 INFO o.h.m.TraceWriterAdapter [main] jdbc[6] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:19,380 INFO o.h.m.TraceWriterAdapter [main] jdbc[6] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:19,381 INFO o.h.m.TraceWriterAdapter [main] jdbc[6] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:19,382 INFO o.h.m.TraceWriterAdapter [main] jdbc[6] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:19,382 INFO o.h.m.TraceWriterAdapter [main] jdbc[6] 
/**/Connection conn3 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:19,383 INFO o.h.m.TraceWriterAdapter [main] jdbc[7] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:19,385 INFO o.h.m.TraceWriterAdapter [main] jdbc[7] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:19,385 INFO o.h.m.TraceWriterAdapter [main] jdbc[7] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:19,386 INFO o.h.m.TraceWriterAdapter [main] jdbc[7] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:19,386 INFO o.h.m.TraceWriterAdapter [main] jdbc[7] 
/**/Connection conn4 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:19,387 INFO o.h.m.TraceWriterAdapter [main] jdbc[8] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:19,388 INFO o.h.m.TraceWriterAdapter [main] jdbc[8] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:19,389 INFO o.h.m.TraceWriterAdapter [main] jdbc[8] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:19,389 INFO o.h.m.TraceWriterAdapter [main] jdbc[8] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:19,390 INFO o.h.m.TraceWriterAdapter [main] jdbc[8] 
/**/Connection conn5 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:19,392 INFO o.h.m.TraceWriterAdapter [main] jdbc[9] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:19,393 INFO o.h.m.TraceWriterAdapter [main] jdbc[9] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:19,394 INFO o.h.m.TraceWriterAdapter [main] jdbc[9] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:19,394 INFO o.h.m.TraceWriterAdapter [main] jdbc[9] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:19,395 INFO o.h.m.TraceWriterAdapter [main] jdbc[9] 
/**/Connection conn6 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:19,396 INFO o.h.m.TraceWriterAdapter [main] jdbc[10] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:19,396 INFO o.h.m.TraceWriterAdapter [main] jdbc[10] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:19,397 INFO o.h.m.TraceWriterAdapter [main] jdbc[10] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:19,397 INFO o.h.m.TraceWriterAdapter [main] jdbc[10] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:19,397 INFO o.h.m.TraceWriterAdapter [main] jdbc[10] 
/**/Connection conn7 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:19,398 INFO o.h.m.TraceWriterAdapter [main] jdbc[11] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:19,398 INFO o.h.m.TraceWriterAdapter [main] jdbc[11] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:19,398 INFO o.h.m.TraceWriterAdapter [main] jdbc[11] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:19,399 INFO o.h.m.TraceWriterAdapter [main] jdbc[11] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:19,400 INFO o.h.m.TraceWriterAdapter [main] jdbc[11] 
/**/Connection conn8 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:19,403 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:19,403 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:19,403 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:19,404 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:19,404 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/**/Connection conn9 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:19,432 INFO o.s.j.d.i.ScriptUtils [main] Executing SQL script from class path resource [schema.sql]
2021-07-06 11:37:19,474 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:6*/CREATE TABLE IF NOT EXISTS SH_LEAGUE_CONTACT_TEAM_ROLE(ROLE_NAME VARCHAR NOT NULL, TEAM_ID INT NOT NULL, CONTACT_ID INT NOT NULL, PRIMARY KEY(TEAM_ID, CONTACT_ID));
2021-07-06 11:37:19,500 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:24*/CREATE TABLE IF NOT EXISTS apigw_envoy_health_check_rule ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_time bigint NOT NULL, update_time bigint NOT NULL, service_id bigint NOT NULL, gw_id bigint NOT NULL, active_switch tinyint NOT NULL, path varchar(255) DEFAULT '', timeout int DEFAULT NULL, expected_statuses varchar(255) DEFAULT '', healthy_interval int DEFAULT NULL, healthy_threshold int DEFAULT NULL, unhealthy_interval int DEFAULT NULL, unhealthy_threshold int DEFAULT NULL, passive_switch tinyint NOT NULL, consecutive_errors int DEFAULT NULL, base_ejection_time int DEFAULT NULL, max_ejection_percent tinyint DEFAULT NULL, min_health_percent tinyint DEFAULT NULL, PRIMARY KEY (id), CONSTRAINT unique_service_gw_id UNIQUE ( service_id, gw_id ) );
2021-07-06 11:37:19,505 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE INDEX IF NOT EXISTS index_service_gw_id ON apigw_envoy_health_check_rule(service_id, gw_id);
2021-07-06 11:37:19,507 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_envoy_plugin_binding ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, plugin_type varchar(255) NOT NULL, binding_object_type varchar(255) NOT NULL, binding_object_id varchar(255) NOT NULL, plugin_configuration clob NOT NULL, create_time bigint NOT NULL, update_time bigint NOT NULL, gw_id bigint NOT NULL, project_id bigint NOT NULL, plugin_priority bigint NOT NULL, binding_status varchar(127) NOT NULL DEFAULT 'enable', template_id bigint DEFAULT '0', template_version bigint DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:19,520 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:11*/CREATE TABLE IF NOT EXISTS apigw_envoy_plugin_info ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, plugin_name varchar(255) NOT NULL, plugin_type varchar(255) NOT NULL, author varchar(255) NOT NULL, create_time bigint NOT NULL, update_time bigint NOT NULL, plugin_scope varchar(255) NOT NULL, instruction_for_use clob NOT NULL, plugin_schema clob NOT NULL, plugin_handler clob NOT NULL, plugin_priority bigint NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,531 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:5*/CREATE TABLE IF NOT EXISTS apigw_envoy_plugin_template ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_time bigint NOT NULL, update_time bigint NOT NULL, plugin_type varchar(255) NOT NULL, plugin_configuration clob NOT NULL, project_id bigint NOT NULL, template_version bigint NOT NULL, template_name varchar(255) NOT NULL, template_notes varchar(255) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,543 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:5*/CREATE TABLE IF NOT EXISTS apigw_envoy_route_rule ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, service_id varchar(11) DEFAULT NULL, route_rule_name varchar(255) NOT NULL, uri clob, method varchar(1024) DEFAULT NULL, header clob, query_param clob, host varchar(1024) DEFAULT NULL, priority bigint DEFAULT NULL, orders bigint DEFAULT NULL, project_id bigint DEFAULT NULL, publish_status int DEFAULT '0', create_time bigint NOT NULL DEFAULT '0', update_time bigint NOT NULL DEFAULT '0', description varchar(255) DEFAULT NULL, route_rule_source varchar(255) DEFAULT NULL, header_operation varchar(1024) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,547 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_envoy_route_rule_proxy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, route_rule_id bigint NOT NULL, gw_id bigint NOT NULL, destination_services varchar(1024) NOT NULL, project_id bigint NOT NULL, priority bigint DEFAULT NULL, orders bigint DEFAULT NULL, create_time bigint NOT NULL DEFAULT '0', update_time bigint NOT NULL DEFAULT '0', service_id bigint DEFAULT NULL, enable_state varchar(10) NOT NULL DEFAULT 'enable', hosts clob, timeout bigint DEFAULT '60000', http_retry clob, uri varchar(1024) DEFAULT NULL, method varchar(1024) DEFAULT NULL, header clob, query_param clob, host varchar(1024) DEFAULT NULL, virtual_cluster clob DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,547 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE INDEX IF NOT EXISTS idx_gw_id ON apigw_envoy_route_rule_proxy (gw_id);
2021-07-06 11:37:19,550 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:2*/CREATE INDEX IF NOT EXISTS idx_route_rule_id ON apigw_envoy_route_rule_proxy (route_rule_id);
2021-07-06 11:37:19,553 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_envoy_service_info ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_time bigint DEFAULT NULL, update_time bigint DEFAULT NULL, service_name varchar(255) NOT NULL, publish_status int DEFAULT '0', project_id bigint DEFAULT NULL, contact varchar(255) DEFAULT NULL, description varchar(255) DEFAULT NULL, service_type varchar(11) DEFAULT 'http', PRIMARY KEY (id) );
2021-07-06 11:37:19,556 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_envoy_service_proxy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, service_id bigint NOT NULL, create_time bigint DEFAULT NULL, update_time bigint DEFAULT NULL, code varchar(255) NOT NULL, publish_protocol varchar(10) DEFAULT 'http', backend_service clob, publish_type varchar(255) DEFAULT NULL, project_id bigint DEFAULT '0', gw_id bigint NOT NULL, load_balancer varchar(127) NOT NULL DEFAULT 'ROUND_ROBIN', subsets clob, registry_center_addr varchar(255) DEFAULT NULL, registry_center_type varchar(255) DEFAULT NULL, traffic_policy clob, PRIMARY KEY (id) );
2021-07-06 11:37:19,559 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_envoy_strategy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, plugin_id bigint NOT NULL, plugin_type varchar(255) NOT NULL, strategy_name varchar(255) NOT NULL, create_time bigint NOT NULL, update_time bigint NOT NULL, config clob NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,560 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_virtual_host_info ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, project_id bigint NOT NULL, gw_id bigint NOT NULL, hosts clob, virtual_host_code varchar(255) NOT NULL, create_time bigint NOT NULL, update_time bigint NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,561 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_api ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, api_name varchar(255) NOT NULL, api_path varchar(255) NOT NULL, api_method varchar(255) NOT NULL, description clob, type varchar(255) NOT NULL, service_id bigint NOT NULL, status varchar(255) NOT NULL DEFAULT '0', regex varchar(255) DEFAULT NULL, document_status_id bigint DEFAULT '0', request_example_value clob, response_example_value clob, alias_name varchar(128) DEFAULT NULL, project_id bigint DEFAULT NULL, sync_status tinyint DEFAULT '0', ext_api_id bigint DEFAULT NULL, swagger_sync tinyint DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:19,565 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_gportal_api_document_status ( id bigint NOT NULL AUTO_INCREMENT, status varchar(255) NOT NULL, PRIMARY KEY (id, status) );
2021-07-06 11:37:19,572 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:2*/CREATE TABLE IF NOT EXISTS apigw_gportal_api_model ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, model_name varchar(255) NOT NULL, description varchar(255) DEFAULT NULL, type tinyint DEFAULT NULL, format tinyint DEFAULT NULL, service_id bigint NOT NULL, swagger_sync tinyint DEFAULT '0', project_id bigint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,574 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE INDEX IF NOT EXISTS index_model_id ON apigw_gportal_api_model(id);
2021-07-06 11:37:19,577 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:2*/CREATE TABLE IF NOT EXISTS apigw_gportal_api_proxy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint NOT NULL, modify_date bigint DEFAULT NULL, api_id bigint NOT NULL, gw_id bigint NOT NULL, service_id bigint DEFAULT NULL, traffic_control_policy_id bigint DEFAULT '0', time_range varchar(255) DEFAULT NULL, project_id bigint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,581 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_gportal_api_status_code ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, error_code varchar(255) DEFAULT NULL, message varchar(255) DEFAULT NULL, status_code bigint DEFAULT NULL, object_id bigint DEFAULT NULL, type varchar(255) NOT NULL, description clob, PRIMARY KEY (id) );
2021-07-06 11:37:19,583 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE INDEX IF NOT EXISTS index_api_id ON apigw_gportal_api_status_code(object_id);
2021-07-06 11:37:19,587 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_gportal_body_param ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, api_id bigint NOT NULL, param_name varchar(255) NOT NULL, required varchar(20) NOT NULL DEFAULT '0', def_value varchar(255) DEFAULT NULL, description varchar(255) DEFAULT NULL, type varchar(255) NOT NULL, param_type_id bigint DEFAULT NULL, array_data_type_id bigint DEFAULT NULL, association_type varchar(63) DEFAULT 'NORMAL', PRIMARY KEY (id) );
2021-07-06 11:37:19,593 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:5*/CREATE TABLE IF NOT EXISTS apigw_gportal_gateway_info ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, gw_name varchar(255) NOT NULL, gw_addr varchar(255) NOT NULL, description varchar(255) DEFAULT NULL, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, status int DEFAULT '1', last_check_time bigint DEFAULT '0', health_interface_path varchar(255) DEFAULT NULL, mongo_addr varchar(255) DEFAULT NULL, project_id bigint, env_id varchar(128) DEFAULT NULL, auth_addr varchar(128) DEFAULT NULL, audit_datasource_switch varchar(255) DEFAULT NULL, mysql_addr clob, gw_uni_id varchar(128) DEFAULT NULL, metric_url varchar(255) DEFAULT NULL, api_plane_addr varchar(255) DEFAULT NULL, gw_cluster_name varchar(255) DEFAULT NULL, gw_type varchar(20) DEFAULT 'g0', audit_db_config varchar(1024) DEFAULT NULL, prom_addr varchar(255) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,597 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_gportal_header_param ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, api_id bigint NOT NULL, param_name varchar(255) NOT NULL, param_value varchar(255) DEFAULT NULL, description varchar(255) DEFAULT NULL, type varchar(255) NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,604 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:4*/CREATE TABLE IF NOT EXISTS apigw_gportal_meta_history ( id bigint NOT NULL, meta_type varchar(255) NOT NULL, meta_id bigint NOT NULL, meta_name varchar(255) NOT NULL, meta_tag varchar(255) NOT NULL, project_id bigint NOT NULL, gw_id bigint NOT NULL, parent_id bigint DEFAULT NULL, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,607 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_gportal_model_param ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, model_id varchar(255) NOT NULL, param_name varchar(255) NOT NULL, param_type_id bigint NOT NULL, array_data_type_id bigint DEFAULT NULL, object_id bigint DEFAULT NULL, def_value varchar(255) DEFAULT NULL, description varchar(255) DEFAULT NULL, required varchar(20) NOT NULL DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:19,609 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE INDEX IF NOT EXISTS index_model_param_id ON apigw_gportal_model_param(id);
2021-07-06 11:37:19,615 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:4*/CREATE TABLE IF NOT EXISTS apigw_gportal_operation_log ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, email varchar(255) DEFAULT NULL, object_id bigint DEFAULT NULL, operation clob, type varchar(255) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,625 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:5*/CREATE INDEX IF NOT EXISTS index_object_id ON apigw_gportal_operation_log(object_id, type);
2021-07-06 11:37:19,641 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:8*/CREATE TABLE IF NOT EXISTS apigw_gportal_param_object ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, object_value varchar(1024) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,645 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:2*/CREATE INDEX IF NOT EXISTS index_param_object_id ON apigw_gportal_param_object(id);
2021-07-06 11:37:19,648 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_gportal_param_type ( id bigint NOT NULL AUTO_INCREMENT, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, param_type varchar(255) NOT NULL, location varchar(255) NOT NULL, model_id bigint DEFAULT '0', PRIMARY KEY ( id, param_type ) );
2021-07-06 11:37:19,649 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_plugin ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, gw_id bigint DEFAULT NULL, plugin_name varchar(255) DEFAULT NULL, plugin_version varchar(255) DEFAULT NULL, plugin_file_name varchar(255) DEFAULT NULL, plugin_content clob, plugin_variable clob, plugin_status int DEFAULT NULL, last_start_time bigint DEFAULT NULL, plugin_starting_time bigint DEFAULT NULL, plugin_call_number bigint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,650 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_registry_center ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, registry_type varchar(255) NOT NULL, registry_addr varchar(255) NOT NULL, registry_alias varchar(255) DEFAULT NULL, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, project_id bigint DEFAULT NULL, is_shared tinyint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,651 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, display_name varchar(255) NOT NULL, service_name varchar(255) DEFAULT NULL, contacts varchar(255) DEFAULT NULL, description varchar(255) DEFAULT NULL, status int NOT NULL DEFAULT '0', health_interface_path varchar(255) DEFAULT NULL, service_type varchar(63) DEFAULT NULL, project_id bigint DEFAULT NULL, sync_status tinyint DEFAULT '0', ext_service_id bigint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,652 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_instance ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, service_id bigint NOT NULL, gw_id bigint NOT NULL, service_addr varchar(255) DEFAULT NULL, status bigint NOT NULL DEFAULT '1', last_check_time bigint NOT NULL DEFAULT '0', registry_center_addr varchar(511) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,671 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:8*/CREATE TABLE IF NOT EXISTS apigw_gportal_service_lb ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, service_id bigint DEFAULT NULL, gw_id bigint DEFAULT NULL, service_addr varchar(255) NOT NULL, weight int NOT NULL, status int DEFAULT '1', last_check_time bigint DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:19,676 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:2*/CREATE TABLE IF NOT EXISTS apigw_gportal_service_lb_rule ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, service_id bigint NOT NULL, gw_id bigint NOT NULL, shunt_way varchar(255) NOT NULL DEFAULT '', instance_weight_list clob, param_shunt_type varchar(255) DEFAULT '', param_type varchar(255) DEFAULT '', param_name varchar(255) DEFAULT '', modulus_threshold int DEFAULT NULL, item_list clob, regex int DEFAULT NULL, instance_list clob, rule_name varchar(255) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,677 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_lb_rule_binding ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, rule_id bigint NOT NULL, gw_id bigint NOT NULL, service_id bigint NOT NULL, binding_time bigint NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,678 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_lb_rule_multi ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, service_id bigint NOT NULL, rule_name varchar(255) DEFAULT NULL, shunt_way varchar(255) DEFAULT NULL, param_matching_mode varchar(255) DEFAULT NULL, param_type varchar(255) DEFAULT NULL, param_name varchar(255) DEFAULT NULL, instance_type varchar(255) DEFAULT NULL, instance_list clob, color varchar(255) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,679 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE INDEX IF NOT EXISTS index_service_id ON apigw_gportal_service_lb_rule_multi(service_id);
2021-07-06 11:37:19,686 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:4*/CREATE TABLE IF NOT EXISTS apigw_gportal_service_protobuf ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, service_id number NOT NULL, pb_name varchar(255) NOT NULL DEFAULT '', pb_file_name varchar(255) NOT NULL DEFAULT '', pb_file_content clob NOT NULL, desc_file_content clob NOT NULL, description varchar(255) DEFAULT NULL, pb_status int NOT NULL DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:19,688 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE INDEX IF NOT EXISTS idx_service_id ON apigw_gportal_service_protobuf(service_id);
2021-07-06 11:37:19,688 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE INDEX IF NOT EXISTS index_pb_name ON apigw_gportal_service_protobuf(pb_name);
2021-07-06 11:37:19,692 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_gportal_service_protobuf_proxy ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, pb_id bigint NOT NULL, gw_id bigint NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,696 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:2*/CREATE INDEX IF NOT EXISTS index_pb_id ON apigw_gportal_service_protobuf_proxy(pb_id);
2021-07-06 11:37:19,706 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_gportal_service_proxy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint NOT NULL, modify_date bigint DEFAULT NULL, service_id bigint NOT NULL, gw_id bigint NOT NULL, service_addr clob, time_range varchar(255) DEFAULT NULL, class_name varchar(255) DEFAULT NULL, flow_replication_addr varchar(255) DEFAULT NULL, authentication tinyint DEFAULT '1', shunt_way varchar(255) DEFAULT NULL, shunt_switch int DEFAULT '0', project_id bigint DEFAULT NULL, addr_acquire_strategy varchar(64) DEFAULT NULL, registry_center_addr varchar(255) DEFAULT NULL, application_name varchar(255) DEFAULT NULL, transparent tinyint DEFAULT '0', custom_header varchar(4000) DEFAULT NULL, registry_center_type varchar(255) DEFAULT NULL, adapt_service_name int DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:19,710 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_gportal_traffic_control_binding ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, api_id bigint NOT NULL, policy_id bigint NOT NULL, binding_time bigint NOT NULL, gw_id bigint NOT NULL, gateway_name varchar(128) NOT NULL DEFAULT '', policy_name varchar(128) NOT NULL DEFAULT '', project_id varchar(20) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,711 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE INDEX IF NOT EXISTS idx_api_id ON apigw_gportal_traffic_control_binding(api_id);
2021-07-06 11:37:19,716 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:3*/CREATE INDEX IF NOT EXISTS idx_policy_id ON apigw_gportal_traffic_control_binding(policy_id);
2021-07-06 11:37:19,725 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:6*/CREATE TABLE IF NOT EXISTS apigw_gportal_traffic_control_dimension ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, traffic_control_policy_id bigint NOT NULL, slot bigint NOT NULL, unit varchar(128) NOT NULL, dimension_limit bigint NOT NULL, capacity bigint NOT NULL, dimension_type varchar(64) NOT NULL, param_name varchar(128) DEFAULT NULL, match_mode varchar(128) DEFAULT NULL, param_value varchar(2048) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,728 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/CREATE INDEX IF NOT EXISTS idx_traffic_control_policy_id ON apigw_gportal_traffic_control_dimension(traffic_control_policy_id);
2021-07-06 11:37:19,732 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:3*/CREATE TABLE IF NOT EXISTS apigw_gportal_traffic_control_policy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, name varchar(128) NOT NULL, create_time bigint NOT NULL, update_time bigint NOT NULL, project_id varchar(20) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,742 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:2*/CREATE TABLE IF NOT EXISTS apigw_gportal_white_list ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, policy_name varchar(127) NOT NULL DEFAULT '', policy_type varchar(63) NOT NULL DEFAULT '', white_list clob NOT NULL, create_time bigint NOT NULL DEFAULT '0', update_time bigint NOT NULL DEFAULT '0', project_id varchar(127) NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:19,744 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_white_list_binding ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, gw_id bigint NOT NULL, policy_id bigint NOT NULL DEFAULT '0', binding_time bigint NOT NULL DEFAULT '0', binding_object_id varchar(127) NOT NULL DEFAULT '', binding_object_type varchar(63) NOT NULL DEFAULT '', project_id varchar(127) NOT NULL, policy_name varchar(127) NOT NULL DEFAULT '', binding_object_name varchar(127) NOT NULL DEFAULT '', PRIMARY KEY (id) );
2021-07-06 11:37:19,745 INFO o.s.j.d.i.ScriptUtils [main] Executed SQL script from class path resource [schema.sql] in 313 ms.
2021-07-06 11:37:19,778 INFO o.s.j.d.i.ScriptUtils [main] Executing SQL script from class path resource [data.sql]
2021-07-06 11:37:19,801 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:2 t:4*/MERGE INTO apigw_gportal_gateway_info VALUES ( 1, 'gateway', 'http://localhost:8898', 'this is a gateway', 1563515833712, 1565684534680, 1, 1566287640040, 'http:11113/healthcheck', '', 1, 'prod', 'http://platform-service-auth.hango.org', 'elasticsearch', '', 'prod', 'http://prometheus.hango.org', 'http://api-plane.hango.org', 'prod-gateway', 'envoy', '{\"spring.elasticsearch.jest.uris\":[\"\",\"\",\"\"]}', 'http://prometheus.hango.org' ), ( 2, 'envoy', 'http://localhost:8898', 'hango envoy gateway', 1563515833712, 1565684534680, 1, 1566287640040, 'http:11113/healthcheck', '', 1, 'prod', 'http://platform-service-auth.hango.org', 'elasticsearch', '', 'prod', 'http://prometheus.hango.org', 'http://api-plane.hango.org', 'prod-gateway', 'envoy', '{\"spring.elasticsearch.jest.uris\":[\"\",\"\",\"\"]}', 'http://prometheus.hango.org' );
2021-07-06 11:37:19,807 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/MERGE INTO apigw_envoy_virtual_host_info VALUES ( 1, 1, 2, '[\"istio.com\",\"envoy.gateway.com\",\"hango.gateway.com\",\"gateway-proxy.hango.org\"]', 'hango-1-2', 1565684534680, 1566287640040 );
2021-07-06 11:37:19,814 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:4 t:3*/MERGE INTO apigw_gportal_api_document_status ( id, status ) VALUES ( 1, '\u5f00\u53d1\u4e2d' ), ( 2, '\u8054\u8c03\u4e2d' ), ( 3, '\u63d0\u6d4b\u4e2d' ), ( 4, '\u5df2\u4e0a\u7ebf' );
2021-07-06 11:37:19,815 INFO o.s.j.d.i.ScriptUtils [main] Executed SQL script from class path resource [data.sql] in 37 ms.
2021-07-06 11:37:20,191 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Building JPA container EntityManagerFactory for persistence unit 'default'
2021-07-06 11:37:20,222 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2021-07-06 11:37:20,314 INFO o.h.Version [main] HHH000412: Hibernate Core {5.0.12.Final}
2021-07-06 11:37:20,316 INFO o.h.c.Environment [main] HHH000206: hibernate.properties not found
2021-07-06 11:37:20,318 INFO o.h.c.Environment [main] HHH000021: Bytecode provider name : javassist
2021-07-06 11:37:20,364 INFO o.h.a.c.r.j.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.0.1.Final}
2021-07-06 11:37:20,497 INFO o.h.d.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2021-07-06 11:37:20,513 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1 t:1*/CALL DATABASE();
2021-07-06 11:37:20,531 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:31 t:2*/SELECT TYPE_NAME, DATA_TYPE, PRECISION, PREFIX LITERAL_PREFIX, SUFFIX LITERAL_SUFFIX, PARAMS CREATE_PARAMS, NULLABLE, CASE_SENSITIVE, SEARCHABLE, FALSE UNSIGNED_ATTRIBUTE, FALSE FIXED_PREC_SCALE, AUTO_INCREMENT, TYPE_NAME LOCAL_TYPE_NAME, MINIMUM_SCALE, MAXIMUM_SCALE, DATA_TYPE SQL_DATA_TYPE, ZERO() SQL_DATETIME_SUB, RADIX NUM_PREC_RADIX FROM INFORMATION_SCHEMA.TYPE_INFO ORDER BY DATA_TYPE, POS;
2021-07-06 11:37:20,547 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:58 #:1 t:3*/SELECT VALUE FROM INFORMATION_SCHEMA.SETTINGS WHERE NAME=? {1: 'MODE'};
2021-07-06 11:37:20,555 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:31*/SELECT TYPE_NAME, DATA_TYPE, PRECISION, PREFIX LITERAL_PREFIX, SUFFIX LITERAL_SUFFIX, PARAMS CREATE_PARAMS, NULLABLE, CASE_SENSITIVE, SEARCHABLE, FALSE UNSIGNED_ATTRIBUTE, FALSE FIXED_PREC_SCALE, AUTO_INCREMENT, TYPE_NAME LOCAL_TYPE_NAME, MINIMUM_SCALE, MAXIMUM_SCALE, DATA_TYPE SQL_DATA_TYPE, ZERO() SQL_DATETIME_SUB, RADIX NUM_PREC_RADIX FROM INFORMATION_SCHEMA.TYPE_INFO ORDER BY DATA_TYPE, POS;
2021-07-06 11:37:20,688 INFO o.h.t.h.SchemaExport [main] HHH000227: Running hbm2ddl schema export
2021-07-06 11:37:20,691 INFO o.h.t.h.SchemaExport [main] HHH000230: Schema export complete
2021-07-06 11:37:20,715 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2021-07-06 11:37:22,943 INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter [main] Looking for @ControllerAdvice: org.springframework.web.context.support.GenericWebApplicationContext@49872d67: startup date [Tue Jul 06 11:37:15 CST 2021]; root of context hierarchy
2021-07-06 11:37:23,075 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateGateway]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.addGwInfo(org.hango.cloud.ncegdashboard.envoy.web.dto.GatewayDto)
2021-07-06 11:37:23,077 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeGatewayList]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.getGwInfoList(java.lang.String,long,long)
2021-07-06 11:37:23,080 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeGateway]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.getGwInfoById(long)
2021-07-06 11:37:23,081 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateGatewayVirtualHosts]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.updateGatewayVirtualHosts(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyGatewayVirtualHostDto)
2021-07-06 11:37:23,082 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateGatewayVirtualHost]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.createGatewayVirtualHost(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyVirtualHostDto)
2021-07-06 11:37:23,082 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateGatewayVirtualHost]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.updateGatewayVirtualHost(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyVirtualHostUpdateDto)
2021-07-06 11:37:23,082 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeGatewayVirtualHosts]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.getGatewayVirtualHosts(long,long,java.lang.String,long,long)
2021-07-06 11:37:23,083 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeGatewayVirtualHost]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.getGatewayVirtualHost(long)
2021-07-06 11:37:23,083 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribePluginManager]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.describePluginManager(long)
2021-07-06 11:37:23,083 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdatePluginManager]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.updatePluginManager(long,java.lang.String,boolean)
2021-07-06 11:37:23,084 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateGateway]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.updateGwInfo(org.hango.cloud.ncegdashboard.envoy.web.dto.GatewayDto)
2021-07-06 11:37:23,086 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateHealthCheckRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyHealthCheckController.updateHealthCheckRule(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyHealthCheckRuleDto)
2021-07-06 11:37:23,088 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeHealthCheckRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyHealthCheckController.getPluginInfo(long,long)
2021-07-06 11:37:23,089 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceInstanceList]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyHealthCheckController.describeServiceInstanceList(long,long)
2021-07-06 11:37:23,094 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=BindingPlugin]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.bindingPlugin(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyPluginBindingDto)
2021-07-06 11:37:23,096 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=UnbindingPlugin]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.unbindingPlugin(long)
2021-07-06 11:37:23,096 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdatePluginConfiguration]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.updatePluginConfiguration(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyPluginBindingDto)
2021-07-06 11:37:23,096 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribePluginInfo]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.getPluginInfo(java.lang.String,long)
2021-07-06 11:37:23,097 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribePluginInfoList]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.getPluginInfoList(long,java.lang.String)
2021-07-06 11:37:23,098 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeBindingPlugin]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.getBindingPlugin(long)
2021-07-06 11:37:23,098 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeBindingPlugins]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.getBindingPlugins(long,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,long,long)
2021-07-06 11:37:23,100 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=UpdatePluginBindingStatus]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.updatePluginStatus(long,java.lang.String)
2021-07-06 11:37:23,105 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=SyncPluginTemplates]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.syncTemplate(org.hango.cloud.ncegdashboard.envoy.web.dto.SyncPluginTemplateDto)
2021-07-06 11:37:23,106 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreatePluginTemplate]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.createTemplate(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyPluginTemplateDto)
2021-07-06 11:37:23,106 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateGlobalPluginTemplate]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.createGlobalTemplate(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyPluginTemplateDto)
2021-07-06 11:37:23,106 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdatePluginTemplate]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.updateTemplate(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyPluginTemplateDto)
2021-07-06 11:37:23,106 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeletePluginTemplate]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.deleteTemplate(long)
2021-07-06 11:37:23,107 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribePluginTemplate]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.describeTemplate(long)
2021-07-06 11:37:23,107 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribePluginTemplates]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.describeTemplates(java.lang.String,long,long,boolean)
2021-07-06 11:37:23,107 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeAllPluginTemplates]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.describeAllTemplates(java.lang.String)
2021-07-06 11:37:23,108 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateRouteRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleInfoController.updateRouteRule(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyRouteRuleDto)
2021-07-06 11:37:23,108 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRouteRuleList]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleInfoController.routeRuleList(java.lang.String,int,int,long,long,java.lang.String,java.lang.String)
2021-07-06 11:37:23,109 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateRouteRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleInfoController.createRouteRule(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyRouteRuleDto)
2021-07-06 11:37:23,110 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRouteRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleInfoController.getRouteRule(long)
2021-07-06 11:37:23,111 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteRouteRule]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleInfoController.deleteRule(long)
2021-07-06 11:37:23,115 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=PublishRouteRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.publishRouteRule(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyRouteRuleProxyDto)
2021-07-06 11:37:23,116 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeGatewayForRouteRuleProxy]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.describeGatewayForPublishedRule(long)
2021-07-06 11:37:23,116 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRouteRuleProxyList]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.getPublishRouteRuleList(long,long,long,long,java.lang.String,java.lang.String)
2021-07-06 11:37:23,117 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRouteRuleProxy]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.describeRouteRuleProxy(long,long,long)
2021-07-06 11:37:23,118 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRouteRuleProxyByRouteRuleId]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.describePublishRouteRule(long)
2021-07-06 11:37:23,120 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteRouteRuleProxy]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.deletePublishedRouteRule(long,long,java.util.List<java.lang.Long>)
2021-07-06 11:37:23,120 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=UpdateRouteRuleProxyEnableState]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.updateRouteRuleEnableState(long,long,java.lang.String)
2021-07-06 11:37:23,121 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateRouteRuleProxy]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.updateRouteRuleProxy(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyRouteRuleProxyDto)
2021-07-06 11:37:23,122 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceProxyForRouteProxy]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.describeServiceProxy(long,java.util.List<java.lang.Long>,long)
2021-07-06 11:37:23,130 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateService]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.updateService(org.hango.cloud.ncegdashboard.envoy.web.dto.ServiceInfoDto)
2021-07-06 11:37:23,131 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateService]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.addService(org.hango.cloud.ncegdashboard.envoy.web.dto.ServiceInfoDto)
2021-07-06 11:37:23,131 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceForApi]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.serviceListForCreateApiOrModel()
2021-07-06 11:37:23,131 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceList]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.serviceList(java.lang.String,long,long)
2021-07-06 11:37:23,131 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteService]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.deleteService(long)
2021-07-06 11:37:23,131 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceRoute]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.getPublishedServiceInfoById(long)
2021-07-06 11:37:23,132 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceById]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.getService(long)
2021-07-06 11:37:23,135 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceListByGw]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.describeServiceList(long,java.lang.String,java.lang.String)
2021-07-06 11:37:23,135 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=PublishService]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.publishService(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyServiceProxyDto)
2021-07-06 11:37:23,135 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateServiceProxy]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.updatePublishService(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyServiceProxyDto)
2021-07-06 11:37:23,136 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceProxyList]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.serviceProxyList(long,long,java.lang.String,long,long)
2021-07-06 11:37:23,136 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceProxy]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.describeServiceProxy(long,long)
2021-07-06 11:37:23,136 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteServiceProxy]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.deleteServiceProxy(long,long)
2021-07-06 11:37:23,154 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeSwaggerServiceById]}" onto public void org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.getServicesDocs(long) throws com.fasterxml.jackson.core.JsonProcessingException
2021-07-06 11:37:23,155 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeSwaggerApiById]}" onto public void org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.getInterfacesDocs(long) throws com.fasterxml.jackson.core.JsonProcessingException
2021-07-06 11:37:23,155 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeMarkdownApiById]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.getApiMarkDownDocs(long) throws com.fasterxml.jackson.core.JsonProcessingException,java.lang.Exception
2021-07-06 11:37:23,155 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeMarkdownServiceById]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.getServiceMarkDownDocs(long)
2021-07-06 11:37:23,156 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DownloadMarkdownApiById],produces=[application/octet-stream;charset=UTF-8]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.downloadApiMarkDownDocs(long) throws com.fasterxml.jackson.core.JsonProcessingException,java.lang.Exception
2021-07-06 11:37:23,156 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DownloadMarkdownServiceById],produces=[application/octet-stream;charset=UTF-8]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.downloadServiceMarkDownDocs(long)
2021-07-06 11:37:23,157 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateApi]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBasicInfoController.addApi(org.hango.cloud.gdashboard.api.dto.ApiInfoBasicDto)
2021-07-06 11:37:23,158 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeApiById]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBasicInfoController.getApiInfo(long)
2021-07-06 11:37:23,159 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateApi]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBasicInfoController.updateApi(org.hango.cloud.gdashboard.api.dto.ApiInfoBasicDto)
2021-07-06 11:37:23,160 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteApiById]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBasicInfoController.deleteApi(long)
2021-07-06 11:37:23,164 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeApiListByLimit]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBasicInfoController.apiList(java.lang.String,long,long,long,long)
2021-07-06 11:37:23,185 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateRequestBody]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.addRequestBody(org.hango.cloud.gdashboard.api.dto.ApiBodysDto)
2021-07-06 11:37:23,190 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateQueryString]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.addQueryString(org.hango.cloud.gdashboard.api.dto.ApiBodysDto)
2021-07-06 11:37:23,191 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateStatusCode]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.addStatusCode(org.hango.cloud.gdashboard.api.dto.ApiStatusCodesDto)
2021-07-06 11:37:23,192 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateResponseBody]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.addResponseBody(org.hango.cloud.gdashboard.api.dto.ApiBodysDto)
2021-07-06 11:37:23,193 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRequestBody]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.getRequestBody(long)
2021-07-06 11:37:23,194 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=GenerateBodyByJson]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.addBodyByJson(org.hango.cloud.gdashboard.api.dto.ApiBodyJsonDto)
2021-07-06 11:37:23,195 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeBodyParamJson]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.getBodyJson(java.lang.String,long)
2021-07-06 11:37:23,196 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteBodyParamId]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.deleteBodyParamId(java.lang.Long)
2021-07-06 11:37:23,196 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeQueryString]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.getQueryString(long)
2021-07-06 11:37:23,196 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeStatusCode]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.getStatusCode(long)
2021-07-06 11:37:23,196 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeResponseBody]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.getResponseBody(long)
2021-07-06 11:37:23,197 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeExample]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiEdgeInfoController.getExample(long)
2021-07-06 11:37:23,197 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateApiExample]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiEdgeInfoController.addExample(org.hango.cloud.gdashboard.api.dto.ApiExampleDto)
2021-07-06 11:37:23,197 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeOperationList]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiEdgeInfoController.getOperationlist(long,long,long)
2021-07-06 11:37:23,204 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateRequestHeader]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiHeaderController.addRequestHeader(org.hango.cloud.gdashboard.api.dto.ApiHeadersDto)
2021-07-06 11:37:23,204 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateResponseHeader]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiHeaderController.addResponseHeader(org.hango.cloud.gdashboard.api.dto.ApiHeadersDto)
2021-07-06 11:37:23,205 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRequestHeader]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiHeaderController.getRequestHeader(long)
2021-07-06 11:37:23,206 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeResponseHeader]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiHeaderController.getResponseHeader(long)
2021-07-06 11:37:23,206 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteHeaderByParamId]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiHeaderController.deleteHeaderParam(java.lang.Long)
2021-07-06 11:37:23,222 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateApiModel]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiModelController.addModel(org.hango.cloud.gdashboard.api.dto.CreateApiModelDto)
2021-07-06 11:37:23,224 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateApiModel]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiModelController.modifyModel(org.hango.cloud.gdashboard.api.dto.CreateApiModelDto)
2021-07-06 11:37:23,224 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeApiModel]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiModelController.describeApiModel(long)
2021-07-06 11:37:23,225 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeModelList]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiModelController.describeApiModels(java.lang.String,long,long,long)
2021-07-06 11:37:23,225 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteApiModel]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiModelController.deleteApiModelByModelId(long)
2021-07-06 11:37:23,226 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeHeaderParamType]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiParamTypeController.describeHeaderParam()
2021-07-06 11:37:23,226 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeQueryStringParamType]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiParamTypeController.describeQueryStringParam()
2021-07-06 11:37:23,226 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeBodyParam]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiParamTypeController.describeBodyParam(java.lang.Long)
2021-07-06 11:37:23,226 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeApiDocument]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiParamTypeController.describeApiDocument()
2021-07-06 11:37:23,233 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/healthcheck],methods=[GET]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.health.HealthCheckController.return200()
2021-07-06 11:37:23,252 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
2021-07-06 11:37:23,254 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2021-07-06 11:37:23,330 INFO o.s.w.s.h.AbstractUrlHandlerMapping [main] Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2021-07-06 11:37:23,330 INFO o.s.w.s.h.AbstractUrlHandlerMapping [main] Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2021-07-06 11:37:23,355 INFO o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver [main] Detected @ExceptionHandler methods in commonControllerAdvice
2021-07-06 11:37:23,388 INFO o.s.w.s.h.AbstractUrlHandlerMapping [main] Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2021-07-06 11:37:23,896 INFO o.s.b.StartupInfoLogger [main] Started DaoMetaUnitTest in 9.359 seconds (JVM running for 11.253)
2021-07-06 11:37:24,132 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1 t:5*/SELECT 1;
2021-07-06 11:37:24,155 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@49122853 testClass = DaoMetaUnitTest, testInstance = org.hango.cloud.ncegdashboard.meta.DaoMetaUnitTest@e97f115, testMethod = testForAllDaoMeta@DaoMetaUnitTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@40cf6254 testClass = DaoMetaUnitTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:24,171 INFO o.h.c.n.m.DaoMetaUnitTest [main] DaoMetaUnitTest ==== start ====
2021-07-06 11:37:24,269 INFO o.r.Reflections [main] Reflections took 19 ms to scan 1 urls, producing 2 keys and 13 values 
2021-07-06 11:37:24,290 INFO o.h.c.n.m.DaoMetaUnitTest [main] DaoMetaUnitTest ==== end ====
2021-07-06 11:37:24,299 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:24,300 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:24,304 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@49122853 testClass = DaoMetaUnitTest, testInstance = org.hango.cloud.ncegdashboard.meta.DaoMetaUnitTest@e97f115, testMethod = testForAllDaoMeta@DaoMetaUnitTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@40cf6254 testClass = DaoMetaUnitTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:24,343 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest], using SpringBootContextLoader
2021-07-06 11:37:24,351 INFO o.s.t.c.s.AbstractContextLoader [main] Could not detect default resource locations for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2021-07-06 11:37:24,351 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest]: EnvoyRouteRuleInfoServiceImplTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2021-07-06 11:37:24,371 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration org.hango.cloud.ncegdashboard.DashboardApplication for test class org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest
2021-07-06 11:37:24,380 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2021-07-06 11:37:24,384 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@70a24f9, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@78bad03b, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@26101efc, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4e2109fe, org.springframework.test.context.transaction.TransactionalTestExecutionListener@18dac12f, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@36cfe107, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@100eeedc, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@56266bda, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@18bb1b88, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@51b51641, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@362a6aa5, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@53b7bf01]
2021-07-06 11:37:24,416 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@63326a3a, testMethod = checkUpdateParam@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:24,489 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:20*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:24,496 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,613 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1 t:2*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 1, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542644603, 13: 1625542644603, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:24,614 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,632 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,1,testRouteUnit,0,0,1625542644603,1625542644603,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:24,639 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 1};
2021-07-06 11:37:24,666 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:73*/select * from apigw_envoy_route_rule where  1 = 1 and route_rule_name = ? {1: 'update'};
2021-07-06 11:37:24,673 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:24,677 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 1};
2021-07-06 11:37:24,691 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 1};
2021-07-06 11:37:24,692 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 1
2021-07-06 11:37:24,700 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60 t:7*/delete from apigw_envoy_health_check_rule where service_id=? {1: 1};
2021-07-06 11:37:24,726 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:12*/ROLLBACK;
2021-07-06 11:37:24,727 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:24,731 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@63326a3a, testMethod = checkUpdateParam@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:24,758 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@7d7b4e04, testMethod = getRouteRuleInfoById@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:24,767 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:24,768 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,770 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1 t:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 2, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542644768, 13: 1625542644768, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:24,771 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,772 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,2,testRouteUnit,0,0,1625542644768,1625542644768,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:24,775 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1 t:1*/select * from apigw_envoy_route_rule where id=? {1: 2};
2021-07-06 11:37:24,777 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:24,779 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 2};
2021-07-06 11:37:24,779 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 2};
2021-07-06 11:37:24,780 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 2
2021-07-06 11:37:24,782 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60 t:1*/delete from apigw_envoy_health_check_rule where service_id=? {1: 2};
2021-07-06 11:37:24,785 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:24,786 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:24,791 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@7d7b4e04, testMethod = getRouteRuleInfoById@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:24,797 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@51de5efa, testMethod = fromMeta@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:24,804 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:24,804 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,806 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 3, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542644805, 13: 1625542644805, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:24,807 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,809 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,3,testRouteUnit,0,0,1625542644805,1625542644805,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:24,810 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 3};
2021-07-06 11:37:24,813 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 3};
2021-07-06 11:37:24,815 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 3};
2021-07-06 11:37:24,828 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:24,829 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 3};
2021-07-06 11:37:24,830 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 3};
2021-07-06 11:37:24,830 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 3
2021-07-06 11:37:24,830 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 3};
2021-07-06 11:37:24,832 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:24,833 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:24,833 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@51de5efa, testMethod = fromMeta@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:24,844 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@273293c8, testMethod = getRouteRuleList@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:24,851 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:24,851 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,854 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 4, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542644853, 13: 1625542644853, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:24,854 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,856 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,4,testRouteUnit,0,0,1625542644853,1625542644853,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:24,860 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:52 #:1*/select * from apigw_envoy_route_rule where id in (?) {1: 4};
2021-07-06 11:37:24,861 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:24,862 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 4};
2021-07-06 11:37:24,862 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 4};
2021-07-06 11:37:24,862 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 4
2021-07-06 11:37:24,863 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 4};
2021-07-06 11:37:24,866 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:24,866 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:24,867 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@273293c8, testMethod = getRouteRuleList@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:24,875 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@2f9addd4, testMethod = isSameRouteRuleInfo@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:24,878 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:24,878 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,882 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 5, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542644879, 13: 1625542644879, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:24,883 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,884 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,5,testRouteUnit,0,0,1625542644879,1625542644879,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:24,888 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:160 #:1*/select * from apigw_envoy_route_rule where  1 = 1 and method = ? and host = ? and header = ? and query_param = ? and priority = ? and uri = ? and project_id = ? {1: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 2: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 3: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 4: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 5: 50, 6: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 7: 0};
2021-07-06 11:37:24,892 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:24,892 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 5};
2021-07-06 11:37:24,893 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 5};
2021-07-06 11:37:24,893 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 5
2021-07-06 11:37:24,894 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 5};
2021-07-06 11:37:24,898 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:24,905 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:24,906 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@2f9addd4, testMethod = isSameRouteRuleInfo@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:24,914 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@225e09f0, testMethod = addRouteRule@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:24,916 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:24,917 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,922 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 6, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542644918, 13: 1625542644918, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:24,922 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,924 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,6,testRouteUnit,0,0,1625542644918,1625542644918,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:24,926 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:73 #:1*/select * from apigw_envoy_route_rule where  1 = 1 and route_rule_name = ? {1: 'testRouteUnit'};
2021-07-06 11:37:24,927 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:24,927 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 6};
2021-07-06 11:37:24,927 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 6};
2021-07-06 11:37:24,927 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 6
2021-07-06 11:37:24,928 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 6};
2021-07-06 11:37:24,932 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:24,932 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:24,932 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@225e09f0, testMethod = addRouteRule@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:24,941 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@7bce9ce4, testMethod = deleteRouteRule@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:24,943 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:24,943 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,946 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 7, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542644945, 13: 1625542644945, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:24,946 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,947 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,7,testRouteUnit,0,0,1625542644945,1625542644945,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:24,948 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 7};
2021-07-06 11:37:24,949 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 7,7,testRouteUnit,0,0,1625542644945,1625542644945,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:24,950 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 7};
2021-07-06 11:37:24,951 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:24,951 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 7};
2021-07-06 11:37:24,952 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 7};
2021-07-06 11:37:24,952 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 7
2021-07-06 11:37:24,953 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 7};
2021-07-06 11:37:24,956 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:24,956 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:24,957 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@7bce9ce4, testMethod = deleteRouteRule@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:24,961 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@4a520f05, testMethod = getRouteRuleIdListByNameFuzzy@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:24,966 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:24,967 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,973 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 8, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542644967, 13: 1625542644967, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:24,974 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:24,974 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,8,testRouteUnit,0,0,1625542644967,1625542644967,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:24,978 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:83 #:1*/select id from apigw_envoy_route_rule where project_id=? and route_rule_name like ? {1: 0, 2: '%testRouteUnit%'};
2021-07-06 11:37:24,979 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:24,979 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 8};
2021-07-06 11:37:24,980 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 8};
2021-07-06 11:37:24,980 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 8
2021-07-06 11:37:24,980 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 8};
2021-07-06 11:37:24,986 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:24,986 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:24,987 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@4a520f05, testMethod = getRouteRuleIdListByNameFuzzy@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:24,992 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@857f74a, testMethod = checkDescribeParam@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,000 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:3*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,000 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,003 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,006 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:1*/DELETE from apigw_gportal_service where id = ? {1: 9};
2021-07-06 11:37:25,007 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 9};
2021-07-06 11:37:25,008 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 9
2021-07-06 11:37:25,008 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 9};
2021-07-06 11:37:25,010 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:25,011 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,012 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@857f74a, testMethod = checkDescribeParam@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,019 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@6c519e47, testMethod = checkAddParam@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,023 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,024 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,025 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:73*/select * from apigw_envoy_route_rule where  1 = 1 and route_rule_name = ? {1: 'testRouteUnit'};
2021-07-06 11:37:25,025 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 10};
2021-07-06 11:37:25,025 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,026 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 10};
2021-07-06 11:37:25,026 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 10};
2021-07-06 11:37:25,026 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 10
2021-07-06 11:37:25,029 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 10};
2021-07-06 11:37:25,037 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:25,037 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,038 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@6c519e47, testMethod = checkAddParam@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,042 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@c754401, testMethod = updateRouteRule@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,046 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,047 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,049 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 11, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542645047, 13: 1625542645047, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:25,049 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,050 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,11,testRouteUnit,0,0,1625542645047,1625542645047,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:25,051 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 9};
2021-07-06 11:37:25,055 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] update envoyRouteRuleInfo: 9,11,update,0,0,0,1625542645051,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:25,059 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:238 #:1*/update apigw_envoy_route_rule set route_rule_name=?, uri=?, method=?, host=?, header=?, query_param=?, priority=?, orders=?, project_id=?, publish_status=?,  update_time=?, description=?, header_operation=?, route_rule_source=? where id=? {1: 'update', 2: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 3: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 4: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 5: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 6: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 7: 50, 8: 50400665, 9: 0, 10: 0, 11: 1625542645051, 12: 'desc', 13: NULL, 14: 'Gateway', 15: 9};
2021-07-06 11:37:25,059 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,060 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 11};
2021-07-06 11:37:25,061 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 11};
2021-07-06 11:37:25,061 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 11
2021-07-06 11:37:25,062 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 11};
2021-07-06 11:37:25,066 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:25,066 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,067 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@c754401, testMethod = updateRouteRule@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,073 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@403f7aa2, testMethod = getRouteRuleInfoCount@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,081 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,082 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,087 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1 t:4*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 12, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542645083, 13: 1625542645083, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:25,088 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,092 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,12,testRouteUnit,0,0,1625542645083,1625542645083,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:25,101 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:141 #:1 t:2*/select count(*) from apigw_envoy_route_rule where (route_rule_name like ? or uri like ? or host like ?) and publish_status=? and service_id=? {1: '%/a%', 2: '%/a%', 3: '%/a%', 4: 0, 5: 12};
2021-07-06 11:37:25,102 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,102 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 12};
2021-07-06 11:37:25,103 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 12};
2021-07-06 11:37:25,103 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 12
2021-07-06 11:37:25,104 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 12};
2021-07-06 11:37:25,110 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:25,111 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,112 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@403f7aa2, testMethod = getRouteRuleInfoCount@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,122 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@459bf87c, testMethod = checkDeleteParam@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,126 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,126 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,127 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 13, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542645127, 13: 1625542645127, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:25,127 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,133 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,13,testRouteUnit,0,0,1625542645127,1625542645127,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:25,134 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 11};
2021-07-06 11:37:25,136 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:77*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? {1: 11};
2021-07-06 11:37:25,137 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,139 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 13};
2021-07-06 11:37:25,139 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 13};
2021-07-06 11:37:25,140 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 13
2021-07-06 11:37:25,140 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 13};
2021-07-06 11:37:25,143 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:25,143 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,144 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@459bf87c, testMethod = checkDeleteParam@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,146 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@6a278584, testMethod = getRouteRuleInfoByPattern@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,148 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,149 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,149 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 14, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 0, 11: 0, 12: 1625542645149, 13: 1625542645149, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:25,150 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,150 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,14,testRouteUnit,0,0,1625542645149,1625542645149,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:25,151 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:177 #:1*/select * from apigw_envoy_route_rule where (route_rule_name like ? or uri like ? or host like ?) and publish_status=? and service_id=? order by create_time desc limit ? offset ? {1: '%/a%', 2: '%/a%', 3: '%/a%', 4: 0, 5: 14, 6: 100, 7: 0};
2021-07-06 11:37:25,151 INFO o.h.c.n.e.s.i.EnvoyRouteRuleInfoServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,152 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 14};
2021-07-06 11:37:25,152 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 14};
2021-07-06 11:37:25,152 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 14
2021-07-06 11:37:25,152 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 14};
2021-07-06 11:37:25,154 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:25,154 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,154 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@393ae7a0 testClass = EnvoyRouteRuleInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleInfoServiceImplTest@6a278584, testMethod = getRouteRuleInfoByPattern@EnvoyRouteRuleInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@139089a4 testClass = EnvoyRouteRuleInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,159 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest], using SpringBootContextLoader
2021-07-06 11:37:25,160 INFO o.s.t.c.s.AbstractContextLoader [main] Could not detect default resource locations for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2021-07-06 11:37:25,160 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest]: EnvoyHealthCheckServiceImplTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2021-07-06 11:37:25,163 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration org.hango.cloud.ncegdashboard.DashboardApplication for test class org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest
2021-07-06 11:37:25,164 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2021-07-06 11:37:25,165 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@7a3c99f1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@16b7e04a, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@661db63e, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5cf2f5d6, org.springframework.test.context.transaction.TransactionalTestExecutionListener@429f0ca8, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6b030101, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@60a4e619, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@2bb3f39e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@11f3400c, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@628b503a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2558f65c, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@11c3ce6a]
2021-07-06 11:37:25,286 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@2d73767e, testMethod = getServiceHealthyStatus@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,298 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,299 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,302 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1 t:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:25,323 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 15};
2021-07-06 11:37:25,335 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1 t:3*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 15, 2: 'DYNAMIC-15', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542645325, 9: 1625542645325, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testUnit\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:25,337 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,339 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=15,code=DYNAMIC-15,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645325,updateTime=1625542645325,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,341 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645340, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 15};
2021-07-06 11:37:25,342 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 15, 2: 2};
2021-07-06 11:37:25,361 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:369 #:1*/insert into apigw_envoy_health_check_rule (create_time, update_time, service_id, gw_id, active_switch, path, timeout, expected_statuses, healthy_interval, healthy_threshold, unhealthy_interval, unhealthy_threshold, passive_switch, consecutive_errors, base_ejection_time, max_ejection_percent, min_health_percent) values(?, ?, ?, ?, ?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 1625542645343, 2: 1625542645343, 3: 15, 4: 2, 5: 1, 6: '/health', 7: 6000, 8: '[200]', 9: 2000, 10: 2, 11: 2000, 12: 2, 13: 1, 14: 5, 15: 3000, 16: 50, 17: 50};
2021-07-06 11:37:25,361 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,361 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] add envoyHealthCheckRule: 0,1625542645343,1625542645343,15,2,1,/health,6000,[200],2000,2,2000,2,1,5,3000,50,50
2021-07-06 11:37:25,362 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 0, 2: 2};
2021-07-06 11:37:25,363 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImpl [main] 该服务未开启健康健康配置，serviceId:0, gwId:2
2021-07-06 11:37:25,363 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,374 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,402 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,408 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 15};
2021-07-06 11:37:25,429 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,431 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,431 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 15};
2021-07-06 11:37:25,446 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1 t:2*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 15, 2: 2};
2021-07-06 11:37:25,451 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 15, 2: 2};
2021-07-06 11:37:25,456 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 15};
2021-07-06 11:37:25,457 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=1,serviceId=15,code=DYNAMIC-15,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645325,updateTime=1625542645325,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,465 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 1};
2021-07-06 11:37:25,469 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 15};
2021-07-06 11:37:25,470 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 15};
2021-07-06 11:37:25,474 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1 t:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645470, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 15};
2021-07-06 11:37:25,475 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 15, 2: 2};
2021-07-06 11:37:25,483 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] update envoyHealthCheckRule: 1,1625542645343,1625542645343,15,2,0,/health,6000,[200],2000,2,2000,2,0,5,3000,50,50
2021-07-06 11:37:25,487 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:338 #:1*/update apigw_envoy_health_check_rule set update_time=?, service_id=?, gw_id=?, active_switch=?, path=?, timeout=?, expected_statuses=?, healthy_interval=?, healthy_threshold=?, unhealthy_interval=?,unhealthy_threshold=?, passive_switch=?, consecutive_errors=?, base_ejection_time=?, max_ejection_percent=?, min_health_percent=? where id=? {1: 1625542645343, 2: 15, 3: 2, 4: 0, 5: '/health', 6: 6000, 7: '[200]', 8: 2000, 9: 2, 10: 2000, 11: 2, 12: 0, 13: 5, 14: 3000, 15: 50, 16: 50, 17: 1};
2021-07-06 11:37:25,492 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:2*/DELETE from apigw_gportal_service where id = ? {1: 15};
2021-07-06 11:37:25,493 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 15};
2021-07-06 11:37:25,493 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 15
2021-07-06 11:37:25,493 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60 #:1*/delete from apigw_envoy_health_check_rule where service_id=? {1: 15};
2021-07-06 11:37:25,501 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:3*/ROLLBACK;
2021-07-06 11:37:25,502 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,504 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@2d73767e, testMethod = getServiceHealthyStatus@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,520 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@5c79c5ec, testMethod = getPassiveHealthCheckRule@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,523 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,523 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,525 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:25,528 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 16};
2021-07-06 11:37:25,531 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 16, 2: 'DYNAMIC-16', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542645529, 9: 1625542645529, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testUnit\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:25,533 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1 t:2*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,534 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=16,code=DYNAMIC-16,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645529,updateTime=1625542645529,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,538 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645535, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 16};
2021-07-06 11:37:25,540 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 16, 2: 2};
2021-07-06 11:37:25,552 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:369 #:1 t:1*/insert into apigw_envoy_health_check_rule (create_time, update_time, service_id, gw_id, active_switch, path, timeout, expected_statuses, healthy_interval, healthy_threshold, unhealthy_interval, unhealthy_threshold, passive_switch, consecutive_errors, base_ejection_time, max_ejection_percent, min_health_percent) values(?, ?, ?, ?, ?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 1625542645549, 2: 1625542645549, 3: 16, 4: 2, 5: 1, 6: '/health', 7: 6000, 8: '[200]', 9: 2000, 10: 2, 11: 2000, 12: 2, 13: 1, 14: 5, 15: 3000, 16: 50, 17: 50};
2021-07-06 11:37:25,555 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,556 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] add envoyHealthCheckRule: 0,1625542645549,1625542645549,16,2,1,/health,6000,[200],2000,2,2000,2,1,5,3000,50,50
2021-07-06 11:37:25,559 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1 t:2*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 16, 2: 2};
2021-07-06 11:37:25,560 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,561 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,561 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,563 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 16};
2021-07-06 11:37:25,563 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,564 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,565 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:1*/select * from apigw_gportal_service where id=? {1: 16};
2021-07-06 11:37:25,566 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 16, 2: 2};
2021-07-06 11:37:25,567 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 16, 2: 2};
2021-07-06 11:37:25,568 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 16};
2021-07-06 11:37:25,568 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=2,serviceId=16,code=DYNAMIC-16,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645529,updateTime=1625542645529,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,569 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 2};
2021-07-06 11:37:25,570 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 16};
2021-07-06 11:37:25,571 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 16};
2021-07-06 11:37:25,572 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645571, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 16};
2021-07-06 11:37:25,573 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 16, 2: 2};
2021-07-06 11:37:25,574 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] update envoyHealthCheckRule: 2,1625542645549,1625542645549,16,2,0,/health,6000,[200],2000,2,2000,2,0,5,3000,50,50
2021-07-06 11:37:25,579 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:338 #:1 t:1*/update apigw_envoy_health_check_rule set update_time=?, service_id=?, gw_id=?, active_switch=?, path=?, timeout=?, expected_statuses=?, healthy_interval=?, healthy_threshold=?, unhealthy_interval=?,unhealthy_threshold=?, passive_switch=?, consecutive_errors=?, base_ejection_time=?, max_ejection_percent=?, min_health_percent=? where id=? {1: 1625542645549, 2: 16, 3: 2, 4: 0, 5: '/health', 6: 6000, 7: '[200]', 8: 2000, 9: 2, 10: 2000, 11: 2, 12: 0, 13: 5, 14: 3000, 15: 50, 16: 50, 17: 2};
2021-07-06 11:37:25,580 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 16};
2021-07-06 11:37:25,581 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 16};
2021-07-06 11:37:25,581 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 16
2021-07-06 11:37:25,581 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60 #:1*/delete from apigw_envoy_health_check_rule where service_id=? {1: 16};
2021-07-06 11:37:25,588 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:4*/ROLLBACK;
2021-07-06 11:37:25,588 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,589 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@5c79c5ec, testMethod = getPassiveHealthCheckRule@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,598 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@13b29b34, testMethod = getActiveHealthCheckRule@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,604 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,604 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,606 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:25,606 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 17};
2021-07-06 11:37:25,607 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 17, 2: 'DYNAMIC-17', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542645607, 9: 1625542645607, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testUnit\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:25,608 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,608 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=17,code=DYNAMIC-17,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645607,updateTime=1625542645607,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,608 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645608, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 17};
2021-07-06 11:37:25,610 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 17, 2: 2};
2021-07-06 11:37:25,616 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:369 #:1*/insert into apigw_envoy_health_check_rule (create_time, update_time, service_id, gw_id, active_switch, path, timeout, expected_statuses, healthy_interval, healthy_threshold, unhealthy_interval, unhealthy_threshold, passive_switch, consecutive_errors, base_ejection_time, max_ejection_percent, min_health_percent) values(?, ?, ?, ?, ?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 1625542645610, 2: 1625542645610, 3: 17, 4: 2, 5: 1, 6: '/health', 7: 6000, 8: '[200]', 9: 2000, 10: 2, 11: 2000, 12: 2, 13: 1, 14: 5, 15: 3000, 16: 50, 17: 50};
2021-07-06 11:37:25,617 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,618 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] add envoyHealthCheckRule: 0,1625542645610,1625542645610,17,2,1,/health,6000,[200],2000,2,2000,2,1,5,3000,50,50
2021-07-06 11:37:25,618 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 17, 2: 2};
2021-07-06 11:37:25,618 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,619 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,619 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,620 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 17};
2021-07-06 11:37:25,620 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,620 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,620 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 17};
2021-07-06 11:37:25,621 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 17, 2: 2};
2021-07-06 11:37:25,622 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 17, 2: 2};
2021-07-06 11:37:25,625 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 17};
2021-07-06 11:37:25,626 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=3,serviceId=17,code=DYNAMIC-17,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645607,updateTime=1625542645607,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,628 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 3};
2021-07-06 11:37:25,628 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 17};
2021-07-06 11:37:25,628 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 17};
2021-07-06 11:37:25,631 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1 t:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645630, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 17};
2021-07-06 11:37:25,632 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 17, 2: 2};
2021-07-06 11:37:25,632 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] update envoyHealthCheckRule: 3,1625542645610,1625542645610,17,2,0,/health,6000,[200],2000,2,2000,2,0,5,3000,50,50
2021-07-06 11:37:25,633 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:338 #:1*/update apigw_envoy_health_check_rule set update_time=?, service_id=?, gw_id=?, active_switch=?, path=?, timeout=?, expected_statuses=?, healthy_interval=?, healthy_threshold=?, unhealthy_interval=?,unhealthy_threshold=?, passive_switch=?, consecutive_errors=?, base_ejection_time=?, max_ejection_percent=?, min_health_percent=? where id=? {1: 1625542645610, 2: 17, 3: 2, 4: 0, 5: '/health', 6: 6000, 7: '[200]', 8: 2000, 9: 2, 10: 2000, 11: 2, 12: 0, 13: 5, 14: 3000, 15: 50, 16: 50, 17: 3};
2021-07-06 11:37:25,633 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 17};
2021-07-06 11:37:25,634 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 17};
2021-07-06 11:37:25,634 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 17
2021-07-06 11:37:25,635 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60 #:1*/delete from apigw_envoy_health_check_rule where service_id=? {1: 17};
2021-07-06 11:37:25,640 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:3*/ROLLBACK;
2021-07-06 11:37:25,641 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,642 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@13b29b34, testMethod = getActiveHealthCheckRule@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,649 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@432a6a69, testMethod = checkUpdateHealthCheckRuleParam@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,652 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,653 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,655 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:25,656 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 18};
2021-07-06 11:37:25,657 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 18, 2: 'DYNAMIC-18', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542645656, 9: 1625542645656, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testUnit\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:25,658 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,658 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=18,code=DYNAMIC-18,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645656,updateTime=1625542645656,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,662 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645659, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 18};
2021-07-06 11:37:25,666 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71 #:1*/select count(*) from apigw_gportal_gateway_info where  1 = 1 and id = ? {1: 2};
2021-07-06 11:37:25,668 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66 #:1*/select count(*) from apigw_gportal_service where  1 = 1 and id = ? {1: 18};
2021-07-06 11:37:25,669 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,671 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,672 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,672 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 18};
2021-07-06 11:37:25,673 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,673 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,673 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 18};
2021-07-06 11:37:25,674 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 18, 2: 2};
2021-07-06 11:37:25,675 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 18, 2: 2};
2021-07-06 11:37:25,677 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 18};
2021-07-06 11:37:25,678 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=4,serviceId=18,code=DYNAMIC-18,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645656,updateTime=1625542645656,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,681 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1 t:1*/delete from apigw_envoy_service_proxy where id=? {1: 4};
2021-07-06 11:37:25,683 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 18};
2021-07-06 11:37:25,684 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 18};
2021-07-06 11:37:25,700 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645684, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 18};
2021-07-06 11:37:25,700 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 18, 2: 2};
2021-07-06 11:37:25,701 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 18};
2021-07-06 11:37:25,702 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 18};
2021-07-06 11:37:25,702 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 18
2021-07-06 11:37:25,702 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 18};
2021-07-06 11:37:25,707 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:2*/ROLLBACK;
2021-07-06 11:37:25,707 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,708 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@432a6a69, testMethod = checkUpdateHealthCheckRuleParam@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,714 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@7b2e931, testMethod = getServiceInstanceList@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,716 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,717 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,719 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:25,720 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 19};
2021-07-06 11:37:25,722 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 19, 2: 'DYNAMIC-19', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542645721, 9: 1625542645721, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testUnit\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:25,722 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,722 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=19,code=DYNAMIC-19,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645721,updateTime=1625542645721,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,723 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645722, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 19};
2021-07-06 11:37:25,723 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 19, 2: 2};
2021-07-06 11:37:25,724 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:369 #:1*/insert into apigw_envoy_health_check_rule (create_time, update_time, service_id, gw_id, active_switch, path, timeout, expected_statuses, healthy_interval, healthy_threshold, unhealthy_interval, unhealthy_threshold, passive_switch, consecutive_errors, base_ejection_time, max_ejection_percent, min_health_percent) values(?, ?, ?, ?, ?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 1625542645723, 2: 1625542645723, 3: 19, 4: 2, 5: 1, 6: '/health', 7: 6000, 8: '[200]', 9: 2000, 10: 2, 11: 2000, 12: 2, 13: 1, 14: 5, 15: 3000, 16: 50, 17: 50};
2021-07-06 11:37:25,724 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,724 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] add envoyHealthCheckRule: 0,1625542645723,1625542645723,19,2,1,/health,6000,[200],2000,2,2000,2,1,5,3000,50,50
2021-07-06 11:37:25,726 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 0};
2021-07-06 11:37:25,727 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImpl [main] 未查询到具体的服务发布信息
2021-07-06 11:37:25,727 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,728 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,730 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,732 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 19};
2021-07-06 11:37:25,732 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,732 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,733 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 19};
2021-07-06 11:37:25,733 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 19, 2: 2};
2021-07-06 11:37:25,734 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 19, 2: 2};
2021-07-06 11:37:25,735 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 19};
2021-07-06 11:37:25,735 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=5,serviceId=19,code=DYNAMIC-19,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645721,updateTime=1625542645721,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,741 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 5};
2021-07-06 11:37:25,744 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 19};
2021-07-06 11:37:25,744 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 19};
2021-07-06 11:37:25,745 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645744, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 19};
2021-07-06 11:37:25,745 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 19, 2: 2};
2021-07-06 11:37:25,745 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] update envoyHealthCheckRule: 4,1625542645723,1625542645723,19,2,0,/health,6000,[200],2000,2,2000,2,0,5,3000,50,50
2021-07-06 11:37:25,748 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:338 #:1*/update apigw_envoy_health_check_rule set update_time=?, service_id=?, gw_id=?, active_switch=?, path=?, timeout=?, expected_statuses=?, healthy_interval=?, healthy_threshold=?, unhealthy_interval=?,unhealthy_threshold=?, passive_switch=?, consecutive_errors=?, base_ejection_time=?, max_ejection_percent=?, min_health_percent=? where id=? {1: 1625542645723, 2: 19, 3: 2, 4: 0, 5: '/health', 6: 6000, 7: '[200]', 8: 2000, 9: 2, 10: 2000, 11: 2, 12: 0, 13: 5, 14: 3000, 15: 50, 16: 50, 17: 4};
2021-07-06 11:37:25,749 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 19};
2021-07-06 11:37:25,749 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 19};
2021-07-06 11:37:25,749 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 19
2021-07-06 11:37:25,750 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60 #:1*/delete from apigw_envoy_health_check_rule where service_id=? {1: 19};
2021-07-06 11:37:25,753 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:25,755 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,759 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@7b2e931, testMethod = getServiceInstanceList@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,766 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@4d664323, testMethod = updateHealthCheckRuleParam@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,769 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,770 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,771 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:25,771 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 20};
2021-07-06 11:37:25,772 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 20, 2: 'DYNAMIC-20', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542645772, 9: 1625542645772, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testUnit\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:25,773 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,773 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=20,code=DYNAMIC-20,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645772,updateTime=1625542645772,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,775 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645774, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 20};
2021-07-06 11:37:25,775 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 20, 2: 2};
2021-07-06 11:37:25,776 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:369 #:1*/insert into apigw_envoy_health_check_rule (create_time, update_time, service_id, gw_id, active_switch, path, timeout, expected_statuses, healthy_interval, healthy_threshold, unhealthy_interval, unhealthy_threshold, passive_switch, consecutive_errors, base_ejection_time, max_ejection_percent, min_health_percent) values(?, ?, ?, ?, ?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 1625542645775, 2: 1625542645775, 3: 20, 4: 2, 5: 1, 6: '/health', 7: 6000, 8: '[200]', 9: 2000, 10: 2, 11: 2000, 12: 2, 13: 1, 14: 5, 15: 3000, 16: 50, 17: 50};
2021-07-06 11:37:25,777 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,778 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] add envoyHealthCheckRule: 0,1625542645775,1625542645775,20,2,1,/health,6000,[200],2000,2,2000,2,1,5,3000,50,50
2021-07-06 11:37:25,779 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 20, 2: 2};
2021-07-06 11:37:25,779 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,781 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,781 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,781 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 20};
2021-07-06 11:37:25,782 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,782 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,782 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 20};
2021-07-06 11:37:25,782 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 20, 2: 2};
2021-07-06 11:37:25,783 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 20, 2: 2};
2021-07-06 11:37:25,785 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 20};
2021-07-06 11:37:25,786 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=6,serviceId=20,code=DYNAMIC-20,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645772,updateTime=1625542645772,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,788 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 6};
2021-07-06 11:37:25,789 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 20};
2021-07-06 11:37:25,789 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 20};
2021-07-06 11:37:25,790 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645790, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 20};
2021-07-06 11:37:25,791 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 20, 2: 2};
2021-07-06 11:37:25,792 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] update envoyHealthCheckRule: 5,1625542645775,1625542645775,20,2,0,/health,6000,[200],2000,2,2000,2,0,5,3000,50,50
2021-07-06 11:37:25,797 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:338 #:1*/update apigw_envoy_health_check_rule set update_time=?, service_id=?, gw_id=?, active_switch=?, path=?, timeout=?, expected_statuses=?, healthy_interval=?, healthy_threshold=?, unhealthy_interval=?,unhealthy_threshold=?, passive_switch=?, consecutive_errors=?, base_ejection_time=?, max_ejection_percent=?, min_health_percent=? where id=? {1: 1625542645775, 2: 20, 3: 2, 4: 0, 5: '/health', 6: 6000, 7: '[200]', 8: 2000, 9: 2, 10: 2000, 11: 2, 12: 0, 13: 5, 14: 3000, 15: 50, 16: 50, 17: 5};
2021-07-06 11:37:25,810 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:1*/DELETE from apigw_gportal_service where id = ? {1: 20};
2021-07-06 11:37:25,817 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 20};
2021-07-06 11:37:25,819 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 20
2021-07-06 11:37:25,821 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60 #:1 t:1*/delete from apigw_envoy_health_check_rule where service_id=? {1: 20};
2021-07-06 11:37:25,827 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:4*/ROLLBACK;
2021-07-06 11:37:25,828 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,828 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@4d664323, testMethod = updateHealthCheckRuleParam@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,840 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@38848217, testMethod = deleteHealthCheckRule@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,848 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:2*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,849 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,850 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:25,853 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 21};
2021-07-06 11:37:25,874 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1 t:2*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 21, 2: 'DYNAMIC-21', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542645857, 9: 1625542645857, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testUnit\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:25,875 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,876 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=21,code=DYNAMIC-21,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645857,updateTime=1625542645857,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,879 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1 t:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645876, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 21};
2021-07-06 11:37:25,882 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 21, 2: 2};
2021-07-06 11:37:25,883 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:369 #:1*/insert into apigw_envoy_health_check_rule (create_time, update_time, service_id, gw_id, active_switch, path, timeout, expected_statuses, healthy_interval, healthy_threshold, unhealthy_interval, unhealthy_threshold, passive_switch, consecutive_errors, base_ejection_time, max_ejection_percent, min_health_percent) values(?, ?, ?, ?, ?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 1625542645882, 2: 1625542645882, 3: 21, 4: 2, 5: 1, 6: '/health', 7: 6000, 8: '[200]', 9: 2000, 10: 2, 11: 2000, 12: 2, 13: 1, 14: 5, 15: 3000, 16: 50, 17: 50};
2021-07-06 11:37:25,884 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,886 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] add envoyHealthCheckRule: 0,1625542645882,1625542645882,21,2,1,/health,6000,[200],2000,2,2000,2,1,5,3000,50,50
2021-07-06 11:37:25,887 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 21
2021-07-06 11:37:25,887 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60 #:1*/delete from apigw_envoy_health_check_rule where service_id=? {1: 21};
2021-07-06 11:37:25,889 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 21, 2: 2};
2021-07-06 11:37:25,889 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,890 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,891 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,894 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 21};
2021-07-06 11:37:25,895 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,897 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,898 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 21};
2021-07-06 11:37:25,900 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 21, 2: 2};
2021-07-06 11:37:25,900 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 21, 2: 2};
2021-07-06 11:37:25,900 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 21};
2021-07-06 11:37:25,901 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=7,serviceId=21,code=DYNAMIC-21,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645857,updateTime=1625542645857,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,901 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 7};
2021-07-06 11:37:25,902 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 21};
2021-07-06 11:37:25,902 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 21};
2021-07-06 11:37:25,903 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645902, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 21};
2021-07-06 11:37:25,903 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 21, 2: 2};
2021-07-06 11:37:25,903 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 21};
2021-07-06 11:37:25,903 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 21};
2021-07-06 11:37:25,904 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 21
2021-07-06 11:37:25,904 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 21};
2021-07-06 11:37:25,909 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:25,910 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,911 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@38848217, testMethod = deleteHealthCheckRule@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,915 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@2382b2f, testMethod = shutdownHealthCheck@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:25,919 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:25,920 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,922 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:25,923 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 22};
2021-07-06 11:37:25,926 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 22, 2: 'DYNAMIC-22', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542645924, 9: 1625542645924, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testUnit\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:25,926 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,927 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=22,code=DYNAMIC-22,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645924,updateTime=1625542645924,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,928 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645927, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 22};
2021-07-06 11:37:25,928 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 22, 2: 2};
2021-07-06 11:37:25,932 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:369 #:1 t:2*/insert into apigw_envoy_health_check_rule (create_time, update_time, service_id, gw_id, active_switch, path, timeout, expected_statuses, healthy_interval, healthy_threshold, unhealthy_interval, unhealthy_threshold, passive_switch, consecutive_errors, base_ejection_time, max_ejection_percent, min_health_percent) values(?, ?, ?, ?, ?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 1625542645928, 2: 1625542645928, 3: 22, 4: 2, 5: 1, 6: '/health', 7: 6000, 8: '[200]', 9: 2000, 10: 2, 11: 2000, 12: 2, 13: 1, 14: 5, 15: 3000, 16: 50, 17: 50};
2021-07-06 11:37:25,933 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:25,933 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] add envoyHealthCheckRule: 0,1625542645928,1625542645928,22,2,1,/health,6000,[200],2000,2,2000,2,1,5,3000,50,50
2021-07-06 11:37:25,934 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 22, 2: 2};
2021-07-06 11:37:25,934 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] update envoyHealthCheckRule: 7,1625542645928,1625542645928,22,2,0,/health,6000,[200],2000,2,2000,2,0,5,3000,50,50
2021-07-06 11:37:25,938 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:338 #:1*/update apigw_envoy_health_check_rule set update_time=?, service_id=?, gw_id=?, active_switch=?, path=?, timeout=?, expected_statuses=?, healthy_interval=?, healthy_threshold=?, unhealthy_interval=?,unhealthy_threshold=?, passive_switch=?, consecutive_errors=?, base_ejection_time=?, max_ejection_percent=?, min_health_percent=? where id=? {1: 1625542645928, 2: 22, 3: 2, 4: 0, 5: '/health', 6: 6000, 7: '[200]', 8: 2000, 9: 2, 10: 2000, 11: 2, 12: 0, 13: 5, 14: 3000, 15: 50, 16: 50, 17: 7};
2021-07-06 11:37:25,938 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 22, 2: 2};
2021-07-06 11:37:25,938 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:25,941 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,946 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,947 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 22};
2021-07-06 11:37:25,948 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:25,949 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:25,951 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 22};
2021-07-06 11:37:25,952 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 22, 2: 2};
2021-07-06 11:37:25,953 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 22, 2: 2};
2021-07-06 11:37:25,956 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 22};
2021-07-06 11:37:25,956 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=8,serviceId=22,code=DYNAMIC-22,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542645924,updateTime=1625542645924,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testUnit"}]]
2021-07-06 11:37:25,959 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 8};
2021-07-06 11:37:25,963 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 22};
2021-07-06 11:37:25,963 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 22};
2021-07-06 11:37:25,964 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542645963, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 22};
2021-07-06 11:37:25,964 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 22, 2: 2};
2021-07-06 11:37:25,966 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] update envoyHealthCheckRule: 7,1625542645928,1625542645928,22,2,0,/health,6000,[200],2000,2,2000,2,0,5,3000,50,50
2021-07-06 11:37:25,968 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:338 #:1 t:1*/update apigw_envoy_health_check_rule set update_time=?, service_id=?, gw_id=?, active_switch=?, path=?, timeout=?, expected_statuses=?, healthy_interval=?, healthy_threshold=?, unhealthy_interval=?,unhealthy_threshold=?, passive_switch=?, consecutive_errors=?, base_ejection_time=?, max_ejection_percent=?, min_health_percent=? where id=? {1: 1625542645928, 2: 22, 3: 2, 4: 0, 5: '/health', 6: 6000, 7: '[200]', 8: 2000, 9: 2, 10: 2000, 11: 2, 12: 0, 13: 5, 14: 3000, 15: 50, 16: 50, 17: 7};
2021-07-06 11:37:25,970 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 22};
2021-07-06 11:37:25,970 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 22};
2021-07-06 11:37:25,970 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 22
2021-07-06 11:37:25,971 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60 #:1*/delete from apigw_envoy_health_check_rule where service_id=? {1: 22};
2021-07-06 11:37:25,973 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:25,974 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:25,974 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@2b6b487c testClass = EnvoyHealthCheckServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyHealthCheckServiceImplTest@2382b2f, testMethod = shutdownHealthCheck@EnvoyHealthCheckServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1a3b1f7e testClass = EnvoyHealthCheckServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:25,982 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest], using SpringBootContextLoader
2021-07-06 11:37:25,984 INFO o.s.t.c.s.AbstractContextLoader [main] Could not detect default resource locations for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2021-07-06 11:37:25,984 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest]: EnvoyServiceProxyServiceImplTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2021-07-06 11:37:25,991 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration org.hango.cloud.ncegdashboard.DashboardApplication for test class org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest
2021-07-06 11:37:25,992 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2021-07-06 11:37:25,993 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@22604c7e, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4d8f2cfd, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6d4502ca, org.springframework.test.context.support.DirtiesContextTestExecutionListener@ab2009f, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2a11ae0b, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1e4d8770, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5b5b9521, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@41f7c02d, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@66314fee, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@14b5325f, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@13404f75, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6cc90398]
2021-07-06 11:37:26,034 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@45ad3cd8, testMethod = getEnvoyServiceProxyByLimit@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,038 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,040 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,040 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,103 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 23};
2021-07-06 11:37:26,110 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1 t:6*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 23, 2: 'DYNAMIC-23', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646104, 9: 1625542646104, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: '{\"ConnectionPool\":{\"HTTP\":{\"Http1MaxPendingRequests\":1024,\"Http2MaxRequests\":1024,\"IdleTimeout\":1000,\"MaxRequestsPerConnection\":0},\"TCP\":{\"ConnectTimeout\":10,\"MaxConnections\":100}},\"HealthCheck\":{\"ExpectedStatuses\":[200],\"HealthyInterval\":1,\"HealthyThreshold\":1,\"Path\":\"/healthcheck\",\"Timeout\":10,\"UnhealthyInterval\":1,\"UnhealthyThreshold\":1},\"LoadBalancer\":{\"Simple\":\"ROUND_ROBIN\",\"Type\":\"Simple\"},\"OutlierDetection\":{\"BaseEjectionTime\":10,\"ConsecutiveErrors\":2,\"MaxEjectionPercent\":10}}'};
2021-07-06 11:37:26,111 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,111 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=23,code=DYNAMIC-23,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646104,updateTime=1625542646104,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,112 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646111, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 23};
2021-07-06 11:37:26,112 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 23};
2021-07-06 11:37:26,115 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:122 #:1 t:1*/select * from apigw_envoy_service_proxy where service_id=? and gw_id=? and project_id=?  order by id desc limit ? offset ? {1: 23, 2: 2, 3: 3, 4: 100, 5: 0};
2021-07-06 11:37:26,116 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,116 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,118 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 23};
2021-07-06 11:37:26,132 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,134 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,136 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 23};
2021-07-06 11:37:26,140 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 23, 2: 2};
2021-07-06 11:37:26,141 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 23, 2: 2};
2021-07-06 11:37:26,143 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 23};
2021-07-06 11:37:26,145 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=9,serviceId=23,code=DYNAMIC-23,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646104,updateTime=1625542646104,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,146 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 9};
2021-07-06 11:37:26,147 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 23};
2021-07-06 11:37:26,147 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 23};
2021-07-06 11:37:26,148 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646147, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 23};
2021-07-06 11:37:26,152 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 23, 2: 2};
2021-07-06 11:37:26,153 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,155 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 23};
2021-07-06 11:37:26,157 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 23};
2021-07-06 11:37:26,158 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 23
2021-07-06 11:37:26,158 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 23};
2021-07-06 11:37:26,167 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:6*/ROLLBACK;
2021-07-06 11:37:26,168 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,169 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@45ad3cd8, testMethod = getEnvoyServiceProxyByLimit@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,182 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@492c8137, testMethod = checkUpdatePublishParam@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,185 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,185 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,186 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,188 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 24};
2021-07-06 11:37:26,188 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 24, 2: 'DYNAMIC-24', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646188, 9: 1625542646188, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: '{\"ConnectionPool\":{\"HTTP\":{\"Http1MaxPendingRequests\":1024,\"Http2MaxRequests\":1024,\"IdleTimeout\":1000,\"MaxRequestsPerConnection\":0},\"TCP\":{\"ConnectTimeout\":10,\"MaxConnections\":100}},\"HealthCheck\":{\"ExpectedStatuses\":[200],\"HealthyInterval\":1,\"HealthyThreshold\":1,\"Path\":\"/healthcheck\",\"Timeout\":10,\"UnhealthyInterval\":1,\"UnhealthyThreshold\":1},\"LoadBalancer\":{\"Simple\":\"ROUND_ROBIN\",\"Type\":\"Simple\"},\"OutlierDetection\":{\"BaseEjectionTime\":10,\"ConsecutiveErrors\":2,\"MaxEjectionPercent\":10}}'};
2021-07-06 11:37:26,190 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1 t:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,190 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=24,code=DYNAMIC-24,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646188,updateTime=1625542646188,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,191 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646191, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 24};
2021-07-06 11:37:26,193 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:103 #:1*/select count(*) from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and id = ? and service_id = ? {1: 2, 2: 10, 3: 24};
2021-07-06 11:37:26,195 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:1*/select * from apigw_gportal_service where id=? {1: 24};
2021-07-06 11:37:26,195 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,196 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,199 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,199 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,200 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 24};
2021-07-06 11:37:26,200 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,200 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,201 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 24};
2021-07-06 11:37:26,202 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 24, 2: 2};
2021-07-06 11:37:26,202 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 24, 2: 2};
2021-07-06 11:37:26,205 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 24};
2021-07-06 11:37:26,206 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=10,serviceId=24,code=DYNAMIC-24,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646188,updateTime=1625542646188,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,207 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 10};
2021-07-06 11:37:26,207 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 24};
2021-07-06 11:37:26,208 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 24};
2021-07-06 11:37:26,209 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646208, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 24};
2021-07-06 11:37:26,209 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 24, 2: 2};
2021-07-06 11:37:26,209 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,210 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 24};
2021-07-06 11:37:26,210 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 24};
2021-07-06 11:37:26,210 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 24
2021-07-06 11:37:26,211 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 24};
2021-07-06 11:37:26,215 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:26,215 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,215 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@492c8137, testMethod = checkUpdatePublishParam@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,220 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@72f3acc9, testMethod = fromMeta@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,222 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,223 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,224 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,226 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 25};
2021-07-06 11:37:26,229 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1 t:2*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 25, 2: 'DYNAMIC-25', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646226, 9: 1625542646226, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: '{\"ConnectionPool\":{\"HTTP\":{\"Http1MaxPendingRequests\":1024,\"Http2MaxRequests\":1024,\"IdleTimeout\":1000,\"MaxRequestsPerConnection\":0},\"TCP\":{\"ConnectTimeout\":10,\"MaxConnections\":100}},\"HealthCheck\":{\"ExpectedStatuses\":[200],\"HealthyInterval\":1,\"HealthyThreshold\":1,\"Path\":\"/healthcheck\",\"Timeout\":10,\"UnhealthyInterval\":1,\"UnhealthyThreshold\":1},\"LoadBalancer\":{\"Simple\":\"ROUND_ROBIN\",\"Type\":\"Simple\"},\"OutlierDetection\":{\"BaseEjectionTime\":10,\"ConsecutiveErrors\":2,\"MaxEjectionPercent\":10}}'};
2021-07-06 11:37:26,230 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,230 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=25,code=DYNAMIC-25,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646226,updateTime=1625542646226,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,231 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646230, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 25};
2021-07-06 11:37:26,231 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 25};
2021-07-06 11:37:26,242 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,243 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,244 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 25};
2021-07-06 11:37:26,244 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 25, 2: 2};
2021-07-06 11:37:26,245 INFO o.h.c.n.e.s.i.EnvoyHealthCheckServiceImpl [main] 该服务未开启健康健康配置，serviceId:25, gwId:2
2021-07-06 11:37:26,245 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,245 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,246 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 25};
2021-07-06 11:37:26,246 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,246 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,246 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 25};
2021-07-06 11:37:26,247 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 25, 2: 2};
2021-07-06 11:37:26,248 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 25, 2: 2};
2021-07-06 11:37:26,248 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 25};
2021-07-06 11:37:26,249 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=11,serviceId=25,code=DYNAMIC-25,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646226,updateTime=1625542646226,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,249 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 11};
2021-07-06 11:37:26,250 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 25};
2021-07-06 11:37:26,250 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 25};
2021-07-06 11:37:26,250 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646250, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 25};
2021-07-06 11:37:26,251 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 25, 2: 2};
2021-07-06 11:37:26,251 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,251 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 25};
2021-07-06 11:37:26,252 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 25};
2021-07-06 11:37:26,252 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 25
2021-07-06 11:37:26,252 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 25};
2021-07-06 11:37:26,255 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,257 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,258 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@72f3acc9, testMethod = fromMeta@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,262 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@49a06087, testMethod = getServiceProxyByServiceIdAndGwId@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,264 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,264 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,265 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,268 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:1*/select * from apigw_gportal_service where id=? {1: 26};
2021-07-06 11:37:26,272 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1 t:2*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 26, 2: 'DYNAMIC-26', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646269, 9: 1625542646269, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: '{\"ConnectionPool\":{\"HTTP\":{\"Http1MaxPendingRequests\":1024,\"Http2MaxRequests\":1024,\"IdleTimeout\":1000,\"MaxRequestsPerConnection\":0},\"TCP\":{\"ConnectTimeout\":10,\"MaxConnections\":100}},\"HealthCheck\":{\"ExpectedStatuses\":[200],\"HealthyInterval\":1,\"HealthyThreshold\":1,\"Path\":\"/healthcheck\",\"Timeout\":10,\"UnhealthyInterval\":1,\"UnhealthyThreshold\":1},\"LoadBalancer\":{\"Simple\":\"ROUND_ROBIN\",\"Type\":\"Simple\"},\"OutlierDetection\":{\"BaseEjectionTime\":10,\"ConsecutiveErrors\":2,\"MaxEjectionPercent\":10}}'};
2021-07-06 11:37:26,272 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,272 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=26,code=DYNAMIC-26,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646269,updateTime=1625542646269,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,274 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646273, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 26};
2021-07-06 11:37:26,275 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 26};
2021-07-06 11:37:26,275 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,275 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,276 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 26};
2021-07-06 11:37:26,276 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,282 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,285 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 26};
2021-07-06 11:37:26,287 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 26, 2: 2};
2021-07-06 11:37:26,288 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 26, 2: 2};
2021-07-06 11:37:26,288 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 26};
2021-07-06 11:37:26,288 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=12,serviceId=26,code=DYNAMIC-26,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646269,updateTime=1625542646269,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,290 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 12};
2021-07-06 11:37:26,293 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 26};
2021-07-06 11:37:26,294 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 26};
2021-07-06 11:37:26,294 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646294, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 26};
2021-07-06 11:37:26,294 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 26, 2: 2};
2021-07-06 11:37:26,295 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,295 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 26};
2021-07-06 11:37:26,296 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 26};
2021-07-06 11:37:26,296 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 26
2021-07-06 11:37:26,297 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 26};
2021-07-06 11:37:26,299 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,299 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,299 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@49a06087, testMethod = getServiceProxyByServiceIdAndGwId@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,305 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@5fe3b058, testMethod = getServiceListFromApiPlane@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,309 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,309 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,310 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,310 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,311 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 27};
2021-07-06 11:37:26,311 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 27};
2021-07-06 11:37:26,312 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 27
2021-07-06 11:37:26,312 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 27};
2021-07-06 11:37:26,314 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,314 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,315 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@5fe3b058, testMethod = getServiceListFromApiPlane@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,320 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@3c8fe8ad, testMethod = checkEnvoyServiceProxyDto@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,323 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,323 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,324 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,325 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,326 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 28};
2021-07-06 11:37:26,326 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 28};
2021-07-06 11:37:26,327 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 28
2021-07-06 11:37:26,327 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 28};
2021-07-06 11:37:26,347 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,348 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,348 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@3c8fe8ad, testMethod = checkEnvoyServiceProxyDto@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,364 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@b56c222, testMethod = checkPublishParam@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,365 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,365 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,366 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,366 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 29};
2021-07-06 11:37:26,368 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,373 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,374 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:92 #:1*/select count(*) from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 29};
2021-07-06 11:37:26,375 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,375 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 29};
2021-07-06 11:37:26,376 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 29};
2021-07-06 11:37:26,376 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 29
2021-07-06 11:37:26,377 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 29};
2021-07-06 11:37:26,380 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:26,380 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,381 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@b56c222, testMethod = checkPublishParam@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,391 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@72e75786, testMethod = getServiceProxyByServiceId@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,397 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:3*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,397 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,399 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,399 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 30};
2021-07-06 11:37:26,399 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,400 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 30};
2021-07-06 11:37:26,400 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 30};
2021-07-06 11:37:26,400 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 30
2021-07-06 11:37:26,401 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 30};
2021-07-06 11:37:26,402 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,402 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,402 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@72e75786, testMethod = getServiceProxyByServiceId@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,408 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@61836cd9, testMethod = publishServiceToGw@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,411 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,411 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,414 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,416 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 31};
2021-07-06 11:37:26,418 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 31, 2: 'DYNAMIC-31', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646417, 9: 1625542646417, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: '{\"ConnectionPool\":{\"HTTP\":{\"Http1MaxPendingRequests\":1024,\"Http2MaxRequests\":1024,\"IdleTimeout\":1000,\"MaxRequestsPerConnection\":0},\"TCP\":{\"ConnectTimeout\":10,\"MaxConnections\":100}},\"HealthCheck\":{\"ExpectedStatuses\":[200],\"HealthyInterval\":1,\"HealthyThreshold\":1,\"Path\":\"/healthcheck\",\"Timeout\":10,\"UnhealthyInterval\":1,\"UnhealthyThreshold\":1},\"LoadBalancer\":{\"Simple\":\"ROUND_ROBIN\",\"Type\":\"Simple\"},\"OutlierDetection\":{\"BaseEjectionTime\":10,\"ConsecutiveErrors\":2,\"MaxEjectionPercent\":10}}'};
2021-07-06 11:37:26,418 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,418 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=31,code=DYNAMIC-31,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646417,updateTime=1625542646417,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,419 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646419, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 31};
2021-07-06 11:37:26,420 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,421 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,421 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 31};
2021-07-06 11:37:26,422 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,422 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,422 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 31};
2021-07-06 11:37:26,423 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 31, 2: 2};
2021-07-06 11:37:26,423 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 31, 2: 2};
2021-07-06 11:37:26,425 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 31};
2021-07-06 11:37:26,426 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=13,serviceId=31,code=DYNAMIC-31,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646417,updateTime=1625542646417,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,427 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 13};
2021-07-06 11:37:26,431 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 31};
2021-07-06 11:37:26,431 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 31};
2021-07-06 11:37:26,432 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646431, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 31};
2021-07-06 11:37:26,432 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 31, 2: 2};
2021-07-06 11:37:26,432 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,433 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 31};
2021-07-06 11:37:26,433 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 31};
2021-07-06 11:37:26,434 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 31
2021-07-06 11:37:26,434 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 31};
2021-07-06 11:37:26,436 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,436 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,436 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@61836cd9, testMethod = publishServiceToGw@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,439 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@d6d683e, testMethod = getPublishedServiceGateway@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,442 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,442 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,443 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,444 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 32};
2021-07-06 11:37:26,444 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,444 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 32};
2021-07-06 11:37:26,445 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 32};
2021-07-06 11:37:26,446 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 32
2021-07-06 11:37:26,446 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 32};
2021-07-06 11:37:26,450 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:26,450 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,451 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@d6d683e, testMethod = getPublishedServiceGateway@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,453 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@290807e5, testMethod = checkDeleteServiceProxy@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,458 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:3*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,459 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,460 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,461 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,462 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,462 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 33};
2021-07-06 11:37:26,462 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,462 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 33};
2021-07-06 11:37:26,463 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 33};
2021-07-06 11:37:26,463 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 33
2021-07-06 11:37:26,463 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 33};
2021-07-06 11:37:26,465 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,465 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,465 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@290807e5, testMethod = checkDeleteServiceProxy@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,484 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@4ae958b0, testMethod = getServiceProxyInterByServiceIdAndGwIds@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,489 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:2*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,491 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1 t:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,492 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,506 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:10*/select * from apigw_gportal_service where id=? {1: 34};
2021-07-06 11:37:26,519 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1 t:9*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 34, 2: 'DYNAMIC-34', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646507, 9: 1625542646507, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: '{\"ConnectionPool\":{\"HTTP\":{\"Http1MaxPendingRequests\":1024,\"Http2MaxRequests\":1024,\"IdleTimeout\":1000,\"MaxRequestsPerConnection\":0},\"TCP\":{\"ConnectTimeout\":10,\"MaxConnections\":100}},\"HealthCheck\":{\"ExpectedStatuses\":[200],\"HealthyInterval\":1,\"HealthyThreshold\":1,\"Path\":\"/healthcheck\",\"Timeout\":10,\"UnhealthyInterval\":1,\"UnhealthyThreshold\":1},\"LoadBalancer\":{\"Simple\":\"ROUND_ROBIN\",\"Type\":\"Simple\"},\"OutlierDetection\":{\"BaseEjectionTime\":10,\"ConsecutiveErrors\":2,\"MaxEjectionPercent\":10}}'};
2021-07-06 11:37:26,520 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,521 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=34,code=DYNAMIC-34,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646507,updateTime=1625542646507,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,525 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646521, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 34};
2021-07-06 11:37:26,540 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 34};
2021-07-06 11:37:26,541 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,541 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,543 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 34};
2021-07-06 11:37:26,545 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,545 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,546 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 34};
2021-07-06 11:37:26,547 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 34, 2: 2};
2021-07-06 11:37:26,547 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 34, 2: 2};
2021-07-06 11:37:26,548 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 34};
2021-07-06 11:37:26,548 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=14,serviceId=34,code=DYNAMIC-34,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646507,updateTime=1625542646507,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,549 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 14};
2021-07-06 11:37:26,550 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 34};
2021-07-06 11:37:26,550 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 34};
2021-07-06 11:37:26,550 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646550, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 34};
2021-07-06 11:37:26,551 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 34, 2: 2};
2021-07-06 11:37:26,551 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,551 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 34};
2021-07-06 11:37:26,551 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 34};
2021-07-06 11:37:26,552 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 34
2021-07-06 11:37:26,552 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 34};
2021-07-06 11:37:26,555 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:26,556 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,556 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@4ae958b0, testMethod = getServiceProxyInterByServiceIdAndGwIds@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,565 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@2c5708e7, testMethod = getServiceProxyCountByLimit@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,567 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,567 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,567 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,568 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 35};
2021-07-06 11:37:26,570 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1 t:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 35, 2: 'DYNAMIC-35', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646568, 9: 1625542646568, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: '{\"ConnectionPool\":{\"HTTP\":{\"Http1MaxPendingRequests\":1024,\"Http2MaxRequests\":1024,\"IdleTimeout\":1000,\"MaxRequestsPerConnection\":0},\"TCP\":{\"ConnectTimeout\":10,\"MaxConnections\":100}},\"HealthCheck\":{\"ExpectedStatuses\":[200],\"HealthyInterval\":1,\"HealthyThreshold\":1,\"Path\":\"/healthcheck\",\"Timeout\":10,\"UnhealthyInterval\":1,\"UnhealthyThreshold\":1},\"LoadBalancer\":{\"Simple\":\"ROUND_ROBIN\",\"Type\":\"Simple\"},\"OutlierDetection\":{\"BaseEjectionTime\":10,\"ConsecutiveErrors\":2,\"MaxEjectionPercent\":10}}'};
2021-07-06 11:37:26,570 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,570 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=35,code=DYNAMIC-35,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646568,updateTime=1625542646568,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,572 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646571, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 35};
2021-07-06 11:37:26,573 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:92 #:1*/select count(*) from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 35};
2021-07-06 11:37:26,574 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1 t:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,575 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,576 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 35};
2021-07-06 11:37:26,581 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,581 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,582 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 35};
2021-07-06 11:37:26,582 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 35, 2: 2};
2021-07-06 11:37:26,583 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 35, 2: 2};
2021-07-06 11:37:26,583 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 35};
2021-07-06 11:37:26,583 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=15,serviceId=35,code=DYNAMIC-35,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646568,updateTime=1625542646568,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,585 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 15};
2021-07-06 11:37:26,585 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 35};
2021-07-06 11:37:26,585 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 35};
2021-07-06 11:37:26,585 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646585, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 35};
2021-07-06 11:37:26,586 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 35, 2: 2};
2021-07-06 11:37:26,586 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,586 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 35};
2021-07-06 11:37:26,586 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 35};
2021-07-06 11:37:26,586 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 35
2021-07-06 11:37:26,586 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 35};
2021-07-06 11:37:26,589 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,589 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,590 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@2c5708e7, testMethod = getServiceProxyCountByLimit@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,594 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@6e67a8c0, testMethod = updateServiceToGw@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,596 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,596 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,599 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,600 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 36};
2021-07-06 11:37:26,601 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 36, 2: 'DYNAMIC-36', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646601, 9: 1625542646601, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: '{\"ConnectionPool\":{\"HTTP\":{\"Http1MaxPendingRequests\":1024,\"Http2MaxRequests\":1024,\"IdleTimeout\":1000,\"MaxRequestsPerConnection\":0},\"TCP\":{\"ConnectTimeout\":10,\"MaxConnections\":100}},\"HealthCheck\":{\"ExpectedStatuses\":[200],\"HealthyInterval\":1,\"HealthyThreshold\":1,\"Path\":\"/healthcheck\",\"Timeout\":10,\"UnhealthyInterval\":1,\"UnhealthyThreshold\":1},\"LoadBalancer\":{\"Simple\":\"ROUND_ROBIN\",\"Type\":\"Simple\"},\"OutlierDetection\":{\"BaseEjectionTime\":10,\"ConsecutiveErrors\":2,\"MaxEjectionPercent\":10}}'};
2021-07-06 11:37:26,602 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,602 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=36,code=DYNAMIC-36,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646601,updateTime=1625542646601,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,603 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646602, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 36};
2021-07-06 11:37:26,604 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 36};
2021-07-06 11:37:26,604 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,604 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,607 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] update EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=36,code=DYNAMIC-36,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=0,updateTime=1625542646607,projectId=0,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,610 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:241*/update apigw_envoy_service_proxy set service_id=?, code=?, publish_protocol=?, backend_service=?, publish_type=?, gw_id=?, update_time=?, load_balancer=?, subsets=?, registry_center_addr=?, registry_center_type=?, traffic_policy=? where id=? {1: 36, 2: 'DYNAMIC-36', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 1625542646607, 8: 'ROUND_ROBIN', 9: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 10: NULL, 11: 'Kubernetes', 12: '{\"ConnectionPool\":{\"HTTP\":{\"Http1MaxPendingRequests\":1024,\"Http2MaxRequests\":1024,\"IdleTimeout\":1000,\"MaxRequestsPerConnection\":0},\"TCP\":{\"ConnectTimeout\":10,\"MaxConnections\":100}},\"HealthCheck\":{\"ExpectedStatuses\":[200],\"HealthyInterval\":1,\"HealthyThreshold\":1,\"Path\":\"/healthcheck\",\"Timeout\":10,\"UnhealthyInterval\":1,\"UnhealthyThreshold\":1},\"LoadBalancer\":{\"Simple\":\"ROUND_ROBIN\",\"Type\":\"Simple\"},\"OutlierDetection\":{\"BaseEjectionTime\":10,\"ConsecutiveErrors\":2,\"MaxEjectionPercent\":10}}', 13: 0};
2021-07-06 11:37:26,612 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,613 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,613 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 36};
2021-07-06 11:37:26,613 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,614 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,615 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 36};
2021-07-06 11:37:26,615 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 36, 2: 2};
2021-07-06 11:37:26,615 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 36, 2: 2};
2021-07-06 11:37:26,616 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 36};
2021-07-06 11:37:26,616 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=16,serviceId=36,code=DYNAMIC-36,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646601,updateTime=1625542646601,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy={"ConnectionPool":{"HTTP":{"Http1MaxPendingRequests":1024,"Http2MaxRequests":1024,"IdleTimeout":1000,"MaxRequestsPerConnection":0},"TCP":{"ConnectTimeout":10,"MaxConnections":100}},"HealthCheck":{"ExpectedStatuses":[200],"HealthyInterval":1,"HealthyThreshold":1,"Path":"/healthcheck","Timeout":10,"UnhealthyInterval":1,"UnhealthyThreshold":1},"LoadBalancer":{"Simple":"ROUND_ROBIN","Type":"Simple"},"OutlierDetection":{"BaseEjectionTime":10,"ConsecutiveErrors":2,"MaxEjectionPercent":10}},subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,618 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 16};
2021-07-06 11:37:26,618 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 36};
2021-07-06 11:37:26,619 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 36};
2021-07-06 11:37:26,621 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646620, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 36};
2021-07-06 11:37:26,621 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 36, 2: 2};
2021-07-06 11:37:26,622 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,623 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 36};
2021-07-06 11:37:26,623 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 36};
2021-07-06 11:37:26,623 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 36
2021-07-06 11:37:26,624 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 36};
2021-07-06 11:37:26,628 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,628 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,629 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@6e67a8c0, testMethod = updateServiceToGw@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,634 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@727956bb, testMethod = getRouteRuleNameWithServiceSubset@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,636 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,636 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,637 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,637 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:61*/select * from apigw_envoy_route_rule_proxy where service_id=? {1: 37};
2021-07-06 11:37:26,637 INFO o.h.c.n.e.s.i.EnvoyServiceProxyServiceImplTest [main] tear down class .... ServiceProxyServiceImplTest
2021-07-06 11:37:26,638 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 37};
2021-07-06 11:37:26,638 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 37};
2021-07-06 11:37:26,638 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 37
2021-07-06 11:37:26,638 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 37};
2021-07-06 11:37:26,641 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,642 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,642 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1fc5c0b2 testClass = EnvoyServiceProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyServiceProxyServiceImplTest@727956bb, testMethod = getRouteRuleNameWithServiceSubset@EnvoyServiceProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@6b6fd0 testClass = EnvoyServiceProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,647 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest], using SpringBootContextLoader
2021-07-06 11:37:26,648 INFO o.s.t.c.s.AbstractContextLoader [main] Could not detect default resource locations for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2021-07-06 11:37:26,648 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest]: EnvoyRouteRuleProxyServiceImplTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2021-07-06 11:37:26,654 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration org.hango.cloud.ncegdashboard.DashboardApplication for test class org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest
2021-07-06 11:37:26,655 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2021-07-06 11:37:26,657 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3bdbf8d3, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@f2becb2, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@7482309c, org.springframework.test.context.support.DirtiesContextTestExecutionListener@f42336c, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6b3b4f37, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@3b25709e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5ec6a1b6, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@40013051, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@71f29d91, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6143b2b1, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@a63643e, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@43294e9b]
2021-07-06 11:37:26,717 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@294ebe11, testMethod = checkUpdateEnableState@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,719 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,720 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,721 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,727 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:3*/select * from apigw_gportal_service where id=? {1: 38};
2021-07-06 11:37:26,729 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 38, 2: 'DYNAMIC-38', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646727, 9: 1625542646727, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:26,729 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,729 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=38,code=DYNAMIC-38,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646727,updateTime=1625542646727,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,731 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646731, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 38};
2021-07-06 11:37:26,734 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 38, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542646732, 13: 1625542646732, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:26,734 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,736 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,38,testRouteUnit,3,0,1625542646732,1625542646732,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,748 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1 t:5*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542646738, 6: 1625542646738};
2021-07-06 11:37:26,749 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,750 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542646738,updateTime=1625542646738]
2021-07-06 11:37:26,754 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 13};
2021-07-06 11:37:26,756 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 38};
2021-07-06 11:37:26,793 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1 t:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 13, 2: 2, 3: '[{\"port\":80,\"serviceId\":38,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 38, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:26,793 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,794 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,13,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@4641f66c],[{"port":80,"serviceId":38,"subsetName":"testSubset","weight":100}],38,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,795 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:91 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? {1: 13, 2: 2};
2021-07-06 11:37:26,799 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,800 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,800 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 38};
2021-07-06 11:37:26,800 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,800 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,801 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 38};
2021-07-06 11:37:26,801 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 38, 2: 2};
2021-07-06 11:37:26,801 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 38, 2: 2};
2021-07-06 11:37:26,802 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 38};
2021-07-06 11:37:26,802 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=17,serviceId=38,code=DYNAMIC-38,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646727,updateTime=1625542646727,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,802 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 17};
2021-07-06 11:37:26,803 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 38};
2021-07-06 11:37:26,803 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 38};
2021-07-06 11:37:26,804 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646804, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 38};
2021-07-06 11:37:26,805 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 38, 2: 2};
2021-07-06 11:37:26,805 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 38};
2021-07-06 11:37:26,805 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 38};
2021-07-06 11:37:26,805 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 38
2021-07-06 11:37:26,806 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 38};
2021-07-06 11:37:26,806 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 13};
2021-07-06 11:37:26,806 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 13,38,testRouteUnit,3,0,1625542646732,1625542646732,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,807 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 13};
2021-07-06 11:37:26,815 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:26,815 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,816 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@294ebe11, testMethod = checkUpdateEnableState@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,825 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@4f2fdf3d, testMethod = checkUpdateParam@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,827 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,828 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,828 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,829 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 39};
2021-07-06 11:37:26,829 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 39, 2: 'DYNAMIC-39', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646829, 9: 1625542646829, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:26,830 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,830 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=39,code=DYNAMIC-39,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646829,updateTime=1625542646829,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,831 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646830, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 39};
2021-07-06 11:37:26,831 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 39, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542646831, 13: 1625542646831, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:26,832 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,832 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,39,testRouteUnit,3,0,1625542646831,1625542646831,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,833 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542646833, 6: 1625542646833};
2021-07-06 11:37:26,833 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,834 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542646833,updateTime=1625542646833]
2021-07-06 11:37:26,835 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,836 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,837 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 14};
2021-07-06 11:37:26,837 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 3};
2021-07-06 11:37:26,837 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,838 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,838 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 39};
2021-07-06 11:37:26,838 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,838 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,839 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 39};
2021-07-06 11:37:26,841 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 39, 2: 2};
2021-07-06 11:37:26,843 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 39, 2: 2};
2021-07-06 11:37:26,845 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 39};
2021-07-06 11:37:26,845 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=18,serviceId=39,code=DYNAMIC-39,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646829,updateTime=1625542646829,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,845 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 18};
2021-07-06 11:37:26,846 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 39};
2021-07-06 11:37:26,846 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 39};
2021-07-06 11:37:26,847 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646846, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 39};
2021-07-06 11:37:26,847 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 39, 2: 2};
2021-07-06 11:37:26,847 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 39};
2021-07-06 11:37:26,847 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 39};
2021-07-06 11:37:26,847 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 39
2021-07-06 11:37:26,848 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 39};
2021-07-06 11:37:26,848 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 14};
2021-07-06 11:37:26,848 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 14,39,testRouteUnit,3,0,1625542646831,1625542646831,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,849 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 14};
2021-07-06 11:37:26,853 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:26,853 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,853 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@4f2fdf3d, testMethod = checkUpdateParam@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,857 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@eebc0db, testMethod = publishRouteRule@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,859 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,859 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,859 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,860 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 40};
2021-07-06 11:37:26,860 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 40, 2: 'DYNAMIC-40', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646860, 9: 1625542646860, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:26,860 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,861 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=40,code=DYNAMIC-40,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646860,updateTime=1625542646860,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,861 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646861, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 40};
2021-07-06 11:37:26,862 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 40, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542646861, 13: 1625542646861, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:26,862 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,862 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,40,testRouteUnit,3,0,1625542646861,1625542646861,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,862 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542646862, 6: 1625542646862};
2021-07-06 11:37:26,863 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,863 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542646862,updateTime=1625542646862]
2021-07-06 11:37:26,863 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 15};
2021-07-06 11:37:26,866 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 40};
2021-07-06 11:37:26,867 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 15};
2021-07-06 11:37:26,868 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 3};
2021-07-06 11:37:26,868 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 15, 2: 2, 3: '[{\"port\":80,\"serviceId\":40,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 40, 5: 50, 6: 50400665, 7: 'enable', 8: 1625542646868, 9: 1625542646868, 10: 3, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:26,868 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,869 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,15,1625542646868,1625542646868,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@1b465fa9],[{"port":80,"serviceId":40,"subsetName":"testSubset","weight":100}],40,3,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,869 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 15};
2021-07-06 11:37:26,869 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] update envoyRouteRuleInfo: 15,40,testRouteUnit,3,1,1625542646861,1625542646869,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,869 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:238 #:1*/update apigw_envoy_route_rule set route_rule_name=?, uri=?, method=?, host=?, header=?, query_param=?, priority=?, orders=?, project_id=?, publish_status=?,  update_time=?, description=?, header_operation=?, route_rule_source=? where id=? {1: 'testRouteUnit', 2: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 3: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 4: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 5: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 6: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 7: 50, 8: 50400665, 9: 3, 10: 1, 11: 1625542646869, 12: 'desc', 13: NULL, 14: 'Gateway', 15: 15};
2021-07-06 11:37:26,870 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:91 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? {1: 15, 2: 2};
2021-07-06 11:37:26,870 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,871 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,871 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 15};
2021-07-06 11:37:26,871 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 40};
2021-07-06 11:37:26,872 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 40};
2021-07-06 11:37:26,878 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:91 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? {1: 15, 2: 2};
2021-07-06 11:37:26,880 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:121*/select * from apigw_envoy_plugin_binding where  1 = 1 and binding_object_id = ? and binding_object_type = ? and gw_id = ? {1: '15', 2: 'routeRule', 3: 2};
2021-07-06 11:37:26,881 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] delete envoyRouteRuleProxyInfo: 2,2,15,1625542646868,1625542646868,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@4331be30],[{"port":80,"serviceId":40,"subsetName":"testSubset","weight":100}],40,3,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,881 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/delete from apigw_envoy_route_rule_proxy where id=? {1: 2};
2021-07-06 11:37:26,882 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:77*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? {1: 15};
2021-07-06 11:37:26,883 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 15};
2021-07-06 11:37:26,883 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 15};
2021-07-06 11:37:26,884 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] update envoyRouteRuleInfo: 15,40,testRouteUnit,3,0,1625542646861,1625542646884,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,884 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:238 #:1*/update apigw_envoy_route_rule set route_rule_name=?, uri=?, method=?, host=?, header=?, query_param=?, priority=?, orders=?, project_id=?, publish_status=?,  update_time=?, description=?, header_operation=?, route_rule_source=? where id=? {1: 'testRouteUnit', 2: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 3: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 4: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 5: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 6: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 7: 50, 8: 50400665, 9: 3, 10: 0, 11: 1625542646884, 12: 'desc', 13: NULL, 14: 'Gateway', 15: 15};
2021-07-06 11:37:26,885 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,885 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,886 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 40};
2021-07-06 11:37:26,886 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,887 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,887 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 40};
2021-07-06 11:37:26,888 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 40, 2: 2};
2021-07-06 11:37:26,888 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 40, 2: 2};
2021-07-06 11:37:26,888 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 40};
2021-07-06 11:37:26,889 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=19,serviceId=40,code=DYNAMIC-40,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646860,updateTime=1625542646860,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,889 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 19};
2021-07-06 11:37:26,890 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 40};
2021-07-06 11:37:26,890 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 40};
2021-07-06 11:37:26,891 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646890, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 40};
2021-07-06 11:37:26,891 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 40, 2: 2};
2021-07-06 11:37:26,892 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 40};
2021-07-06 11:37:26,892 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 40};
2021-07-06 11:37:26,892 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 40
2021-07-06 11:37:26,893 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 40};
2021-07-06 11:37:26,893 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 15};
2021-07-06 11:37:26,893 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 15,40,testRouteUnit,3,0,1625542646861,1625542646884,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,895 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1 t:1*/delete from apigw_envoy_route_rule where id=? {1: 15};
2021-07-06 11:37:26,898 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:26,898 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,899 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@eebc0db, testMethod = publishRouteRule@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,904 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@23e9dd78, testMethod = fromMeta@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,906 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,906 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,907 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,908 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 41};
2021-07-06 11:37:26,908 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 41, 2: 'DYNAMIC-41', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646908, 9: 1625542646908, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:26,908 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,909 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=41,code=DYNAMIC-41,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646908,updateTime=1625542646908,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,914 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1 t:3*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646910, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 41};
2021-07-06 11:37:26,916 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 41, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542646916, 13: 1625542646916, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:26,918 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1 t:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,920 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,41,testRouteUnit,3,0,1625542646916,1625542646916,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,921 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542646920, 6: 1625542646920};
2021-07-06 11:37:26,921 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,921 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542646920,updateTime=1625542646920]
2021-07-06 11:37:26,926 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 16};
2021-07-06 11:37:26,927 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 41};
2021-07-06 11:37:26,928 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 16, 2: 2, 3: '[{\"port\":80,\"serviceId\":41,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 41, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:26,929 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,929 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,16,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@628bd77e],[{"port":80,"serviceId":41,"subsetName":"testSubset","weight":100}],41,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,930 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:91 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? {1: 16, 2: 2};
2021-07-06 11:37:26,931 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,931 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,932 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 16};
2021-07-06 11:37:26,933 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 41};
2021-07-06 11:37:26,933 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 41};
2021-07-06 11:37:26,935 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,935 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,935 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 41};
2021-07-06 11:37:26,936 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,936 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,936 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 41};
2021-07-06 11:37:26,937 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 41, 2: 2};
2021-07-06 11:37:26,937 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 41, 2: 2};
2021-07-06 11:37:26,938 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 41};
2021-07-06 11:37:26,938 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=20,serviceId=41,code=DYNAMIC-41,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646908,updateTime=1625542646908,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,941 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 20};
2021-07-06 11:37:26,941 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 41};
2021-07-06 11:37:26,941 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 41};
2021-07-06 11:37:26,942 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646941, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 41};
2021-07-06 11:37:26,942 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 41, 2: 2};
2021-07-06 11:37:26,942 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 41};
2021-07-06 11:37:26,942 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 41};
2021-07-06 11:37:26,943 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 41
2021-07-06 11:37:26,943 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 41};
2021-07-06 11:37:26,943 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 16};
2021-07-06 11:37:26,944 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 16,41,testRouteUnit,3,0,1625542646916,1625542646916,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,945 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 16};
2021-07-06 11:37:26,948 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:26,948 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:26,948 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@23e9dd78, testMethod = fromMeta@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:26,955 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@6b86826a, testMethod = addRouteRuleProxy@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:26,958 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:26,958 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,960 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:26,961 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 42};
2021-07-06 11:37:26,963 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1 t:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 42, 2: 'DYNAMIC-42', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542646961, 9: 1625542646961, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:26,967 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1 t:3*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,967 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=42,code=DYNAMIC-42,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646961,updateTime=1625542646961,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,969 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646968, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 42};
2021-07-06 11:37:26,970 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 42, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542646969, 13: 1625542646969, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:26,971 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,971 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,42,testRouteUnit,3,0,1625542646969,1625542646969,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,972 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542646971, 6: 1625542646971};
2021-07-06 11:37:26,972 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,972 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542646971,updateTime=1625542646971]
2021-07-06 11:37:26,974 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 17};
2021-07-06 11:37:26,976 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 42};
2021-07-06 11:37:26,980 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 17, 2: 2, 3: '[{\"port\":80,\"serviceId\":42,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 42, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:26,981 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:26,981 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,17,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@41bdaa81],[{"port":80,"serviceId":42,"subsetName":"testSubset","weight":100}],42,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,982 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,982 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,982 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 42};
2021-07-06 11:37:26,983 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:26,983 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:26,983 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 42};
2021-07-06 11:37:26,983 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 42, 2: 2};
2021-07-06 11:37:26,984 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 42, 2: 2};
2021-07-06 11:37:26,984 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 42};
2021-07-06 11:37:26,984 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=21,serviceId=42,code=DYNAMIC-42,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542646961,updateTime=1625542646961,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:26,985 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 21};
2021-07-06 11:37:26,985 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 42};
2021-07-06 11:37:26,985 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 42};
2021-07-06 11:37:26,986 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542646985, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 42};
2021-07-06 11:37:26,986 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 42, 2: 2};
2021-07-06 11:37:26,986 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 42};
2021-07-06 11:37:26,987 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 42};
2021-07-06 11:37:26,987 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 42
2021-07-06 11:37:26,988 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 42};
2021-07-06 11:37:26,988 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 17};
2021-07-06 11:37:26,989 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 17,42,testRouteUnit,3,0,1625542646969,1625542646969,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:26,989 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 17};
2021-07-06 11:37:26,997 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:5*/ROLLBACK;
2021-07-06 11:37:26,998 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,000 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@6b86826a, testMethod = addRouteRuleProxy@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,003 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@5814b4fb, testMethod = checkPublishParam@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,010 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,011 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,013 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,016 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 43};
2021-07-06 11:37:27,017 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 43, 2: 'DYNAMIC-43', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647016, 9: 1625542647016, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,017 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,017 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=43,code=DYNAMIC-43,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647016,updateTime=1625542647016,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,018 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647018, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 43};
2021-07-06 11:37:27,019 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 43, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647018, 13: 1625542647018, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,020 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,020 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,43,testRouteUnit,3,0,1625542647018,1625542647018,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,020 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647020, 6: 1625542647020};
2021-07-06 11:37:27,020 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,021 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647020,updateTime=1625542647020]
2021-07-06 11:37:27,021 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 18};
2021-07-06 11:37:27,025 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,026 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,030 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:117 #:1 t:1*/select count(*) from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? and project_id = ? {1: 18, 2: 2, 3: 0};
2021-07-06 11:37:27,031 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 43};
2021-07-06 11:37:27,031 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 18};
2021-07-06 11:37:27,032 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 3};
2021-07-06 11:37:27,036 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 18};
2021-07-06 11:37:27,036 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,037 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,037 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:117 #:1*/select count(*) from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? and project_id = ? {1: 18, 2: 2, 3: 0};
2021-07-06 11:37:27,037 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 43};
2021-07-06 11:37:27,037 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 18};
2021-07-06 11:37:27,037 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 3};
2021-07-06 11:37:27,038 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,038 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,038 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 43};
2021-07-06 11:37:27,038 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,038 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,043 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 43};
2021-07-06 11:37:27,047 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 43, 2: 2};
2021-07-06 11:37:27,047 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 43, 2: 2};
2021-07-06 11:37:27,049 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 43};
2021-07-06 11:37:27,050 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=22,serviceId=43,code=DYNAMIC-43,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647016,updateTime=1625542647016,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,051 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 22};
2021-07-06 11:37:27,053 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 43};
2021-07-06 11:37:27,053 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 43};
2021-07-06 11:37:27,056 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647054, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 43};
2021-07-06 11:37:27,056 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 43, 2: 2};
2021-07-06 11:37:27,056 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 43};
2021-07-06 11:37:27,058 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 43};
2021-07-06 11:37:27,059 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 43
2021-07-06 11:37:27,059 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 43};
2021-07-06 11:37:27,060 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 18};
2021-07-06 11:37:27,061 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 18,43,testRouteUnit,3,0,1625542647018,1625542647018,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,062 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 18};
2021-07-06 11:37:27,064 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:27,064 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,064 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@5814b4fb, testMethod = checkPublishParam@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,070 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@63f3366a, testMethod = getRouteRuleProxyList@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,073 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,073 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,074 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,076 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 44};
2021-07-06 11:37:27,077 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 44, 2: 'DYNAMIC-44', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647076, 9: 1625542647076, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,077 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,078 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=44,code=DYNAMIC-44,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647076,updateTime=1625542647076,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,078 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647078, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 44};
2021-07-06 11:37:27,079 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 44, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647078, 13: 1625542647078, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,079 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,079 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,44,testRouteUnit,3,0,1625542647078,1625542647078,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,080 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647079, 6: 1625542647079};
2021-07-06 11:37:27,080 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,080 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647079,updateTime=1625542647079]
2021-07-06 11:37:27,081 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 19};
2021-07-06 11:37:27,081 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 44};
2021-07-06 11:37:27,085 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 19, 2: 2, 3: '[{\"port\":80,\"serviceId\":44,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 44, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:27,085 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,086 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,19,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@735988cf],[{"port":80,"serviceId":44,"subsetName":"testSubset","weight":100}],44,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,086 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:61 #:1*/select * from apigw_envoy_route_rule_proxy where service_id=? {1: 44};
2021-07-06 11:37:27,087 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,087 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,088 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 44};
2021-07-06 11:37:27,088 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,088 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,088 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 44};
2021-07-06 11:37:27,089 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 44, 2: 2};
2021-07-06 11:37:27,089 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 44, 2: 2};
2021-07-06 11:37:27,089 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 44};
2021-07-06 11:37:27,090 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=23,serviceId=44,code=DYNAMIC-44,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647076,updateTime=1625542647076,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,090 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 23};
2021-07-06 11:37:27,090 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 44};
2021-07-06 11:37:27,090 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 44};
2021-07-06 11:37:27,090 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647090, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 44};
2021-07-06 11:37:27,091 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 44, 2: 2};
2021-07-06 11:37:27,091 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 44};
2021-07-06 11:37:27,091 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 44};
2021-07-06 11:37:27,091 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 44
2021-07-06 11:37:27,093 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60 t:1*/delete from apigw_envoy_health_check_rule where service_id=? {1: 44};
2021-07-06 11:37:27,094 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 19};
2021-07-06 11:37:27,095 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 19,44,testRouteUnit,3,0,1625542647078,1625542647078,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,095 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 19};
2021-07-06 11:37:27,098 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:27,099 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,099 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@63f3366a, testMethod = getRouteRuleProxyList@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,110 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT 1;
2021-07-06 11:37:27,112 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@35cbeb54, testMethod = publishRouteRuleBatch@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,117 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:2*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,118 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,119 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,120 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 45};
2021-07-06 11:37:27,121 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 45, 2: 'DYNAMIC-45', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647120, 9: 1625542647120, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,121 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,122 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=45,code=DYNAMIC-45,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647120,updateTime=1625542647120,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,123 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647122, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 45};
2021-07-06 11:37:27,125 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 45, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647124, 13: 1625542647124, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,125 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,126 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,45,testRouteUnit,3,0,1625542647124,1625542647124,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,128 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647126, 6: 1625542647126};
2021-07-06 11:37:27,128 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,129 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647126,updateTime=1625542647126]
2021-07-06 11:37:27,131 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 20};
2021-07-06 11:37:27,132 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 45};
2021-07-06 11:37:27,134 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 20};
2021-07-06 11:37:27,137 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 3};
2021-07-06 11:37:27,142 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1 t:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 20, 2: 2, 3: '[{\"port\":80,\"serviceId\":45,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 45, 5: 50, 6: 50400665, 7: 'enable', 8: 1625542647140, 9: 1625542647140, 10: 3, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:27,143 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,144 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,20,1625542647140,1625542647140,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@614cd187],[{"port":80,"serviceId":45,"subsetName":"testSubset","weight":100}],45,3,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,144 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 20};
2021-07-06 11:37:27,145 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] update envoyRouteRuleInfo: 20,45,testRouteUnit,3,1,1625542647124,1625542647145,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,146 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:238 #:1*/update apigw_envoy_route_rule set route_rule_name=?, uri=?, method=?, host=?, header=?, query_param=?, priority=?, orders=?, project_id=?, publish_status=?,  update_time=?, description=?, header_operation=?, route_rule_source=? where id=? {1: 'testRouteUnit', 2: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 3: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 4: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 5: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 6: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 7: 50, 8: 50400665, 9: 3, 10: 1, 11: 1625542647145, 12: 'desc', 13: NULL, 14: 'Gateway', 15: 20};
2021-07-06 11:37:27,147 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:91 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? {1: 20, 2: 2};
2021-07-06 11:37:27,147 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:121*/select * from apigw_envoy_plugin_binding where  1 = 1 and binding_object_id = ? and binding_object_type = ? and gw_id = ? {1: '20', 2: 'routeRule', 3: 2};
2021-07-06 11:37:27,148 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] delete envoyRouteRuleProxyInfo: 6,2,20,1625542647140,1625542647140,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@2ce24a1a],[{"port":80,"serviceId":45,"subsetName":"testSubset","weight":100}],45,3,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,148 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/delete from apigw_envoy_route_rule_proxy where id=? {1: 6};
2021-07-06 11:37:27,148 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:77*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? {1: 20};
2021-07-06 11:37:27,148 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 20};
2021-07-06 11:37:27,149 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 20};
2021-07-06 11:37:27,149 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] update envoyRouteRuleInfo: 20,45,testRouteUnit,3,0,1625542647124,1625542647149,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,150 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:238 #:1*/update apigw_envoy_route_rule set route_rule_name=?, uri=?, method=?, host=?, header=?, query_param=?, priority=?, orders=?, project_id=?, publish_status=?,  update_time=?, description=?, header_operation=?, route_rule_source=? where id=? {1: 'testRouteUnit', 2: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 3: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 4: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 5: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 6: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 7: 50, 8: 50400665, 9: 3, 10: 0, 11: 1625542647149, 12: 'desc', 13: NULL, 14: 'Gateway', 15: 20};
2021-07-06 11:37:27,150 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,150 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,151 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 45};
2021-07-06 11:37:27,151 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,151 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,152 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 45};
2021-07-06 11:37:27,153 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 45, 2: 2};
2021-07-06 11:37:27,153 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 45, 2: 2};
2021-07-06 11:37:27,153 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 45};
2021-07-06 11:37:27,153 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=24,serviceId=45,code=DYNAMIC-45,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647120,updateTime=1625542647120,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,154 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 24};
2021-07-06 11:37:27,154 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 45};
2021-07-06 11:37:27,154 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 45};
2021-07-06 11:37:27,155 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647154, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 45};
2021-07-06 11:37:27,155 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 45, 2: 2};
2021-07-06 11:37:27,155 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 45};
2021-07-06 11:37:27,155 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 45};
2021-07-06 11:37:27,156 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 45
2021-07-06 11:37:27,156 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 45};
2021-07-06 11:37:27,158 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 20};
2021-07-06 11:37:27,160 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 20,45,testRouteUnit,3,0,1625542647124,1625542647149,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,161 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 20};
2021-07-06 11:37:27,168 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:4*/ROLLBACK;
2021-07-06 11:37:27,169 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,172 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@35cbeb54, testMethod = publishRouteRuleBatch@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,181 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@3af39e7b, testMethod = getRouteRuleProxyList1@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,185 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,186 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,194 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1 t:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,199 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:1*/select * from apigw_gportal_service where id=? {1: 46};
2021-07-06 11:37:27,202 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1 t:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 46, 2: 'DYNAMIC-46', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647199, 9: 1625542647199, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,202 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,202 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=46,code=DYNAMIC-46,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647199,updateTime=1625542647199,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,205 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647203, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 46};
2021-07-06 11:37:27,207 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 46, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647206, 13: 1625542647206, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,207 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,207 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,46,testRouteUnit,3,0,1625542647206,1625542647206,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,208 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647208, 6: 1625542647208};
2021-07-06 11:37:27,209 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,209 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647208,updateTime=1625542647208]
2021-07-06 11:37:27,210 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 21};
2021-07-06 11:37:27,212 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 46};
2021-07-06 11:37:27,214 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 21, 2: 2, 3: '[{\"port\":80,\"serviceId\":46,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 46, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:27,214 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,214 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,21,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@7612116b],[{"port":80,"serviceId":46,"subsetName":"testSubset","weight":100}],46,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,219 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:116 #:1 t:1*/select * from apigw_envoy_route_rule_proxy where service_id=? and gw_id=? order by create_time desc limit ? offset ? {1: 46, 2: 2, 3: 100, 4: 0};
2021-07-06 11:37:27,221 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,222 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,223 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 46};
2021-07-06 11:37:27,223 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,224 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,224 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 46};
2021-07-06 11:37:27,225 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 46, 2: 2};
2021-07-06 11:37:27,225 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 46, 2: 2};
2021-07-06 11:37:27,226 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 46};
2021-07-06 11:37:27,227 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=25,serviceId=46,code=DYNAMIC-46,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647199,updateTime=1625542647199,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,228 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 25};
2021-07-06 11:37:27,228 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 46};
2021-07-06 11:37:27,228 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 46};
2021-07-06 11:37:27,230 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647229, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 46};
2021-07-06 11:37:27,230 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 46, 2: 2};
2021-07-06 11:37:27,230 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 46};
2021-07-06 11:37:27,231 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 46};
2021-07-06 11:37:27,231 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 46
2021-07-06 11:37:27,232 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 46};
2021-07-06 11:37:27,232 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 21};
2021-07-06 11:37:27,234 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 21,46,testRouteUnit,3,0,1625542647206,1625542647206,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,235 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 21};
2021-07-06 11:37:27,243 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:3*/ROLLBACK;
2021-07-06 11:37:27,244 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,245 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@3af39e7b, testMethod = getRouteRuleProxyList1@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,253 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@612ac38b, testMethod = deleteRouteRuleProxy@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,255 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,255 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,256 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,257 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 47};
2021-07-06 11:37:27,258 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 47, 2: 'DYNAMIC-47', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647257, 9: 1625542647257, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,258 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,258 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=47,code=DYNAMIC-47,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647257,updateTime=1625542647257,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,258 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647258, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 47};
2021-07-06 11:37:27,259 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 47, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647259, 13: 1625542647259, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,259 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,260 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,47,testRouteUnit,3,0,1625542647259,1625542647259,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,260 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647260, 6: 1625542647260};
2021-07-06 11:37:27,260 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,260 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647260,updateTime=1625542647260]
2021-07-06 11:37:27,261 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 22};
2021-07-06 11:37:27,261 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 47};
2021-07-06 11:37:27,271 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1 t:4*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 22, 2: 2, 3: '[{\"port\":80,\"serviceId\":47,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 47, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:27,272 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,272 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,22,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@286dfa20],[{"port":80,"serviceId":47,"subsetName":"testSubset","weight":100}],47,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,273 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:91 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? {1: 22, 2: 2};
2021-07-06 11:37:27,274 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:121*/select * from apigw_envoy_plugin_binding where  1 = 1 and binding_object_id = ? and binding_object_type = ? and gw_id = ? {1: '22', 2: 'routeRule', 3: 2};
2021-07-06 11:37:27,274 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] delete envoyRouteRuleProxyInfo: 8,2,22,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@3cb173db],[{"port":80,"serviceId":47,"subsetName":"testSubset","weight":100}],47,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,274 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/delete from apigw_envoy_route_rule_proxy where id=? {1: 8};
2021-07-06 11:37:27,275 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:77*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? {1: 22};
2021-07-06 11:37:27,275 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 22};
2021-07-06 11:37:27,275 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 22};
2021-07-06 11:37:27,276 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] update envoyRouteRuleInfo: 22,47,testRouteUnit,3,0,1625542647259,1625542647275,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,276 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:238 #:1*/update apigw_envoy_route_rule set route_rule_name=?, uri=?, method=?, host=?, header=?, query_param=?, priority=?, orders=?, project_id=?, publish_status=?,  update_time=?, description=?, header_operation=?, route_rule_source=? where id=? {1: 'testRouteUnit', 2: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 3: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 4: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 5: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 6: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 7: 50, 8: 50400665, 9: 3, 10: 0, 11: 1625542647275, 12: 'desc', 13: NULL, 14: 'Gateway', 15: 22};
2021-07-06 11:37:27,277 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,277 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,277 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 47};
2021-07-06 11:37:27,278 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,278 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,279 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 47};
2021-07-06 11:37:27,279 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 47, 2: 2};
2021-07-06 11:37:27,279 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 47, 2: 2};
2021-07-06 11:37:27,280 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 47};
2021-07-06 11:37:27,280 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=26,serviceId=47,code=DYNAMIC-47,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647257,updateTime=1625542647257,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,280 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 26};
2021-07-06 11:37:27,280 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 47};
2021-07-06 11:37:27,280 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 47};
2021-07-06 11:37:27,281 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647281, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 47};
2021-07-06 11:37:27,281 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 47, 2: 2};
2021-07-06 11:37:27,282 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 47};
2021-07-06 11:37:27,282 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 47};
2021-07-06 11:37:27,283 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 47
2021-07-06 11:37:27,284 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 47};
2021-07-06 11:37:27,284 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 22};
2021-07-06 11:37:27,285 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 22,47,testRouteUnit,3,0,1625542647259,1625542647275,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,286 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 22};
2021-07-06 11:37:27,292 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:27,292 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,293 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@612ac38b, testMethod = deleteRouteRuleProxy@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,306 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@7296fe0b, testMethod = checkDeleteRouteRuleProxy@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,314 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,315 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,315 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,316 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 48};
2021-07-06 11:37:27,317 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 48, 2: 'DYNAMIC-48', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647317, 9: 1625542647317, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,317 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,318 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=48,code=DYNAMIC-48,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647317,updateTime=1625542647317,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,322 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1 t:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647319, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 48};
2021-07-06 11:37:27,324 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 48, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647324, 13: 1625542647324, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,325 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,325 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,48,testRouteUnit,3,0,1625542647324,1625542647324,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,326 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647325, 6: 1625542647325};
2021-07-06 11:37:27,326 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,326 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647325,updateTime=1625542647325]
2021-07-06 11:37:27,328 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 23};
2021-07-06 11:37:27,329 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 48};
2021-07-06 11:37:27,333 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1 t:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 23, 2: 2, 3: '[{\"port\":80,\"serviceId\":48,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 48, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:27,334 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,335 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,23,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@40ddf339],[{"port":80,"serviceId":48,"subsetName":"testSubset","weight":100}],48,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,336 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:91 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? {1: 23, 2: 2};
2021-07-06 11:37:27,339 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,344 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,346 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 48};
2021-07-06 11:37:27,347 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,348 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,351 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 48};
2021-07-06 11:37:27,354 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 48, 2: 2};
2021-07-06 11:37:27,354 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 48, 2: 2};
2021-07-06 11:37:27,357 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 48};
2021-07-06 11:37:27,358 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=27,serviceId=48,code=DYNAMIC-48,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647317,updateTime=1625542647317,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,361 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 27};
2021-07-06 11:37:27,362 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 48};
2021-07-06 11:37:27,363 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 48};
2021-07-06 11:37:27,366 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647363, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 48};
2021-07-06 11:37:27,367 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 48, 2: 2};
2021-07-06 11:37:27,369 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 48};
2021-07-06 11:37:27,371 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 48};
2021-07-06 11:37:27,371 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 48
2021-07-06 11:37:27,372 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 48};
2021-07-06 11:37:27,372 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 23};
2021-07-06 11:37:27,373 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 23,48,testRouteUnit,3,0,1625542647324,1625542647324,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,373 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 23};
2021-07-06 11:37:27,388 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:8*/ROLLBACK;
2021-07-06 11:37:27,389 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,392 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@7296fe0b, testMethod = checkDeleteRouteRuleProxy@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,406 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@3749c2b, testMethod = getRouteRuleProxy@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,410 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,411 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1 t:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,417 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1 t:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,424 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 49};
2021-07-06 11:37:27,425 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 49, 2: 'DYNAMIC-49', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647425, 9: 1625542647425, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,426 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,426 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=49,code=DYNAMIC-49,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647425,updateTime=1625542647425,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,427 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647427, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 49};
2021-07-06 11:37:27,428 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 49, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647428, 13: 1625542647428, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,429 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,429 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,49,testRouteUnit,3,0,1625542647428,1625542647428,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,430 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647429, 6: 1625542647429};
2021-07-06 11:37:27,430 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,430 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647429,updateTime=1625542647429]
2021-07-06 11:37:27,430 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 24};
2021-07-06 11:37:27,433 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 49};
2021-07-06 11:37:27,435 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 24, 2: 2, 3: '[{\"port\":80,\"serviceId\":49,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 49, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:27,435 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,436 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,24,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@5c9e3d01],[{"port":80,"serviceId":49,"subsetName":"testSubset","weight":100}],49,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,437 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:91 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? {1: 24, 2: 2};
2021-07-06 11:37:27,437 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,438 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,438 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 49};
2021-07-06 11:37:27,438 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,438 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,439 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 49};
2021-07-06 11:37:27,439 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 49, 2: 2};
2021-07-06 11:37:27,439 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 49, 2: 2};
2021-07-06 11:37:27,439 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 49};
2021-07-06 11:37:27,440 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=28,serviceId=49,code=DYNAMIC-49,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647425,updateTime=1625542647425,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,440 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 28};
2021-07-06 11:37:27,440 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 49};
2021-07-06 11:37:27,440 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 49};
2021-07-06 11:37:27,440 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647440, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 49};
2021-07-06 11:37:27,441 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 49, 2: 2};
2021-07-06 11:37:27,441 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 49};
2021-07-06 11:37:27,441 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 49};
2021-07-06 11:37:27,441 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 49
2021-07-06 11:37:27,441 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 49};
2021-07-06 11:37:27,442 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 24};
2021-07-06 11:37:27,442 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 24,49,testRouteUnit,3,0,1625542647428,1625542647428,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,442 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 24};
2021-07-06 11:37:27,445 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:27,445 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,445 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@3749c2b, testMethod = getRouteRuleProxy@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,447 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@5e9ea380, testMethod = getRouteRuleProxyCountByService@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,449 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,449 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,450 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,450 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 50};
2021-07-06 11:37:27,450 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 50, 2: 'DYNAMIC-50', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647450, 9: 1625542647450, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,451 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,451 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=50,code=DYNAMIC-50,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647450,updateTime=1625542647450,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,452 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647452, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 50};
2021-07-06 11:37:27,454 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 50, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647453, 13: 1625542647453, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,454 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,454 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,50,testRouteUnit,3,0,1625542647453,1625542647453,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,455 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647455, 6: 1625542647455};
2021-07-06 11:37:27,455 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,455 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647455,updateTime=1625542647455]
2021-07-06 11:37:27,455 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 25};
2021-07-06 11:37:27,455 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 50};
2021-07-06 11:37:27,456 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 25, 2: 2, 3: '[{\"port\":80,\"serviceId\":50,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 50, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:27,456 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,457 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,25,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@534fc1f7],[{"port":80,"serviceId":50,"subsetName":"testSubset","weight":100}],50,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,457 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:80 #:1*/select count(*) from apigw_envoy_route_rule_proxy where service_id=? and gw_id=? {1: 50, 2: 2};
2021-07-06 11:37:27,458 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,458 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,458 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 50};
2021-07-06 11:37:27,459 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,459 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,460 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 50};
2021-07-06 11:37:27,460 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 50, 2: 2};
2021-07-06 11:37:27,461 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 50, 2: 2};
2021-07-06 11:37:27,461 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 50};
2021-07-06 11:37:27,461 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=29,serviceId=50,code=DYNAMIC-50,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647450,updateTime=1625542647450,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,463 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 29};
2021-07-06 11:37:27,463 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 50};
2021-07-06 11:37:27,463 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 50};
2021-07-06 11:37:27,464 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647464, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 50};
2021-07-06 11:37:27,464 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 50, 2: 2};
2021-07-06 11:37:27,464 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 50};
2021-07-06 11:37:27,465 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 50};
2021-07-06 11:37:27,465 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 50
2021-07-06 11:37:27,465 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 50};
2021-07-06 11:37:27,466 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 25};
2021-07-06 11:37:27,466 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 25,50,testRouteUnit,3,0,1625542647453,1625542647453,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,466 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 25};
2021-07-06 11:37:27,472 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:27,472 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,473 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@5e9ea380, testMethod = getRouteRuleProxyCountByService@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,487 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@39ead1b7, testMethod = getRouteRuleProxyListByServiceId@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,489 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,489 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,489 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,490 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 51};
2021-07-06 11:37:27,490 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 51, 2: 'DYNAMIC-51', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647490, 9: 1625542647490, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,490 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,490 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=51,code=DYNAMIC-51,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647490,updateTime=1625542647490,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,491 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647491, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 51};
2021-07-06 11:37:27,493 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 51, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647492, 13: 1625542647492, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,493 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,493 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,51,testRouteUnit,3,0,1625542647492,1625542647492,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,494 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647493, 6: 1625542647493};
2021-07-06 11:37:27,494 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,494 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647493,updateTime=1625542647493]
2021-07-06 11:37:27,494 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 26};
2021-07-06 11:37:27,495 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 51};
2021-07-06 11:37:27,498 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 26, 2: 2, 3: '[{\"port\":80,\"serviceId\":51,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 51, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:27,498 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,500 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,26,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@146833a2],[{"port":80,"serviceId":51,"subsetName":"testSubset","weight":100}],51,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,500 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:88 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 51};
2021-07-06 11:37:27,501 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,501 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,501 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 51};
2021-07-06 11:37:27,501 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,502 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,502 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 51};
2021-07-06 11:37:27,503 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 51, 2: 2};
2021-07-06 11:37:27,503 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 51, 2: 2};
2021-07-06 11:37:27,503 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 51};
2021-07-06 11:37:27,503 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=30,serviceId=51,code=DYNAMIC-51,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647490,updateTime=1625542647490,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,504 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 30};
2021-07-06 11:37:27,504 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 51};
2021-07-06 11:37:27,504 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 51};
2021-07-06 11:37:27,505 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647504, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 51};
2021-07-06 11:37:27,505 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 51, 2: 2};
2021-07-06 11:37:27,506 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 51};
2021-07-06 11:37:27,506 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 51};
2021-07-06 11:37:27,506 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 51
2021-07-06 11:37:27,506 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 51};
2021-07-06 11:37:27,507 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 26};
2021-07-06 11:37:27,507 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 26,51,testRouteUnit,3,0,1625542647492,1625542647492,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,507 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 26};
2021-07-06 11:37:27,510 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:27,510 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,511 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@39ead1b7, testMethod = getRouteRuleProxyListByServiceId@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,513 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@48da64f2, testMethod = updateEnableState@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,516 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,517 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,517 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,518 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 52};
2021-07-06 11:37:27,518 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 52, 2: 'DYNAMIC-52', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647518, 9: 1625542647518, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,518 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,519 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=52,code=DYNAMIC-52,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647518,updateTime=1625542647518,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,519 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647519, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 52};
2021-07-06 11:37:27,520 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 52, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647520, 13: 1625542647520, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,520 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,520 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,52,testRouteUnit,3,0,1625542647520,1625542647520,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,521 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647520, 6: 1625542647520};
2021-07-06 11:37:27,521 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,521 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647520,updateTime=1625542647520]
2021-07-06 11:37:27,521 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 27};
2021-07-06 11:37:27,522 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 52};
2021-07-06 11:37:27,525 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 27, 2: 2, 3: '[{\"port\":80,\"serviceId\":52,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 52, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:27,525 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,525 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,27,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@227b9277],[{"port":80,"serviceId":52,"subsetName":"testSubset","weight":100}],52,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,526 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:91 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? and gw_id = ? {1: 27, 2: 2};
2021-07-06 11:37:27,526 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] update envoyRouteRuleProxyInfo: 13,2,27,0,1625542647526,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@7e9a836],[{"port":80,"serviceId":52,"subsetName":"testSubset","weight":100}],52,0,disable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,526 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:242 #:1*/update apigw_envoy_route_rule_proxy set update_time=?, destination_services=?, service_id=?, enable_state=?, hosts=?, timeout=?,http_retry=?, uri=?, method=?, host=?, header=?, query_param=?, priority=?, orders=?, virtual_cluster=? where id=? {1: 1625542647526, 2: '[{\"port\":80,\"serviceId\":52,\"subsetName\":\"testSubset\",\"weight\":100}]', 3: 52, 4: 'disable', 5: NULL, 6: 60000, 7: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 8: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 9: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 10: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 11: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 12: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 13: 50, 14: 50400665, 15: NULL, 16: 13};
2021-07-06 11:37:27,526 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,527 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,527 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 52};
2021-07-06 11:37:27,527 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,527 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,527 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 52};
2021-07-06 11:37:27,528 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 52, 2: 2};
2021-07-06 11:37:27,528 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 52, 2: 2};
2021-07-06 11:37:27,528 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 52};
2021-07-06 11:37:27,528 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=31,serviceId=52,code=DYNAMIC-52,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647518,updateTime=1625542647518,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,529 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 31};
2021-07-06 11:37:27,529 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 52};
2021-07-06 11:37:27,529 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 52};
2021-07-06 11:37:27,530 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647529, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 52};
2021-07-06 11:37:27,530 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 52, 2: 2};
2021-07-06 11:37:27,530 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 52};
2021-07-06 11:37:27,531 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 52};
2021-07-06 11:37:27,531 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 52
2021-07-06 11:37:27,531 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 52};
2021-07-06 11:37:27,532 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 27};
2021-07-06 11:37:27,532 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 27,52,testRouteUnit,3,0,1625542647520,1625542647520,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,532 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 27};
2021-07-06 11:37:27,536 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:27,536 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,536 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@48da64f2, testMethod = updateEnableState@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,541 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@70ce2fb2, testMethod = getRouteRuleProxyByRouteRuleId@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:27,543 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:27,544 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,556 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'envoy'};
2021-07-06 11:37:27,559 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 53};
2021-07-06 11:37:27,561 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:285 #:1*/insert into apigw_envoy_service_proxy (service_id, code, publish_protocol, backend_service, publish_type, gw_id, project_id, create_time, update_time, load_balancer, subsets, registry_center_addr, registry_center_type, traffic_policy)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 53, 2: 'DYNAMIC-53', 3: 'http', 4: 'a.pilot-test.svc.cluster.local', 5: 'DYNAMIC', 6: 2, 7: 3, 8: 1625542647560, 9: 1625542647560, 10: 'ROUND_ROBIN', 11: '[{\"Labels\":{\"aaa\":\"bbb\"},\"Name\":\"testSubset\"}]', 12: NULL, 13: 'Kubernetes', 14: NULL};
2021-07-06 11:37:27,561 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,561 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] add EnvoyServiceProxyInfo: EnvoyServiceProxyInfo[id=0,serviceId=53,code=DYNAMIC-53,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647560,updateTime=1625542647560,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,563 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647562, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 1, 7: NULL, 8: 0, 9: 0, 10: 53};
2021-07-06 11:37:27,565 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:280 #:1*/insert into apigw_envoy_route_rule (service_id, route_rule_name, uri, method, host, header, query_param, priority, orders, project_id, publish_status, create_time, update_time,description,header_operation,route_rule_source)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 53, 2: 'testRouteUnit', 3: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 4: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 5: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 6: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 7: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 8: 50, 9: 50400665, 10: 3, 11: 0, 12: 1625542647564, 13: 1625542647564, 14: 'desc', 15: NULL, 16: 'Gateway'};
2021-07-06 11:37:27,566 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,566 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] add envoyRouteRuleInfo: 0,53,testRouteUnit,3,0,1625542647564,1625542647564,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,567 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 3, 2: 2, 3: NULL, 4: 'hango-3-2', 5: 1625542647566, 6: 1625542647566};
2021-07-06 11:37:27,567 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,567 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=3,gwId=2,hosts=<null>,hostList=[abc.com],virtualHostCode=hango-3-2,createTime=1625542647566,updateTime=1625542647566]
2021-07-06 11:37:27,569 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 28};
2021-07-06 11:37:27,570 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 53};
2021-07-06 11:37:27,572 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:318 #:1*/insert into apigw_envoy_route_rule_proxy (route_rule_id, gw_id, destination_services, service_id, priority, orders, enable_state, create_time, update_time, project_id, hosts, timeout, http_retry, uri, method, host, header, query_param, virtual_cluster)  values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) {1: 28, 2: 2, 3: '[{\"port\":80,\"serviceId\":53,\"subsetName\":\"testSubset\",\"weight\":100}]', 4: 53, 5: 50, 6: 50400665, 7: 'enable', 8: 0, 9: 0, 10: 0, 11: NULL, 12: 60000, 13: '{\"Attempts\":2,\"IsRetry\":false,\"PerTryTimeout\":60000,\"RetryOn\":\"5xx\"}', 14: '{\"type\":\"exact\",\"value\":[\"/abc\"]}', 15: '{\"type\":\"exact\",\"value\":[\"GET\"]}', 16: '{\"type\":\"exact\",\"value\":[\"abc.com\"]}', 17: '[{\"key\":\"abc\",\"type\":\"exact\",\"value\":[\"abc\"]}]', 18: '[{\"key\":\"aaa\",\"type\":\"exact\",\"value\":[\"caa\"]}]', 19: NULL};
2021-07-06 11:37:27,572 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:27,576 INFO o.h.c.n.e.d.i.EnvoyRouteRuleProxyDaoImpl [main] add envoyRouteRuleProxyInfo: 0,2,28,0,0,[org.hango.cloud.ncegdashboard.envoy.meta.EnvoyDestinationInfo@291cbe70],[{"port":80,"serviceId":53,"subsetName":"testSubset","weight":100}],53,0,enable,<null>,HttpRetryDto[retry=false,attempts=2,perTryTimeout=60000,retryOn=5xx],{"Attempts":2,"IsRetry":false,"PerTryTimeout":60000,"RetryOn":"5xx"},60000,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,582 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:77 #:1*/select * from apigw_envoy_route_rule_proxy where  1 = 1 and route_rule_id = ? {1: 28};
2021-07-06 11:37:27,584 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,585 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,585 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:85 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and gw_id = ? and service_id = ? {1: 2, 2: 53};
2021-07-06 11:37:27,585 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 2};
2021-07-06 11:37:27,585 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 2, 2: 1};
2021-07-06 11:37:27,585 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 53};
2021-07-06 11:37:27,586 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 53, 2: 2};
2021-07-06 11:37:27,586 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 53, 2: 2};
2021-07-06 11:37:27,586 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:130 #:1*/select * from apigw_envoy_service_proxy where  1 = 1 and publish_type = ? and backend_service = ? and gw_id = ? and service_id = ? {1: 'DYNAMIC', 2: 'a.pilot-test.svc.cluster.local', 3: 2, 4: 53};
2021-07-06 11:37:27,587 INFO o.h.c.n.e.d.i.EnvoyServiceProxyDaoImpl [main] delete EnvoyServiceInfo: EnvoyServiceProxyInfo[id=32,serviceId=53,code=DYNAMIC-53,backendService=a.pilot-test.svc.cluster.local,publishProtocol=http,publishType=DYNAMIC,registryCenterType=Kubernetes,registryCenterAddr=<null>,gwId=2,createTime=1625542647560,updateTime=1625542647560,projectId=3,loadBalancer=ROUND_ROBIN,trafficPolicy=<null>,subsets=[{"Labels":{"aaa":"bbb"},"Name":"testSubset"}]]
2021-07-06 11:37:27,587 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:48 #:1*/delete from apigw_envoy_service_proxy where id=? {1: 32};
2021-07-06 11:37:27,588 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_envoy_service_proxy where  1 = 1 and service_id = ? {1: 53};
2021-07-06 11:37:27,588 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 53};
2021-07-06 11:37:27,589 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:186 #:1*/update apigw_gportal_service set modify_date = ?, display_name = ?, service_name=?, contacts=?, description=?, status=?, health_interface_path=?,sync_status=?,ext_service_id=? where id=? {1: 1625542647588, 2: 'displayNameUnitTest', 3: 'serviceNameUnitTest', 4: 'admin', 5: NULL, 6: 0, 7: NULL, 8: 0, 9: 0, 10: 53};
2021-07-06 11:37:27,589 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89*/select * from apigw_envoy_health_check_rule where  1 = 1 and service_id = ? and gw_id = ? {1: 53, 2: 2};
2021-07-06 11:37:27,590 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 53};
2021-07-06 11:37:27,590 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 53};
2021-07-06 11:37:27,590 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 53
2021-07-06 11:37:27,591 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 53};
2021-07-06 11:37:27,591 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:47 #:1*/select * from apigw_envoy_route_rule where id=? {1: 28};
2021-07-06 11:37:27,593 INFO o.h.c.n.e.d.i.EnvoyRouteRuleInfoDaoImpl [main] delete envoyRouteRuleInfo: 28,53,testRouteUnit,3,0,1625542647564,1625542647564,desc,Gateway,<null>,EnvoyRouteStringMatchInfo[type=exact,value=[/abc]],{"type":"exact","value":["/abc"]},EnvoyRouteStringMatchInfo[type=exact,value=[GET]],{"type":"exact","value":["GET"]},EnvoyRouteStringMatchInfo[type=exact,value=[abc.com]],{"type":"exact","value":["abc.com"]},[EnvoyRouteRuleMapMatchInfo[key=abc,type=exact,value=[abc]]],[{"key":"abc","type":"exact","value":["abc"]}],[EnvoyRouteRuleMapMatchInfo[key=aaa,type=exact,value=[caa]]],[{"key":"aaa","type":"exact","value":["caa"]}],50,50400665
2021-07-06 11:37:27,593 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:45 #:1*/delete from apigw_envoy_route_rule where id=? {1: 28};
2021-07-06 11:37:27,596 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:27,596 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:27,596 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@65ad2b42 testClass = EnvoyRouteRuleProxyServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.envoy.service.impl.EnvoyRouteRuleProxyServiceImplTest@70ce2fb2, testMethod = getRouteRuleProxyByRouteRuleId@EnvoyRouteRuleProxyServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@26d24d7a testClass = EnvoyRouteRuleProxyServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:27,609 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [org.hango.cloud.ncegdashboard.DashboardApplicationTests], using SpringBootContextLoader
2021-07-06 11:37:27,611 INFO o.s.t.c.s.AbstractContextLoader [main] Could not detect default resource locations for test class [org.hango.cloud.ncegdashboard.DashboardApplicationTests]: no resource found for suffixes {-context.xml, Context.groovy}.
2021-07-06 11:37:27,611 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [org.hango.cloud.ncegdashboard.DashboardApplicationTests]: DashboardApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2021-07-06 11:37:27,624 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration org.hango.cloud.ncegdashboard.DashboardApplication for test class org.hango.cloud.ncegdashboard.DashboardApplicationTests
2021-07-06 11:37:27,625 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2021-07-06 11:37:27,629 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5939f047, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@17332039, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@776e7dfb, org.springframework.test.context.support.DirtiesContextTestExecutionListener@71418a4a, org.springframework.test.context.transaction.TransactionalTestExecutionListener@67ecf7ed, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@69d021c1, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@6d5508a5, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@103bcc9f, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@106802ea, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@785ef70f, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@3d8bd881, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@731ab49b]
2021-07-06 11:37:27,729 INFO o.s.b.StartupInfoLogger [main] Starting DashboardApplicationTests on hanjiahao-MacBook-Pro.local with PID 18370 (started by hanjiahao in /Users/hanjiahao/Documents/workspace/nce-gdashboard/gateway-portal)
2021-07-06 11:37:27,731 INFO o.s.b.SpringApplication [main] No active profile set, falling back to default profiles: default
2021-07-06 11:37:27,741 INFO o.s.c.s.AbstractApplicationContext [main] Refreshing org.springframework.web.context.support.GenericWebApplicationContext@17a7d6c8: startup date [Tue Jul 06 11:37:27 CST 2021]; root of context hierarchy
2021-07-06 11:37:28,409 INFO o.s.b.f.x.XmlBeanDefinitionReader [main] Loading XML bean definitions from class path resource [applicationContext.xml]
2021-07-06 11:37:28,968 INFO o.h.m.TraceWriterAdapter [main] jdbc[13] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:28,976 INFO o.h.m.TraceWriterAdapter [main] jdbc[13] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:28,978 INFO o.h.m.TraceWriterAdapter [main] jdbc[13] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:28,980 INFO o.h.m.TraceWriterAdapter [main] jdbc[13] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:28,980 INFO o.h.m.TraceWriterAdapter [main] jdbc[13] 
/**/Connection conn10 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:28,981 INFO o.h.m.TraceWriterAdapter [main] jdbc[14] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:28,982 INFO o.h.m.TraceWriterAdapter [main] jdbc[14] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:28,982 INFO o.h.m.TraceWriterAdapter [main] jdbc[14] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:28,982 INFO o.h.m.TraceWriterAdapter [main] jdbc[14] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:28,982 INFO o.h.m.TraceWriterAdapter [main] jdbc[14] 
/**/Connection conn11 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:28,983 INFO o.h.m.TraceWriterAdapter [main] jdbc[15] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:28,983 INFO o.h.m.TraceWriterAdapter [main] jdbc[15] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:28,983 INFO o.h.m.TraceWriterAdapter [main] jdbc[15] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:28,983 INFO o.h.m.TraceWriterAdapter [main] jdbc[15] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:28,984 INFO o.h.m.TraceWriterAdapter [main] jdbc[15] 
/**/Connection conn12 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:28,984 INFO o.h.m.TraceWriterAdapter [main] jdbc[16] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:28,984 INFO o.h.m.TraceWriterAdapter [main] jdbc[16] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:28,984 INFO o.h.m.TraceWriterAdapter [main] jdbc[16] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:28,984 INFO o.h.m.TraceWriterAdapter [main] jdbc[16] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:28,985 INFO o.h.m.TraceWriterAdapter [main] jdbc[16] 
/**/Connection conn13 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:28,988 INFO o.h.m.TraceWriterAdapter [main] jdbc[17] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:28,989 INFO o.h.m.TraceWriterAdapter [main] jdbc[17] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:28,989 INFO o.h.m.TraceWriterAdapter [main] jdbc[17] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:28,989 INFO o.h.m.TraceWriterAdapter [main] jdbc[17] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:28,990 INFO o.h.m.TraceWriterAdapter [main] jdbc[17] 
/**/Connection conn14 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:28,990 INFO o.h.m.TraceWriterAdapter [main] jdbc[18] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:28,990 INFO o.h.m.TraceWriterAdapter [main] jdbc[18] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:28,991 INFO o.h.m.TraceWriterAdapter [main] jdbc[18] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:28,992 INFO o.h.m.TraceWriterAdapter [main] jdbc[18] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:28,992 INFO o.h.m.TraceWriterAdapter [main] jdbc[18] 
/**/Connection conn15 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:28,992 INFO o.h.m.TraceWriterAdapter [main] jdbc[19] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:28,992 INFO o.h.m.TraceWriterAdapter [main] jdbc[19] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:28,993 INFO o.h.m.TraceWriterAdapter [main] jdbc[19] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:28,993 INFO o.h.m.TraceWriterAdapter [main] jdbc[19] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:28,993 INFO o.h.m.TraceWriterAdapter [main] jdbc[19] 
/**/Connection conn16 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:28,994 INFO o.h.m.TraceWriterAdapter [main] jdbc[20] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:28,994 INFO o.h.m.TraceWriterAdapter [main] jdbc[20] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:28,994 INFO o.h.m.TraceWriterAdapter [main] jdbc[20] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:28,994 INFO o.h.m.TraceWriterAdapter [main] jdbc[20] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:28,994 INFO o.h.m.TraceWriterAdapter [main] jdbc[20] 
/**/Connection conn17 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:28,995 INFO o.h.m.TraceWriterAdapter [main] jdbc[21] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:28,995 INFO o.h.m.TraceWriterAdapter [main] jdbc[21] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:28,995 INFO o.h.m.TraceWriterAdapter [main] jdbc[21] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:28,995 INFO o.h.m.TraceWriterAdapter [main] jdbc[21] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:28,995 INFO o.h.m.TraceWriterAdapter [main] jdbc[21] 
/**/Connection conn18 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:28,996 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */SET MODE MYSQL;
2021-07-06 11:37:28,996 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */SET TRACE_LEVEL_SYSTEM_OUT 3;
2021-07-06 11:37:28,996 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */SET TRACE_LEVEL_FILE 4;
2021-07-06 11:37:28,996 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */SET DB_CLOSE_DELAY -1;
2021-07-06 11:37:28,996 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/**/Connection conn19 = DriverManager.getConnection("jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;MODE=MYSQL;TRACE_LEVEL_FIle=4;TRACE_LEVEL_SYSTEM_OUT=3;DATABASE_TO_UPPER=false", "SA", "");
2021-07-06 11:37:28,997 INFO o.s.j.d.i.ScriptUtils [main] Executing SQL script from class path resource [schema.sql]
2021-07-06 11:37:29,018 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS SH_LEAGUE_CONTACT_TEAM_ROLE(ROLE_NAME VARCHAR NOT NULL, TEAM_ID INT NOT NULL, CONTACT_ID INT NOT NULL, PRIMARY KEY(TEAM_ID, CONTACT_ID));
2021-07-06 11:37:29,030 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_health_check_rule ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_time bigint NOT NULL, update_time bigint NOT NULL, service_id bigint NOT NULL, gw_id bigint NOT NULL, active_switch tinyint NOT NULL, path varchar(255) DEFAULT '', timeout int DEFAULT NULL, expected_statuses varchar(255) DEFAULT '', healthy_interval int DEFAULT NULL, healthy_threshold int DEFAULT NULL, unhealthy_interval int DEFAULT NULL, unhealthy_threshold int DEFAULT NULL, passive_switch tinyint NOT NULL, consecutive_errors int DEFAULT NULL, base_ejection_time int DEFAULT NULL, max_ejection_percent tinyint DEFAULT NULL, min_health_percent tinyint DEFAULT NULL, PRIMARY KEY (id), CONSTRAINT unique_service_gw_id UNIQUE ( service_id, gw_id ) );
2021-07-06 11:37:29,031 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS index_service_gw_id ON apigw_envoy_health_check_rule(service_id, gw_id);
2021-07-06 11:37:29,032 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_plugin_binding ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, plugin_type varchar(255) NOT NULL, binding_object_type varchar(255) NOT NULL, binding_object_id varchar(255) NOT NULL, plugin_configuration clob NOT NULL, create_time bigint NOT NULL, update_time bigint NOT NULL, gw_id bigint NOT NULL, project_id bigint NOT NULL, plugin_priority bigint NOT NULL, binding_status varchar(127) NOT NULL DEFAULT 'enable', template_id bigint DEFAULT '0', template_version bigint DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:29,033 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_plugin_info ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, plugin_name varchar(255) NOT NULL, plugin_type varchar(255) NOT NULL, author varchar(255) NOT NULL, create_time bigint NOT NULL, update_time bigint NOT NULL, plugin_scope varchar(255) NOT NULL, instruction_for_use clob NOT NULL, plugin_schema clob NOT NULL, plugin_handler clob NOT NULL, plugin_priority bigint NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,034 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_plugin_template ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_time bigint NOT NULL, update_time bigint NOT NULL, plugin_type varchar(255) NOT NULL, plugin_configuration clob NOT NULL, project_id bigint NOT NULL, template_version bigint NOT NULL, template_name varchar(255) NOT NULL, template_notes varchar(255) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,039 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_route_rule ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, service_id varchar(11) DEFAULT NULL, route_rule_name varchar(255) NOT NULL, uri clob, method varchar(1024) DEFAULT NULL, header clob, query_param clob, host varchar(1024) DEFAULT NULL, priority bigint DEFAULT NULL, orders bigint DEFAULT NULL, project_id bigint DEFAULT NULL, publish_status int DEFAULT '0', create_time bigint NOT NULL DEFAULT '0', update_time bigint NOT NULL DEFAULT '0', description varchar(255) DEFAULT NULL, route_rule_source varchar(255) DEFAULT NULL, header_operation varchar(1024) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,042 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_route_rule_proxy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, route_rule_id bigint NOT NULL, gw_id bigint NOT NULL, destination_services varchar(1024) NOT NULL, project_id bigint NOT NULL, priority bigint DEFAULT NULL, orders bigint DEFAULT NULL, create_time bigint NOT NULL DEFAULT '0', update_time bigint NOT NULL DEFAULT '0', service_id bigint DEFAULT NULL, enable_state varchar(10) NOT NULL DEFAULT 'enable', hosts clob, timeout bigint DEFAULT '60000', http_retry clob, uri varchar(1024) DEFAULT NULL, method varchar(1024) DEFAULT NULL, header clob, query_param clob, host varchar(1024) DEFAULT NULL, virtual_cluster clob DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,043 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS idx_gw_id ON apigw_envoy_route_rule_proxy (gw_id);
2021-07-06 11:37:29,043 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS idx_route_rule_id ON apigw_envoy_route_rule_proxy (route_rule_id);
2021-07-06 11:37:29,043 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_service_info ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_time bigint DEFAULT NULL, update_time bigint DEFAULT NULL, service_name varchar(255) NOT NULL, publish_status int DEFAULT '0', project_id bigint DEFAULT NULL, contact varchar(255) DEFAULT NULL, description varchar(255) DEFAULT NULL, service_type varchar(11) DEFAULT 'http', PRIMARY KEY (id) );
2021-07-06 11:37:29,044 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_service_proxy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, service_id bigint NOT NULL, create_time bigint DEFAULT NULL, update_time bigint DEFAULT NULL, code varchar(255) NOT NULL, publish_protocol varchar(10) DEFAULT 'http', backend_service clob, publish_type varchar(255) DEFAULT NULL, project_id bigint DEFAULT '0', gw_id bigint NOT NULL, load_balancer varchar(127) NOT NULL DEFAULT 'ROUND_ROBIN', subsets clob, registry_center_addr varchar(255) DEFAULT NULL, registry_center_type varchar(255) DEFAULT NULL, traffic_policy clob, PRIMARY KEY (id) );
2021-07-06 11:37:29,044 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_strategy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, plugin_id bigint NOT NULL, plugin_type varchar(255) NOT NULL, strategy_name varchar(255) NOT NULL, create_time bigint NOT NULL, update_time bigint NOT NULL, config clob NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,044 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_envoy_virtual_host_info ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, project_id bigint NOT NULL, gw_id bigint NOT NULL, hosts clob, virtual_host_code varchar(255) NOT NULL, create_time bigint NOT NULL, update_time bigint NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,045 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_api ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, api_name varchar(255) NOT NULL, api_path varchar(255) NOT NULL, api_method varchar(255) NOT NULL, description clob, type varchar(255) NOT NULL, service_id bigint NOT NULL, status varchar(255) NOT NULL DEFAULT '0', regex varchar(255) DEFAULT NULL, document_status_id bigint DEFAULT '0', request_example_value clob, response_example_value clob, alias_name varchar(128) DEFAULT NULL, project_id bigint DEFAULT NULL, sync_status tinyint DEFAULT '0', ext_api_id bigint DEFAULT NULL, swagger_sync tinyint DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:29,046 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_api_document_status ( id bigint NOT NULL AUTO_INCREMENT, status varchar(255) NOT NULL, PRIMARY KEY (id, status) );
2021-07-06 11:37:29,047 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_api_model ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, model_name varchar(255) NOT NULL, description varchar(255) DEFAULT NULL, type tinyint DEFAULT NULL, format tinyint DEFAULT NULL, service_id bigint NOT NULL, swagger_sync tinyint DEFAULT '0', project_id bigint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,047 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS index_model_id ON apigw_gportal_api_model(id);
2021-07-06 11:37:29,047 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_api_proxy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint NOT NULL, modify_date bigint DEFAULT NULL, api_id bigint NOT NULL, gw_id bigint NOT NULL, service_id bigint DEFAULT NULL, traffic_control_policy_id bigint DEFAULT '0', time_range varchar(255) DEFAULT NULL, project_id bigint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,047 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_api_status_code ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, error_code varchar(255) DEFAULT NULL, message varchar(255) DEFAULT NULL, status_code bigint DEFAULT NULL, object_id bigint DEFAULT NULL, type varchar(255) NOT NULL, description clob, PRIMARY KEY (id) );
2021-07-06 11:37:29,048 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS index_api_id ON apigw_gportal_api_status_code(object_id);
2021-07-06 11:37:29,048 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_body_param ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, api_id bigint NOT NULL, param_name varchar(255) NOT NULL, required varchar(20) NOT NULL DEFAULT '0', def_value varchar(255) DEFAULT NULL, description varchar(255) DEFAULT NULL, type varchar(255) NOT NULL, param_type_id bigint DEFAULT NULL, array_data_type_id bigint DEFAULT NULL, association_type varchar(63) DEFAULT 'NORMAL', PRIMARY KEY (id) );
2021-07-06 11:37:29,049 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_gateway_info ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, gw_name varchar(255) NOT NULL, gw_addr varchar(255) NOT NULL, description varchar(255) DEFAULT NULL, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, status int DEFAULT '1', last_check_time bigint DEFAULT '0', health_interface_path varchar(255) DEFAULT NULL, mongo_addr varchar(255) DEFAULT NULL, project_id bigint, env_id varchar(128) DEFAULT NULL, auth_addr varchar(128) DEFAULT NULL, audit_datasource_switch varchar(255) DEFAULT NULL, mysql_addr clob, gw_uni_id varchar(128) DEFAULT NULL, metric_url varchar(255) DEFAULT NULL, api_plane_addr varchar(255) DEFAULT NULL, gw_cluster_name varchar(255) DEFAULT NULL, gw_type varchar(20) DEFAULT 'g0', audit_db_config varchar(1024) DEFAULT NULL, prom_addr varchar(255) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,049 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_header_param ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, api_id bigint NOT NULL, param_name varchar(255) NOT NULL, param_value varchar(255) DEFAULT NULL, description varchar(255) DEFAULT NULL, type varchar(255) NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,049 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_meta_history ( id bigint NOT NULL, meta_type varchar(255) NOT NULL, meta_id bigint NOT NULL, meta_name varchar(255) NOT NULL, meta_tag varchar(255) NOT NULL, project_id bigint NOT NULL, gw_id bigint NOT NULL, parent_id bigint DEFAULT NULL, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,050 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_model_param ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, model_id varchar(255) NOT NULL, param_name varchar(255) NOT NULL, param_type_id bigint NOT NULL, array_data_type_id bigint DEFAULT NULL, object_id bigint DEFAULT NULL, def_value varchar(255) DEFAULT NULL, description varchar(255) DEFAULT NULL, required varchar(20) NOT NULL DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:29,050 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS index_model_param_id ON apigw_gportal_model_param(id);
2021-07-06 11:37:29,051 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL t:1*/CREATE TABLE IF NOT EXISTS apigw_gportal_operation_log ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, email varchar(255) DEFAULT NULL, object_id bigint DEFAULT NULL, operation clob, type varchar(255) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,052 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS index_object_id ON apigw_gportal_operation_log(object_id, type);
2021-07-06 11:37:29,054 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_param_object ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, object_value varchar(1024) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,055 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS index_param_object_id ON apigw_gportal_param_object(id);
2021-07-06 11:37:29,055 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_param_type ( id bigint NOT NULL AUTO_INCREMENT, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, param_type varchar(255) NOT NULL, location varchar(255) NOT NULL, model_id bigint DEFAULT '0', PRIMARY KEY ( id, param_type ) );
2021-07-06 11:37:29,055 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_plugin ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, gw_id bigint DEFAULT NULL, plugin_name varchar(255) DEFAULT NULL, plugin_version varchar(255) DEFAULT NULL, plugin_file_name varchar(255) DEFAULT NULL, plugin_content clob, plugin_variable clob, plugin_status int DEFAULT NULL, last_start_time bigint DEFAULT NULL, plugin_starting_time bigint DEFAULT NULL, plugin_call_number bigint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,055 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_registry_center ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, registry_type varchar(255) NOT NULL, registry_addr varchar(255) NOT NULL, registry_alias varchar(255) DEFAULT NULL, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, project_id bigint DEFAULT NULL, is_shared tinyint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,056 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, display_name varchar(255) NOT NULL, service_name varchar(255) DEFAULT NULL, contacts varchar(255) DEFAULT NULL, description varchar(255) DEFAULT NULL, status int NOT NULL DEFAULT '0', health_interface_path varchar(255) DEFAULT NULL, service_type varchar(63) DEFAULT NULL, project_id bigint DEFAULT NULL, sync_status tinyint DEFAULT '0', ext_service_id bigint DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,056 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_instance ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, service_id bigint NOT NULL, gw_id bigint NOT NULL, service_addr varchar(255) DEFAULT NULL, status bigint NOT NULL DEFAULT '1', last_check_time bigint NOT NULL DEFAULT '0', registry_center_addr varchar(511) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,057 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_lb ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, service_id bigint DEFAULT NULL, gw_id bigint DEFAULT NULL, service_addr varchar(255) NOT NULL, weight int NOT NULL, status int DEFAULT '1', last_check_time bigint DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:29,057 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_lb_rule ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, service_id bigint NOT NULL, gw_id bigint NOT NULL, shunt_way varchar(255) NOT NULL DEFAULT '', instance_weight_list clob, param_shunt_type varchar(255) DEFAULT '', param_type varchar(255) DEFAULT '', param_name varchar(255) DEFAULT '', modulus_threshold int DEFAULT NULL, item_list clob, regex int DEFAULT NULL, instance_list clob, rule_name varchar(255) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,057 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_lb_rule_binding ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, rule_id bigint NOT NULL, gw_id bigint NOT NULL, service_id bigint NOT NULL, binding_time bigint NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,058 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_lb_rule_multi ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, service_id bigint NOT NULL, rule_name varchar(255) DEFAULT NULL, shunt_way varchar(255) DEFAULT NULL, param_matching_mode varchar(255) DEFAULT NULL, param_type varchar(255) DEFAULT NULL, param_name varchar(255) DEFAULT NULL, instance_type varchar(255) DEFAULT NULL, instance_list clob, color varchar(255) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,058 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS index_service_id ON apigw_gportal_service_lb_rule_multi(service_id);
2021-07-06 11:37:29,058 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_protobuf ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, service_id number NOT NULL, pb_name varchar(255) NOT NULL DEFAULT '', pb_file_name varchar(255) NOT NULL DEFAULT '', pb_file_content clob NOT NULL, desc_file_content clob NOT NULL, description varchar(255) DEFAULT NULL, pb_status int NOT NULL DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:29,058 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS idx_service_id ON apigw_gportal_service_protobuf(service_id);
2021-07-06 11:37:29,058 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS index_pb_name ON apigw_gportal_service_protobuf(pb_name);
2021-07-06 11:37:29,058 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_protobuf_proxy ( id number NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint DEFAULT NULL, modify_date bigint DEFAULT NULL, pb_id bigint NOT NULL, gw_id bigint NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,059 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS index_pb_id ON apigw_gportal_service_protobuf_proxy(pb_id);
2021-07-06 11:37:29,059 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_service_proxy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, create_date bigint NOT NULL, modify_date bigint DEFAULT NULL, service_id bigint NOT NULL, gw_id bigint NOT NULL, service_addr clob, time_range varchar(255) DEFAULT NULL, class_name varchar(255) DEFAULT NULL, flow_replication_addr varchar(255) DEFAULT NULL, authentication tinyint DEFAULT '1', shunt_way varchar(255) DEFAULT NULL, shunt_switch int DEFAULT '0', project_id bigint DEFAULT NULL, addr_acquire_strategy varchar(64) DEFAULT NULL, registry_center_addr varchar(255) DEFAULT NULL, application_name varchar(255) DEFAULT NULL, transparent tinyint DEFAULT '0', custom_header varchar(4000) DEFAULT NULL, registry_center_type varchar(255) DEFAULT NULL, adapt_service_name int DEFAULT '0', PRIMARY KEY (id) );
2021-07-06 11:37:29,059 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_traffic_control_binding ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, api_id bigint NOT NULL, policy_id bigint NOT NULL, binding_time bigint NOT NULL, gw_id bigint NOT NULL, gateway_name varchar(128) NOT NULL DEFAULT '', policy_name varchar(128) NOT NULL DEFAULT '', project_id varchar(20) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,059 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS idx_api_id ON apigw_gportal_traffic_control_binding(api_id);
2021-07-06 11:37:29,059 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS idx_policy_id ON apigw_gportal_traffic_control_binding(policy_id);
2021-07-06 11:37:29,060 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_traffic_control_dimension ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, traffic_control_policy_id bigint NOT NULL, slot bigint NOT NULL, unit varchar(128) NOT NULL, dimension_limit bigint NOT NULL, capacity bigint NOT NULL, dimension_type varchar(64) NOT NULL, param_name varchar(128) DEFAULT NULL, match_mode varchar(128) DEFAULT NULL, param_value varchar(2048) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,060 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE INDEX IF NOT EXISTS idx_traffic_control_policy_id ON apigw_gportal_traffic_control_dimension(traffic_control_policy_id);
2021-07-06 11:37:29,060 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_traffic_control_policy ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, name varchar(128) NOT NULL, create_time bigint NOT NULL, update_time bigint NOT NULL, project_id varchar(20) DEFAULT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,060 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_white_list ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, policy_name varchar(127) NOT NULL DEFAULT '', policy_type varchar(63) NOT NULL DEFAULT '', white_list clob NOT NULL, create_time bigint NOT NULL DEFAULT '0', update_time bigint NOT NULL DEFAULT '0', project_id varchar(127) NOT NULL, PRIMARY KEY (id) );
2021-07-06 11:37:29,060 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL */CREATE TABLE IF NOT EXISTS apigw_gportal_white_list_binding ( id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, gw_id bigint NOT NULL, policy_id bigint NOT NULL DEFAULT '0', binding_time bigint NOT NULL DEFAULT '0', binding_object_id varchar(127) NOT NULL DEFAULT '', binding_object_type varchar(63) NOT NULL DEFAULT '', project_id varchar(127) NOT NULL, policy_name varchar(127) NOT NULL DEFAULT '', binding_object_name varchar(127) NOT NULL DEFAULT '', PRIMARY KEY (id) );
2021-07-06 11:37:29,061 INFO o.s.j.d.i.ScriptUtils [main] Executed SQL script from class path resource [schema.sql] in 64 ms.
2021-07-06 11:37:29,064 INFO o.s.j.d.i.ScriptUtils [main] Executing SQL script from class path resource [data.sql]
2021-07-06 11:37:29,086 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL #:2 t:9*/MERGE INTO apigw_gportal_gateway_info VALUES ( 1, 'gateway', 'http://localhost:8898', 'this is a gateway', 1563515833712, 1565684534680, 1, 1566287640040, 'http:11113/healthcheck', '', 1, 'prod', 'http://platform-service-auth.hango.org', 'elasticsearch', '', 'prod', 'http://prometheus.hango.org', 'http://api-plane.hango.org', 'prod-gateway', 'envoy', '{\"spring.elasticsearch.jest.uris\":[\"\",\"\",\"\"]}', 'http://prometheus.hango.org' ), ( 2, 'envoy', 'http://localhost:8898', 'hango envoy gateway', 1563515833712, 1565684534680, 1, 1566287640040, 'http:11113/healthcheck', '', 1, 'prod', 'http://platform-service-auth.hango.org', 'elasticsearch', '', 'prod', 'http://prometheus.hango.org', 'http://api-plane.hango.org', 'prod-gateway', 'envoy', '{\"spring.elasticsearch.jest.uris\":[\"\",\"\",\"\"]}', 'http://prometheus.hango.org' );
2021-07-06 11:37:29,096 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL #:1 t:2*/MERGE INTO apigw_envoy_virtual_host_info VALUES ( 1, 1, 2, '[\"istio.com\",\"envoy.gateway.com\",\"hango.gateway.com\",\"gateway-proxy.hango.org\"]', 'hango-1-2', 1565684534680, 1566287640040 );
2021-07-06 11:37:29,105 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL #:4 t:3*/MERGE INTO apigw_gportal_api_document_status ( id, status ) VALUES ( 1, '\u5f00\u53d1\u4e2d' ), ( 2, '\u8054\u8c03\u4e2d' ), ( 3, '\u63d0\u6d4b\u4e2d' ), ( 4, '\u5df2\u4e0a\u7ebf' );
2021-07-06 11:37:29,108 INFO o.s.j.d.i.ScriptUtils [main] Executed SQL script from class path resource [data.sql] in 43 ms.
2021-07-06 11:37:29,249 INFO o.s.o.j.LocalContainerEntityManagerFactoryBean [main] Building JPA container EntityManagerFactory for persistence unit 'default'
2021-07-06 11:37:29,251 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2021-07-06 11:37:29,284 INFO o.h.d.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2021-07-06 11:37:29,296 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL #:1 t:1*/CALL DATABASE();
2021-07-06 11:37:29,316 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL #:31 t:6*/SELECT TYPE_NAME, DATA_TYPE, PRECISION, PREFIX LITERAL_PREFIX, SUFFIX LITERAL_SUFFIX, PARAMS CREATE_PARAMS, NULLABLE, CASE_SENSITIVE, SEARCHABLE, FALSE UNSIGNED_ATTRIBUTE, FALSE FIXED_PREC_SCALE, AUTO_INCREMENT, TYPE_NAME LOCAL_TYPE_NAME, MINIMUM_SCALE, MAXIMUM_SCALE, DATA_TYPE SQL_DATA_TYPE, ZERO() SQL_DATETIME_SUB, RADIX NUM_PREC_RADIX FROM INFORMATION_SCHEMA.TYPE_INFO ORDER BY DATA_TYPE, POS;
2021-07-06 11:37:29,329 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL l:58 #:1 t:2*/SELECT VALUE FROM INFORMATION_SCHEMA.SETTINGS WHERE NAME=? {1: 'MODE'};
2021-07-06 11:37:29,333 INFO o.h.m.TraceWriterAdapter [main] jdbc[22] 
/*SQL #:31 t:1*/SELECT TYPE_NAME, DATA_TYPE, PRECISION, PREFIX LITERAL_PREFIX, SUFFIX LITERAL_SUFFIX, PARAMS CREATE_PARAMS, NULLABLE, CASE_SENSITIVE, SEARCHABLE, FALSE UNSIGNED_ATTRIBUTE, FALSE FIXED_PREC_SCALE, AUTO_INCREMENT, TYPE_NAME LOCAL_TYPE_NAME, MINIMUM_SCALE, MAXIMUM_SCALE, DATA_TYPE SQL_DATA_TYPE, ZERO() SQL_DATETIME_SUB, RADIX NUM_PREC_RADIX FROM INFORMATION_SCHEMA.TYPE_INFO ORDER BY DATA_TYPE, POS;
2021-07-06 11:37:29,353 INFO o.h.t.h.SchemaExport [main] HHH000227: Running hbm2ddl schema export
2021-07-06 11:37:29,355 INFO o.h.t.h.SchemaExport [main] HHH000230: Schema export complete
2021-07-06 11:37:29,356 WARN o.h.j.i.EntityManagerFactoryRegistry [main] HHH000436: Entity manager factory name (default) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name'
2021-07-06 11:37:29,357 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2021-07-06 11:37:29,715 INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter [main] Looking for @ControllerAdvice: org.springframework.web.context.support.GenericWebApplicationContext@17a7d6c8: startup date [Tue Jul 06 11:37:27 CST 2021]; root of context hierarchy
2021-07-06 11:37:29,751 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateGateway]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.addGwInfo(org.hango.cloud.ncegdashboard.envoy.web.dto.GatewayDto)
2021-07-06 11:37:29,752 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeGatewayList]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.getGwInfoList(java.lang.String,long,long)
2021-07-06 11:37:29,752 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeGateway]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.getGwInfoById(long)
2021-07-06 11:37:29,753 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateGatewayVirtualHosts]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.updateGatewayVirtualHosts(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyGatewayVirtualHostDto)
2021-07-06 11:37:29,753 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateGatewayVirtualHost]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.createGatewayVirtualHost(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyVirtualHostDto)
2021-07-06 11:37:29,753 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateGatewayVirtualHost]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.updateGatewayVirtualHost(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyVirtualHostUpdateDto)
2021-07-06 11:37:29,753 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeGatewayVirtualHosts]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.getGatewayVirtualHosts(long,long,java.lang.String,long,long)
2021-07-06 11:37:29,753 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeGatewayVirtualHost]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.getGatewayVirtualHost(long)
2021-07-06 11:37:29,753 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribePluginManager]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.describePluginManager(long)
2021-07-06 11:37:29,754 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdatePluginManager]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.updatePluginManager(long,java.lang.String,boolean)
2021-07-06 11:37:29,754 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateGateway]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyGatewayController.updateGwInfo(org.hango.cloud.ncegdashboard.envoy.web.dto.GatewayDto)
2021-07-06 11:37:29,758 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateHealthCheckRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyHealthCheckController.updateHealthCheckRule(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyHealthCheckRuleDto)
2021-07-06 11:37:29,758 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeHealthCheckRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyHealthCheckController.getPluginInfo(long,long)
2021-07-06 11:37:29,758 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceInstanceList]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyHealthCheckController.describeServiceInstanceList(long,long)
2021-07-06 11:37:29,760 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=BindingPlugin]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.bindingPlugin(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyPluginBindingDto)
2021-07-06 11:37:29,761 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=UnbindingPlugin]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.unbindingPlugin(long)
2021-07-06 11:37:29,761 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdatePluginConfiguration]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.updatePluginConfiguration(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyPluginBindingDto)
2021-07-06 11:37:29,761 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribePluginInfo]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.getPluginInfo(java.lang.String,long)
2021-07-06 11:37:29,761 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribePluginInfoList]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.getPluginInfoList(long,java.lang.String)
2021-07-06 11:37:29,761 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeBindingPlugin]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.getBindingPlugin(long)
2021-07-06 11:37:29,762 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeBindingPlugins]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.getBindingPlugins(long,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,long,long)
2021-07-06 11:37:29,762 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=UpdatePluginBindingStatus]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginInfoController.updatePluginStatus(long,java.lang.String)
2021-07-06 11:37:29,764 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=SyncPluginTemplates]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.syncTemplate(org.hango.cloud.ncegdashboard.envoy.web.dto.SyncPluginTemplateDto)
2021-07-06 11:37:29,764 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreatePluginTemplate]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.createTemplate(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyPluginTemplateDto)
2021-07-06 11:37:29,764 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateGlobalPluginTemplate]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.createGlobalTemplate(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyPluginTemplateDto)
2021-07-06 11:37:29,764 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdatePluginTemplate]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.updateTemplate(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyPluginTemplateDto)
2021-07-06 11:37:29,764 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeletePluginTemplate]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.deleteTemplate(long)
2021-07-06 11:37:29,765 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribePluginTemplate]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.describeTemplate(long)
2021-07-06 11:37:29,765 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribePluginTemplates]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.describeTemplates(java.lang.String,long,long,boolean)
2021-07-06 11:37:29,765 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeAllPluginTemplates]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyPluginTemplateController.describeAllTemplates(java.lang.String)
2021-07-06 11:37:29,766 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateRouteRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleInfoController.updateRouteRule(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyRouteRuleDto)
2021-07-06 11:37:29,766 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRouteRuleList]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleInfoController.routeRuleList(java.lang.String,int,int,long,long,java.lang.String,java.lang.String)
2021-07-06 11:37:29,767 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateRouteRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleInfoController.createRouteRule(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyRouteRuleDto)
2021-07-06 11:37:29,767 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRouteRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleInfoController.getRouteRule(long)
2021-07-06 11:37:29,767 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteRouteRule]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleInfoController.deleteRule(long)
2021-07-06 11:37:29,769 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=PublishRouteRule]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.publishRouteRule(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyRouteRuleProxyDto)
2021-07-06 11:37:29,769 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeGatewayForRouteRuleProxy]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.describeGatewayForPublishedRule(long)
2021-07-06 11:37:29,769 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRouteRuleProxyList]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.getPublishRouteRuleList(long,long,long,long,java.lang.String,java.lang.String)
2021-07-06 11:37:29,769 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRouteRuleProxy]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.describeRouteRuleProxy(long,long,long)
2021-07-06 11:37:29,770 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRouteRuleProxyByRouteRuleId]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.describePublishRouteRule(long)
2021-07-06 11:37:29,772 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteRouteRuleProxy]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.deletePublishedRouteRule(long,long,java.util.List<java.lang.Long>)
2021-07-06 11:37:29,772 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=UpdateRouteRuleProxyEnableState]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.updateRouteRuleEnableState(long,long,java.lang.String)
2021-07-06 11:37:29,772 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateRouteRuleProxy]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.updateRouteRuleProxy(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyRouteRuleProxyDto)
2021-07-06 11:37:29,773 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceProxyForRouteProxy]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyRouteRuleProxyController.describeServiceProxy(long,java.util.List<java.lang.Long>,long)
2021-07-06 11:37:29,774 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateService]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.updateService(org.hango.cloud.ncegdashboard.envoy.web.dto.ServiceInfoDto)
2021-07-06 11:37:29,774 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateService]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.addService(org.hango.cloud.ncegdashboard.envoy.web.dto.ServiceInfoDto)
2021-07-06 11:37:29,775 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceForApi]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.serviceListForCreateApiOrModel()
2021-07-06 11:37:29,775 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceList]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.serviceList(java.lang.String,long,long)
2021-07-06 11:37:29,775 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteService]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.deleteService(long)
2021-07-06 11:37:29,775 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceRoute]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.getPublishedServiceInfoById(long)
2021-07-06 11:37:29,775 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceById]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceInfoController.getService(long)
2021-07-06 11:37:29,777 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceListByGw]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.describeServiceList(long,java.lang.String,java.lang.String)
2021-07-06 11:37:29,777 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=PublishService]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.publishService(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyServiceProxyDto)
2021-07-06 11:37:29,777 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateServiceProxy]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.updatePublishService(org.hango.cloud.ncegdashboard.envoy.web.dto.EnvoyServiceProxyDto)
2021-07-06 11:37:29,777 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceProxyList]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.serviceProxyList(long,long,java.lang.String,long,long)
2021-07-06 11:37:29,777 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeServiceProxy]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.describeServiceProxy(long,long)
2021-07-06 11:37:29,778 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteServiceProxy]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.EnvoyServiceProxyController.deleteServiceProxy(long,long)
2021-07-06 11:37:29,780 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeSwaggerServiceById]}" onto public void org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.getServicesDocs(long) throws com.fasterxml.jackson.core.JsonProcessingException
2021-07-06 11:37:29,780 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeSwaggerApiById]}" onto public void org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.getInterfacesDocs(long) throws com.fasterxml.jackson.core.JsonProcessingException
2021-07-06 11:37:29,781 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeMarkdownApiById]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.getApiMarkDownDocs(long) throws com.fasterxml.jackson.core.JsonProcessingException,java.lang.Exception
2021-07-06 11:37:29,781 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeMarkdownServiceById]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.getServiceMarkDownDocs(long)
2021-07-06 11:37:29,781 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DownloadMarkdownApiById],produces=[application/octet-stream;charset=UTF-8]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.downloadApiMarkDownDocs(long) throws com.fasterxml.jackson.core.JsonProcessingException,java.lang.Exception
2021-07-06 11:37:29,781 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DownloadMarkdownServiceById],produces=[application/octet-stream;charset=UTF-8]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.SwaggerController.downloadServiceMarkDownDocs(long)
2021-07-06 11:37:29,783 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateApi]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBasicInfoController.addApi(org.hango.cloud.gdashboard.api.dto.ApiInfoBasicDto)
2021-07-06 11:37:29,783 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeApiById]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBasicInfoController.getApiInfo(long)
2021-07-06 11:37:29,784 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateApi]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBasicInfoController.updateApi(org.hango.cloud.gdashboard.api.dto.ApiInfoBasicDto)
2021-07-06 11:37:29,784 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteApiById]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBasicInfoController.deleteApi(long)
2021-07-06 11:37:29,784 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeApiListByLimit]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBasicInfoController.apiList(java.lang.String,long,long,long,long)
2021-07-06 11:37:29,785 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateRequestBody]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.addRequestBody(org.hango.cloud.gdashboard.api.dto.ApiBodysDto)
2021-07-06 11:37:29,785 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateQueryString]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.addQueryString(org.hango.cloud.gdashboard.api.dto.ApiBodysDto)
2021-07-06 11:37:29,786 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateStatusCode]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.addStatusCode(org.hango.cloud.gdashboard.api.dto.ApiStatusCodesDto)
2021-07-06 11:37:29,786 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateResponseBody]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.addResponseBody(org.hango.cloud.gdashboard.api.dto.ApiBodysDto)
2021-07-06 11:37:29,786 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRequestBody]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.getRequestBody(long)
2021-07-06 11:37:29,786 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=GenerateBodyByJson]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.addBodyByJson(org.hango.cloud.gdashboard.api.dto.ApiBodyJsonDto)
2021-07-06 11:37:29,787 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeBodyParamJson]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.getBodyJson(java.lang.String,long)
2021-07-06 11:37:29,787 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteBodyParamId]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.deleteBodyParamId(java.lang.Long)
2021-07-06 11:37:29,787 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeQueryString]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.getQueryString(long)
2021-07-06 11:37:29,787 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeStatusCode]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.getStatusCode(long)
2021-07-06 11:37:29,787 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeResponseBody]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiBodyController.getResponseBody(long)
2021-07-06 11:37:29,788 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeExample]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiEdgeInfoController.getExample(long)
2021-07-06 11:37:29,788 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateApiExample]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiEdgeInfoController.addExample(org.hango.cloud.gdashboard.api.dto.ApiExampleDto)
2021-07-06 11:37:29,788 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeOperationList]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiEdgeInfoController.getOperationlist(long,long,long)
2021-07-06 11:37:29,788 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateRequestHeader]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiHeaderController.addRequestHeader(org.hango.cloud.gdashboard.api.dto.ApiHeadersDto)
2021-07-06 11:37:29,789 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateResponseHeader]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiHeaderController.addResponseHeader(org.hango.cloud.gdashboard.api.dto.ApiHeadersDto)
2021-07-06 11:37:29,789 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeRequestHeader]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiHeaderController.getRequestHeader(long)
2021-07-06 11:37:29,789 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeResponseHeader]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiHeaderController.getResponseHeader(long)
2021-07-06 11:37:29,789 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteHeaderByParamId]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiHeaderController.deleteHeaderParam(java.lang.Long)
2021-07-06 11:37:29,790 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=CreateApiModel]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiModelController.addModel(org.hango.cloud.gdashboard.api.dto.CreateApiModelDto)
2021-07-06 11:37:29,790 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[POST],params=[Version=2019-09-01 && Action=UpdateApiModel]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiModelController.modifyModel(org.hango.cloud.gdashboard.api.dto.CreateApiModelDto)
2021-07-06 11:37:29,791 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeApiModel]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiModelController.describeApiModel(long)
2021-07-06 11:37:29,791 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeModelList]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiModelController.describeApiModels(java.lang.String,long,long,long)
2021-07-06 11:37:29,791 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DeleteApiModel]}" onto public java.lang.String org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiModelController.deleteApiModelByModelId(long)
2021-07-06 11:37:29,791 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeHeaderParamType]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiParamTypeController.describeHeaderParam()
2021-07-06 11:37:29,791 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeQueryStringParamType]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiParamTypeController.describeQueryStringParam()
2021-07-06 11:37:29,792 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeBodyParam]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiParamTypeController.describeBodyParam(java.lang.Long)
2021-07-06 11:37:29,792 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/gdashboard/envoy],methods=[GET],params=[Version=2019-09-01 && Action=DescribeApiDocument]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.api.ApiParamTypeController.describeApiDocument()
2021-07-06 11:37:29,792 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/healthcheck],methods=[GET]}" onto public java.lang.Object org.hango.cloud.ncegdashboard.envoy.web.controller.health.HealthCheckController.return200()
2021-07-06 11:37:29,795 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
2021-07-06 11:37:29,796 INFO o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry [main] Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2021-07-06 11:37:29,866 INFO o.s.w.s.h.AbstractUrlHandlerMapping [main] Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2021-07-06 11:37:29,868 INFO o.s.w.s.h.AbstractUrlHandlerMapping [main] Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2021-07-06 11:37:29,886 INFO o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver [main] Detected @ExceptionHandler methods in commonControllerAdvice
2021-07-06 11:37:29,916 INFO o.s.w.s.h.AbstractUrlHandlerMapping [main] Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2021-07-06 11:37:30,080 INFO o.s.b.StartupInfoLogger [main] Started DashboardApplicationTests in 2.44 seconds (JVM running for 17.437)
2021-07-06 11:37:30,107 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest], using SpringBootContextLoader
2021-07-06 11:37:30,108 INFO o.s.t.c.s.AbstractContextLoader [main] Could not detect default resource locations for test class [org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2021-07-06 11:37:30,108 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest]: ApiBasicInfoControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2021-07-06 11:37:30,118 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration org.hango.cloud.ncegdashboard.DashboardApplication for test class org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest
2021-07-06 11:37:30,119 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2021-07-06 11:37:30,120 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1e965426, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@575fe6da, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@149238fe, org.springframework.test.context.support.DirtiesContextTestExecutionListener@a0bdbe2, org.springframework.test.context.transaction.TransactionalTestExecutionListener@261099e1, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@ed1d2cf, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@b814e23, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5f81507a, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@7d7c05fa, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7dbbf730, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@7c4a5ef2, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@299dd381]
2021-07-06 11:37:30,173 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1 t:1*/SELECT 1;
2021-07-06 11:37:30,175 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1e033801 testClass = ApiBasicInfoControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest@58e4aa67, testMethod = updateApi@ApiBasicInfoControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@34d3409d testClass = ApiBasicInfoControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,183 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,184 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,203 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 19 ms
2021-07-06 11:37:30,220 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:6*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,224 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,230 INFO o.h.c.n.a.w.c.a.ApiBasicInfoControllerTest [main] tear down class .... ApiProxyServiceImplTest
2021-07-06 11:37:30,235 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:2*/DELETE from apigw_gportal_service where id = ? {1: 54};
2021-07-06 11:37:30,240 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 54};
2021-07-06 11:37:30,241 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 54
2021-07-06 11:37:30,242 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 54};
2021-07-06 11:37:30,247 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:3*/ROLLBACK;
2021-07-06 11:37:30,247 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,248 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1e033801 testClass = ApiBasicInfoControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest@58e4aa67, testMethod = updateApi@ApiBasicInfoControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@34d3409d testClass = ApiBasicInfoControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,252 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1e033801 testClass = ApiBasicInfoControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest@18301763, testMethod = addApi@ApiBasicInfoControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@34d3409d testClass = ApiBasicInfoControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,253 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,253 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,254 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 1 ms
2021-07-06 11:37:30,255 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,255 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,256 INFO o.h.c.n.a.w.c.a.ApiBasicInfoControllerTest [main] tear down class .... ApiProxyServiceImplTest
2021-07-06 11:37:30,256 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 55};
2021-07-06 11:37:30,256 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 55};
2021-07-06 11:37:30,257 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 55
2021-07-06 11:37:30,257 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 55};
2021-07-06 11:37:30,259 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:30,259 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,260 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1e033801 testClass = ApiBasicInfoControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest@18301763, testMethod = addApi@ApiBasicInfoControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@34d3409d testClass = ApiBasicInfoControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,262 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1e033801 testClass = ApiBasicInfoControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest@1a6a4595, testMethod = apiList@ApiBasicInfoControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@34d3409d testClass = ApiBasicInfoControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,263 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,263 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,265 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 2 ms
2021-07-06 11:37:30,266 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,267 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,267 INFO o.h.c.n.a.w.c.a.ApiBasicInfoControllerTest [main] tear down class .... ApiProxyServiceImplTest
2021-07-06 11:37:30,267 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 56};
2021-07-06 11:37:30,268 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 56};
2021-07-06 11:37:30,268 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 56
2021-07-06 11:37:30,269 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 56};
2021-07-06 11:37:30,270 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,270 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,271 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1e033801 testClass = ApiBasicInfoControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest@1a6a4595, testMethod = apiList@ApiBasicInfoControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@34d3409d testClass = ApiBasicInfoControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,273 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1e033801 testClass = ApiBasicInfoControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest@6f5288c5, testMethod = deleteApi@ApiBasicInfoControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@34d3409d testClass = ApiBasicInfoControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,274 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,274 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,275 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 1 ms
2021-07-06 11:37:30,277 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,277 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,277 INFO o.h.c.n.a.w.c.a.ApiBasicInfoControllerTest [main] tear down class .... ApiProxyServiceImplTest
2021-07-06 11:37:30,277 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 57};
2021-07-06 11:37:30,277 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 57};
2021-07-06 11:37:30,277 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 57
2021-07-06 11:37:30,278 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 57};
2021-07-06 11:37:30,279 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,279 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,279 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1e033801 testClass = ApiBasicInfoControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest@6f5288c5, testMethod = deleteApi@ApiBasicInfoControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@34d3409d testClass = ApiBasicInfoControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,281 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@1e033801 testClass = ApiBasicInfoControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest@3407ded1, testMethod = getApiInfo@ApiBasicInfoControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@34d3409d testClass = ApiBasicInfoControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,282 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,282 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,284 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 2 ms
2021-07-06 11:37:30,284 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,285 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,285 INFO o.h.c.n.a.w.c.a.ApiBasicInfoControllerTest [main] tear down class .... ApiProxyServiceImplTest
2021-07-06 11:37:30,285 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 58};
2021-07-06 11:37:30,286 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 58};
2021-07-06 11:37:30,286 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 58
2021-07-06 11:37:30,286 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 58};
2021-07-06 11:37:30,287 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,287 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,287 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@1e033801 testClass = ApiBasicInfoControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.apimanage.ApiBasicInfoControllerTest@3407ded1, testMethod = getApiInfo@ApiBasicInfoControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@34d3409d testClass = ApiBasicInfoControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,289 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest], using SpringBootContextLoader
2021-07-06 11:37:30,289 INFO o.s.t.c.s.AbstractContextLoader [main] Could not detect default resource locations for test class [org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2021-07-06 11:37:30,289 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest]: SwaggerControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2021-07-06 11:37:30,291 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration org.hango.cloud.ncegdashboard.DashboardApplication for test class org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest
2021-07-06 11:37:30,292 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2021-07-06 11:37:30,293 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@50b2ba2c, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@12478b4e, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@64921450, org.springframework.test.context.support.DirtiesContextTestExecutionListener@18918d70, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5d373794, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7304ca87, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@7c07023, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@13ae87a6, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@774189d0, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@22c4354d, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2681185e, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@41f5389f]
2021-07-06 11:37:30,310 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@1ba98508, testMethod = downloadApiMarkDownDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,310 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,311 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,312 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 1 ms
2021-07-06 11:37:30,313 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,313 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,330 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:301 #:1 t:2*/INSERT INTO apigw_gportal_api(create_date,modify_date, api_name,api_path, api_method, description, type, service_id, regex, document_status_id, request_example_value, response_example_value,alias_name,sync_status,ext_api_id,project_id,swagger_sync) VALUES (?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?,?,?,?,?) {1: 0, 2: 0, 3: 'testUnitSwagger', 4: '/testUnitSwagger', 5: 'GET', 6: NULL, 7: 'RESTFUL', 8: 59, 9: NULL, 10: 0, 11: NULL, 12: NULL, 13: NULL, 14: 0, 15: 0, 16: 3, 17: 0};
2021-07-06 11:37:30,331 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,504 INFO o.h.c.n.e.w.c.SwaggerController [main] 获取apiId:1下的接口markdown
2021-07-06 11:37:30,507 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 1};
2021-07-06 11:37:30,521 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 1};
2021-07-06 11:37:30,524 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 1};
2021-07-06 11:37:30,526 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 1, 2: 'REQUEST'};
2021-07-06 11:37:30,527 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 1, 2: 'RESPONSE'};
2021-07-06 11:37:30,544 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 1, 2: 'QUERYSTRING'};
2021-07-06 11:37:30,545 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 1, 2: 'REQUEST'};
2021-07-06 11:37:30,545 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 1};
2021-07-06 11:37:30,545 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 1};
2021-07-06 11:37:30,547 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 1, 2: 'RESPONSE'};
2021-07-06 11:37:30,548 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 1};
2021-07-06 11:37:30,551 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:87*/select * from apigw_gportal_api_status_code where  1 = 1 and type = ? and object_id = ? {1: 'api', 2: 1};
2021-07-06 11:37:30,627 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:87*/select * from apigw_gportal_api_status_code where  1 = 1 and type = ? and object_id = ? {1: 'api', 2: 1};
2021-07-06 11:37:30,627 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 1};
2021-07-06 11:37:30,630 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 1, 2: 'QUERYSTRING'};
2021-07-06 11:37:30,641 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:55*/delete from apigw_gportal_header_param where api_id = ? {1: 1};
2021-07-06 11:37:30,641 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:53*/delete from apigw_gportal_body_param where api_id = ? {1: 1};
2021-07-06 11:37:30,642 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:74*/DELETE from apigw_gportal_api_status_code where object_id = ? and type = ? {1: 1, 2: 'api'};
2021-07-06 11:37:30,642 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/delete from apigw_gportal_api where id = ? {1: 1};
2021-07-06 11:37:30,643 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 59};
2021-07-06 11:37:30,644 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 59};
2021-07-06 11:37:30,644 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 59
2021-07-06 11:37:30,644 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 59};
2021-07-06 11:37:30,647 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,647 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,648 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@1ba98508, testMethod = downloadApiMarkDownDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,654 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@322f84fd, testMethod = getInterfacesDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,655 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,656 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,657 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 1 ms
2021-07-06 11:37:30,660 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,661 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,661 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:301 #:1*/INSERT INTO apigw_gportal_api(create_date,modify_date, api_name,api_path, api_method, description, type, service_id, regex, document_status_id, request_example_value, response_example_value,alias_name,sync_status,ext_api_id,project_id,swagger_sync) VALUES (?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?,?,?,?,?) {1: 0, 2: 0, 3: 'testUnitSwagger', 4: '/testUnitSwagger', 5: 'GET', 6: NULL, 7: 'RESTFUL', 8: 60, 9: NULL, 10: 0, 11: NULL, 12: NULL, 13: NULL, 14: 0, 15: 0, 16: 3, 17: 0};
2021-07-06 11:37:30,661 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,667 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 2};
2021-07-06 11:37:30,670 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 2};
2021-07-06 11:37:30,671 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 2};
2021-07-06 11:37:30,671 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 2, 2: 'REQUEST'};
2021-07-06 11:37:30,671 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 2, 2: 'RESPONSE'};
2021-07-06 11:37:30,672 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 2, 2: 'QUERYSTRING'};
2021-07-06 11:37:30,672 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 2, 2: 'REQUEST'};
2021-07-06 11:37:30,672 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 2};
2021-07-06 11:37:30,673 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 2};
2021-07-06 11:37:30,673 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 2, 2: 'RESPONSE'};
2021-07-06 11:37:30,673 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 2};
2021-07-06 11:37:30,673 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:87*/select * from apigw_gportal_api_status_code where  1 = 1 and type = ? and object_id = ? {1: 'api', 2: 2};
2021-07-06 11:37:30,676 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:55*/delete from apigw_gportal_header_param where api_id = ? {1: 2};
2021-07-06 11:37:30,676 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:53*/delete from apigw_gportal_body_param where api_id = ? {1: 2};
2021-07-06 11:37:30,676 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:74*/DELETE from apigw_gportal_api_status_code where object_id = ? and type = ? {1: 2, 2: 'api'};
2021-07-06 11:37:30,677 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/delete from apigw_gportal_api where id = ? {1: 2};
2021-07-06 11:37:30,677 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 60};
2021-07-06 11:37:30,677 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 60};
2021-07-06 11:37:30,677 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 60
2021-07-06 11:37:30,677 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 60};
2021-07-06 11:37:30,679 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,679 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,680 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@322f84fd, testMethod = getInterfacesDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,686 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@4351d055, testMethod = downloadServiceMarkDownDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,687 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,687 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,688 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 1 ms
2021-07-06 11:37:30,688 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,688 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,689 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:301 #:1*/INSERT INTO apigw_gportal_api(create_date,modify_date, api_name,api_path, api_method, description, type, service_id, regex, document_status_id, request_example_value, response_example_value,alias_name,sync_status,ext_api_id,project_id,swagger_sync) VALUES (?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?,?,?,?,?) {1: 0, 2: 0, 3: 'testUnitSwagger', 4: '/testUnitSwagger', 5: 'GET', 6: NULL, 7: 'RESTFUL', 8: 61, 9: NULL, 10: 0, 11: NULL, 12: NULL, 13: NULL, 14: 0, 15: 0, 16: 3, 17: 0};
2021-07-06 11:37:30,689 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,693 INFO o.h.c.n.e.w.c.SwaggerController [main] 获取serviceId:61下的markdown文档
2021-07-06 11:37:30,694 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 61};
2021-07-06 11:37:30,694 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 61};
2021-07-06 11:37:30,695 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:63 #:1*/select * from apigw_gportal_api where  1 = 1 and service_id = ? {1: 61};
2021-07-06 11:37:30,696 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 3};
2021-07-06 11:37:30,698 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 3};
2021-07-06 11:37:30,698 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 3, 2: 'REQUEST'};
2021-07-06 11:37:30,698 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 3, 2: 'RESPONSE'};
2021-07-06 11:37:30,699 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 3, 2: 'QUERYSTRING'};
2021-07-06 11:37:30,699 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 3, 2: 'REQUEST'};
2021-07-06 11:37:30,699 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 3};
2021-07-06 11:37:30,699 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 3};
2021-07-06 11:37:30,700 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 3, 2: 'RESPONSE'};
2021-07-06 11:37:30,700 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 3};
2021-07-06 11:37:30,700 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:87*/select * from apigw_gportal_api_status_code where  1 = 1 and type = ? and object_id = ? {1: 'api', 2: 3};
2021-07-06 11:37:30,701 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:87*/select * from apigw_gportal_api_status_code where  1 = 1 and type = ? and object_id = ? {1: 'api', 2: 3};
2021-07-06 11:37:30,701 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 3};
2021-07-06 11:37:30,704 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 3, 2: 'QUERYSTRING'};
2021-07-06 11:37:30,707 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:55*/delete from apigw_gportal_header_param where api_id = ? {1: 3};
2021-07-06 11:37:30,707 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:53*/delete from apigw_gportal_body_param where api_id = ? {1: 3};
2021-07-06 11:37:30,708 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:74*/DELETE from apigw_gportal_api_status_code where object_id = ? and type = ? {1: 3, 2: 'api'};
2021-07-06 11:37:30,709 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/delete from apigw_gportal_api where id = ? {1: 3};
2021-07-06 11:37:30,710 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 61};
2021-07-06 11:37:30,710 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 61};
2021-07-06 11:37:30,710 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 61
2021-07-06 11:37:30,710 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 61};
2021-07-06 11:37:30,712 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,712 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,712 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@4351d055, testMethod = downloadServiceMarkDownDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,716 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@c19bb2a, testMethod = getServiceMarkDownDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,718 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,718 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,719 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 1 ms
2021-07-06 11:37:30,720 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,720 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,721 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:301 #:1*/INSERT INTO apigw_gportal_api(create_date,modify_date, api_name,api_path, api_method, description, type, service_id, regex, document_status_id, request_example_value, response_example_value,alias_name,sync_status,ext_api_id,project_id,swagger_sync) VALUES (?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?,?,?,?,?) {1: 0, 2: 0, 3: 'testUnitSwagger', 4: '/testUnitSwagger', 5: 'GET', 6: NULL, 7: 'RESTFUL', 8: 62, 9: NULL, 10: 0, 11: NULL, 12: NULL, 13: NULL, 14: 0, 15: 0, 16: 3, 17: 0};
2021-07-06 11:37:30,722 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,729 INFO o.h.c.n.e.w.c.SwaggerController [main] 获取serviceId:62下的markdown文档
2021-07-06 11:37:30,730 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 62};
2021-07-06 11:37:30,731 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 62};
2021-07-06 11:37:30,731 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:63 #:1*/select * from apigw_gportal_api where  1 = 1 and service_id = ? {1: 62};
2021-07-06 11:37:30,732 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 4};
2021-07-06 11:37:30,732 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 4};
2021-07-06 11:37:30,732 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 4, 2: 'REQUEST'};
2021-07-06 11:37:30,732 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 4, 2: 'RESPONSE'};
2021-07-06 11:37:30,733 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 4, 2: 'QUERYSTRING'};
2021-07-06 11:37:30,733 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 4, 2: 'REQUEST'};
2021-07-06 11:37:30,733 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 4};
2021-07-06 11:37:30,733 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 4};
2021-07-06 11:37:30,733 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 4, 2: 'RESPONSE'};
2021-07-06 11:37:30,733 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 4};
2021-07-06 11:37:30,734 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:87*/select * from apigw_gportal_api_status_code where  1 = 1 and type = ? and object_id = ? {1: 'api', 2: 4};
2021-07-06 11:37:30,734 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:87*/select * from apigw_gportal_api_status_code where  1 = 1 and type = ? and object_id = ? {1: 'api', 2: 4};
2021-07-06 11:37:30,734 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 4};
2021-07-06 11:37:30,736 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 4, 2: 'QUERYSTRING'};
2021-07-06 11:37:30,740 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:55*/delete from apigw_gportal_header_param where api_id = ? {1: 4};
2021-07-06 11:37:30,740 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:53*/delete from apigw_gportal_body_param where api_id = ? {1: 4};
2021-07-06 11:37:30,740 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:74*/DELETE from apigw_gportal_api_status_code where object_id = ? and type = ? {1: 4, 2: 'api'};
2021-07-06 11:37:30,741 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/delete from apigw_gportal_api where id = ? {1: 4};
2021-07-06 11:37:30,741 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 62};
2021-07-06 11:37:30,743 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 62};
2021-07-06 11:37:30,743 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 62
2021-07-06 11:37:30,743 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 62};
2021-07-06 11:37:30,744 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,744 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,745 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@c19bb2a, testMethod = getServiceMarkDownDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,751 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@71ac5723, testMethod = getApiMarkDownDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,753 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,753 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,754 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 1 ms
2021-07-06 11:37:30,757 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:2*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,757 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,758 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:301 #:1*/INSERT INTO apigw_gportal_api(create_date,modify_date, api_name,api_path, api_method, description, type, service_id, regex, document_status_id, request_example_value, response_example_value,alias_name,sync_status,ext_api_id,project_id,swagger_sync) VALUES (?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?,?,?,?,?) {1: 0, 2: 0, 3: 'testUnitSwagger', 4: '/testUnitSwagger', 5: 'GET', 6: NULL, 7: 'RESTFUL', 8: 63, 9: NULL, 10: 0, 11: NULL, 12: NULL, 13: NULL, 14: 0, 15: 0, 16: 3, 17: 0};
2021-07-06 11:37:30,758 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,767 INFO o.h.c.n.e.w.c.SwaggerController [main] 获取apiId:5下的接口markdown
2021-07-06 11:37:30,770 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 5};
2021-07-06 11:37:30,771 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 5};
2021-07-06 11:37:30,771 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 5};
2021-07-06 11:37:30,774 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 5, 2: 'REQUEST'};
2021-07-06 11:37:30,774 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 5, 2: 'RESPONSE'};
2021-07-06 11:37:30,775 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 5, 2: 'QUERYSTRING'};
2021-07-06 11:37:30,775 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 5, 2: 'REQUEST'};
2021-07-06 11:37:30,775 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 5};
2021-07-06 11:37:30,775 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 5};
2021-07-06 11:37:30,775 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 5, 2: 'RESPONSE'};
2021-07-06 11:37:30,776 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 5};
2021-07-06 11:37:30,777 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:87*/select * from apigw_gportal_api_status_code where  1 = 1 and type = ? and object_id = ? {1: 'api', 2: 5};
2021-07-06 11:37:30,778 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:87*/select * from apigw_gportal_api_status_code where  1 = 1 and type = ? and object_id = ? {1: 'api', 2: 5};
2021-07-06 11:37:30,778 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 5};
2021-07-06 11:37:30,778 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 5, 2: 'QUERYSTRING'};
2021-07-06 11:37:30,779 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:55*/delete from apigw_gportal_header_param where api_id = ? {1: 5};
2021-07-06 11:37:30,780 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:53*/delete from apigw_gportal_body_param where api_id = ? {1: 5};
2021-07-06 11:37:30,780 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:74*/DELETE from apigw_gportal_api_status_code where object_id = ? and type = ? {1: 5, 2: 'api'};
2021-07-06 11:37:30,780 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/delete from apigw_gportal_api where id = ? {1: 5};
2021-07-06 11:37:30,780 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 63};
2021-07-06 11:37:30,780 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 63};
2021-07-06 11:37:30,781 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 63
2021-07-06 11:37:30,781 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 63};
2021-07-06 11:37:30,782 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,782 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,783 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@71ac5723, testMethod = getApiMarkDownDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,800 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@7bbe852a, testMethod = getServicesDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,802 INFO o.s.m.w.MockServletContext [main] Initializing Spring FrameworkServlet ''
2021-07-06 11:37:30,802 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization started
2021-07-06 11:37:30,804 INFO o.s.w.s.FrameworkServlet [main] FrameworkServlet '': initialization completed in 2 ms
2021-07-06 11:37:30,805 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,805 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,806 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:301 #:1*/INSERT INTO apigw_gportal_api(create_date,modify_date, api_name,api_path, api_method, description, type, service_id, regex, document_status_id, request_example_value, response_example_value,alias_name,sync_status,ext_api_id,project_id,swagger_sync) VALUES (?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?,?,?,?,?) {1: 0, 2: 0, 3: 'testUnitSwagger', 4: '/testUnitSwagger', 5: 'GET', 6: NULL, 7: 'RESTFUL', 8: 64, 9: NULL, 10: 0, 11: NULL, 12: NULL, 13: NULL, 14: 0, 15: 0, 16: 3, 17: 0};
2021-07-06 11:37:30,806 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,810 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 64};
2021-07-06 11:37:30,810 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:63 #:1*/select * from apigw_gportal_api where  1 = 1 and service_id = ? {1: 64};
2021-07-06 11:37:30,811 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 6};
2021-07-06 11:37:30,811 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 6, 2: 'REQUEST'};
2021-07-06 11:37:30,811 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68*/select * from apigw_gportal_header_param where api_id = ? and type=? {1: 6, 2: 'RESPONSE'};
2021-07-06 11:37:30,812 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 6, 2: 'QUERYSTRING'};
2021-07-06 11:37:30,812 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 6, 2: 'REQUEST'};
2021-07-06 11:37:30,812 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 6};
2021-07-06 11:37:30,813 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 6};
2021-07-06 11:37:30,813 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66*/select * from apigw_gportal_body_param where api_id = ? and type=? {1: 6, 2: 'RESPONSE'};
2021-07-06 11:37:30,813 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/select * from apigw_gportal_api where id=? {1: 6};
2021-07-06 11:37:30,814 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:87*/select * from apigw_gportal_api_status_code where  1 = 1 and type = ? and object_id = ? {1: 'api', 2: 6};
2021-07-06 11:37:30,816 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:55*/delete from apigw_gportal_header_param where api_id = ? {1: 6};
2021-07-06 11:37:30,817 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:53*/delete from apigw_gportal_body_param where api_id = ? {1: 6};
2021-07-06 11:37:30,817 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:74*/DELETE from apigw_gportal_api_status_code where object_id = ? and type = ? {1: 6, 2: 'api'};
2021-07-06 11:37:30,817 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:42 #:1*/delete from apigw_gportal_api where id = ? {1: 6};
2021-07-06 11:37:30,817 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/DELETE from apigw_gportal_service where id = ? {1: 64};
2021-07-06 11:37:30,818 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 64};
2021-07-06 11:37:30,818 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 64
2021-07-06 11:37:30,818 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 64};
2021-07-06 11:37:30,819 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,819 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,820 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@4e481512 testClass = SwaggerControllerTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.web.controller.SwaggerControllerTest@7bbe852a, testMethod = getServicesDocs@SwaggerControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@3a012678 testClass = SwaggerControllerTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,822 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest], using SpringBootContextLoader
2021-07-06 11:37:30,823 INFO o.s.t.c.s.AbstractContextLoader [main] Could not detect default resource locations for test class [org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2021-07-06 11:37:30,823 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest]: GatewayInfoServiceImplTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2021-07-06 11:37:30,830 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration org.hango.cloud.ncegdashboard.DashboardApplication for test class org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest
2021-07-06 11:37:30,832 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2021-07-06 11:37:30,832 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@330d16af, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@16f15a4, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@548c5127, org.springframework.test.context.support.DirtiesContextTestExecutionListener@35630ee8, org.springframework.test.context.transaction.TransactionalTestExecutionListener@6e80de85, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@173b24c4, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@21084a6d, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@c3114ea, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@642d971f, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@2afe825a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@49c6ee4a, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@4dd425dc]
2021-07-06 11:37:30,864 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@13346a64, testMethod = addGatewayByMetaDto@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,867 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:76 #:1*/select count(*) from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'testUnit'};
2021-07-06 11:37:30,876 INFO o.h.c.n.e.d.i.GatewayInfoDaoImpl [main] add GatewayInfo: 0,1625542650874,1625542650874,testUnit,http://localhost:8898,<null>,1,<null>,<null>,<null>,<null>,[istio.com]
2021-07-06 11:37:30,879 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:183 #:1*/insert into apigw_gportal_gateway_info (gw_name, gw_addr, create_date, modify_date, description, project_id,api_plane_addr, gw_cluster_name, gw_type)  values (?, ?, ?, ?, ?,?,?, ?, ?) {1: 'testUnit', 2: 'http://localhost:8898', 3: 1625542650874, 4: 1625542650874, 5: NULL, 6: 1, 7: NULL, 8: NULL, 9: NULL};
2021-07-06 11:37:30,879 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,880 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 1, 2: 3, 3: '[\"istio.com\"]', 4: 'hango-1-3', 5: 1625542650879, 6: 1625542650879};
2021-07-06 11:37:30,881 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,881 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=1,gwId=3,hosts=["istio.com"],hostList=[istio.com],virtualHostCode=hango-1-3,createTime=1625542650879,updateTime=1625542650879]
2021-07-06 11:37:30,882 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 3};
2021-07-06 11:37:30,882 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 3, 2: 1};
2021-07-06 11:37:30,883 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71 #:1*/select count(*) from apigw_gportal_gateway_info where  1 = 1 and id = ? {1: 3};
2021-07-06 11:37:30,883 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69 #:1*/select * from apigw_gportal_gateway_info where  1 = 1 and gw_name = ? {1: 'testUnit'};
2021-07-06 11:37:30,886 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,886 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,887 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@13346a64, testMethod = addGatewayByMetaDto@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,889 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@4f629aa4, testMethod = updateGwInfo@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,890 INFO o.h.c.n.e.d.i.GatewayInfoDaoImpl [main] add GatewayInfo: 0,1625542650889,1625542650889,testUnit,http://localhost:8898,<null>,1,<null>,<null>,<null>,<null>,[istio.com]
2021-07-06 11:37:30,891 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:183 #:1*/insert into apigw_gportal_gateway_info (gw_name, gw_addr, create_date, modify_date, description, project_id,api_plane_addr, gw_cluster_name, gw_type)  values (?, ?, ?, ?, ?,?,?, ?, ?) {1: 'testUnit', 2: 'http://localhost:8898', 3: 1625542650889, 4: 1625542650889, 5: NULL, 6: 1, 7: NULL, 8: NULL, 9: NULL};
2021-07-06 11:37:30,891 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,892 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 1, 2: 4, 3: '[\"istio.com\"]', 4: 'hango-1-4', 5: 1625542650892, 6: 1625542650892};
2021-07-06 11:37:30,892 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,892 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=1,gwId=4,hosts=["istio.com"],hostList=[istio.com],virtualHostCode=hango-1-4,createTime=1625542650892,updateTime=1625542650892]
2021-07-06 11:37:30,892 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 4};
2021-07-06 11:37:30,897 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 4, 2: 1};
2021-07-06 11:37:30,898 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 4, 2: 1};
2021-07-06 11:37:30,898 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:54 #:1*/select * from apigw_envoy_virtual_host_info where id=? {1: 19};
2021-07-06 11:37:30,898 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] update envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=19,projectId=1,gwId=4,hosts=["istio.com"],hostList=[istio.com],virtualHostCode=hango-1-4,createTime=1625542650892,updateTime=1625542650898]
2021-07-06 11:37:30,899 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:74 #:1*/update apigw_envoy_virtual_host_info set hosts=?, update_time=? where id=? {1: '[\"istio.com\"]', 2: 1625542650898, 3: 19};
2021-07-06 11:37:30,899 INFO o.h.c.n.e.d.i.GatewayInfoDaoImpl [main] update GatewayInfo: 4,1625542650889,1625542650897,testUnit2,http://localhost:8898,<null>,1,<null>,<null>,<null>,<null>,[istio.com]
2021-07-06 11:37:30,899 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:151 #:1*/update apigw_gportal_gateway_info set gw_name = ?, gw_addr=?, description=?, modify_date=?,project_id=?, api_plane_addr=?, gw_cluster_name=? where id=? {1: 'testUnit2', 2: 'http://localhost:8898', 3: NULL, 4: 1625542650897, 5: 1, 6: NULL, 7: NULL, 8: 4};
2021-07-06 11:37:30,899 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:51 #:1*/select * from apigw_gportal_gateway_info where id=? {1: 4};
2021-07-06 11:37:30,900 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 4, 2: 1};
2021-07-06 11:37:30,901 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,901 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,902 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@4f629aa4, testMethod = updateGwInfo@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,903 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@1c09bb7a, testMethod = findAll@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,908 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:2*/select * from apigw_gportal_gateway_info order by gw_type desc;
2021-07-06 11:37:30,910 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,910 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,911 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@1c09bb7a, testMethod = findAll@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,914 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@72b6fa98, testMethod = findGatewayByLimit@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,915 INFO o.h.c.n.e.d.i.GatewayInfoDaoImpl [main] add GatewayInfo: 0,1625542650915,1625542650915,testUnit,http://localhost:8898,<null>,1,<null>,<null>,<null>,<null>,[istio.com]
2021-07-06 11:37:30,916 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:183 #:1*/insert into apigw_gportal_gateway_info (gw_name, gw_addr, create_date, modify_date, description, project_id,api_plane_addr, gw_cluster_name, gw_type)  values (?, ?, ?, ?, ?,?,?, ?, ?) {1: 'testUnit', 2: 'http://localhost:8898', 3: 1625542650915, 4: 1625542650915, 5: NULL, 6: 1, 7: NULL, 8: NULL, 9: NULL};
2021-07-06 11:37:30,917 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,918 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 1, 2: 5, 3: '[\"istio.com\"]', 4: 'hango-1-5', 5: 1625542650917, 6: 1625542650917};
2021-07-06 11:37:30,918 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,919 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=1,gwId=5,hosts=["istio.com"],hostList=[istio.com],virtualHostCode=hango-1-5,createTime=1625542650917,updateTime=1625542650917]
2021-07-06 11:37:30,922 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:100 #:1*/select * from apigw_gportal_gateway_info where gw_name like ? order by gw_type desc limit ? offset ? {1: '%testUnit%', 2: 20, 3: 0};
2021-07-06 11:37:30,929 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:89 #:1 t:1*/select * from apigw_envoy_virtual_host_info where  1 = 1 and gw_id = ? and project_id = ? {1: 5, 2: 1};
2021-07-06 11:37:30,931 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,931 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,931 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@72b6fa98, testMethod = findGatewayByLimit@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,933 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@6a30f6b1, testMethod = checkGwIdParam@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,934 INFO o.h.c.n.e.s.i.GatewayInfoServiceImpl [main] 请求GwId为空
2021-07-06 11:37:30,937 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71 #:1*/select count(*) from apigw_gportal_gateway_info where  1 = 1 and id = ? {1: 1625542650934};
2021-07-06 11:37:30,937 INFO o.h.c.n.e.s.i.GatewayInfoServiceImpl [main] 请求GwId不存在，gwId:{]
2021-07-06 11:37:30,938 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,938 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,939 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@6a30f6b1, testMethod = checkGwIdParam@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,942 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@501b296a, testMethod = getGatewayCount@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,943 INFO o.h.c.n.e.d.i.GatewayInfoDaoImpl [main] add GatewayInfo: 0,1625542650943,1625542650943,testUnit,http://localhost:8898,<null>,1,<null>,<null>,<null>,<null>,[istio.com]
2021-07-06 11:37:30,944 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:183 #:1*/insert into apigw_gportal_gateway_info (gw_name, gw_addr, create_date, modify_date, description, project_id,api_plane_addr, gw_cluster_name, gw_type)  values (?, ?, ?, ?, ?,?,?, ?, ?) {1: 'testUnit', 2: 'http://localhost:8898', 3: 1625542650943, 4: 1625542650943, 5: NULL, 6: 1, 7: NULL, 8: NULL, 9: NULL};
2021-07-06 11:37:30,944 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,945 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:140 #:1*/insert into apigw_envoy_virtual_host_info (project_id, gw_id, hosts, virtual_host_code, create_time, update_time)  values (?, ?, ?, ?, ?, ?) {1: 1, 2: 6, 3: '[\"istio.com\"]', 4: 'hango-1-6', 5: 1625542650945, 6: 1625542650945};
2021-07-06 11:37:30,947 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1 t:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,948 INFO o.h.c.n.e.d.i.EnvoyVirtualHostInfoDaoImpl [main] add envoyVirtualHostInfo: EnvoyVirtualHostInfo[id=0,projectId=1,gwId=6,hosts=["istio.com"],hostList=[istio.com],virtualHostCode=hango-1-6,createTime=1625542650945,updateTime=1625542650945]
2021-07-06 11:37:30,949 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:68 #:1*/select count(*) from apigw_gportal_gateway_info where gw_name like ? {1: '%testUnit%'};
2021-07-06 11:37:30,950 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,950 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,950 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@752180c4 testClass = GatewayInfoServiceImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.GatewayInfoServiceImplTest@501b296a, testMethod = getGatewayCount@GatewayInfoServiceImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@4549d616 testClass = GatewayInfoServiceImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,951 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Neither @ContextConfiguration nor @ContextHierarchy found for test class [org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest], using SpringBootContextLoader
2021-07-06 11:37:30,951 INFO o.s.t.c.s.AbstractContextLoader [main] Could not detect default resource locations for test class [org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2021-07-06 11:37:30,951 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest]: ServiceInfoImplTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2021-07-06 11:37:30,954 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration org.hango.cloud.ncegdashboard.DashboardApplication for test class org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest
2021-07-06 11:37:30,956 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2021-07-06 11:37:30,958 INFO o.s.t.c.s.AbstractTestContextBootstrapper [main] Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@57fae911, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@52a0bc48, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@28941a68, org.springframework.test.context.support.DirtiesContextTestExecutionListener@24ce5d4c, org.springframework.test.context.transaction.TransactionalTestExecutionListener@24fc9aa5, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7369208e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@7ba623d1, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@2d5435d4, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6dbdbb69, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@576a8b00, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@1d988297, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@116efe65]
2021-07-06 11:37:30,982 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@7dd2a5f7, testMethod = findAllServiceByProjectId@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,985 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71*/select * from apigw_gportal_service where project_id=? order by id desc {1: 3};
2021-07-06 11:37:30,986 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,986 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:30,987 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:71 #:1*/select * from apigw_gportal_service where project_id=? order by id desc {1: 3};
2021-07-06 11:37:30,989 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:30,989 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:30,989 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@7dd2a5f7, testMethod = findAllServiceByProjectId@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:30,995 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@4a65c40, testMethod = delete@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:30,998 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:30,999 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:31,001 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1 t:1*/DELETE from apigw_gportal_service where id = ? {1: 66};
2021-07-06 11:37:31,002 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:69*/select * from apigw_gportal_api_model where  1 = 1 and service_id = ? {1: 66};
2021-07-06 11:37:31,002 INFO o.h.c.n.e.d.i.EnvoyHealthCheckRuleDaoImpl [main] delete envoyHealthCheckRules by serviceId: 66
2021-07-06 11:37:31,003 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:60*/delete from apigw_envoy_health_check_rule where service_id=? {1: 66};
2021-07-06 11:37:31,006 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL t:1*/ROLLBACK;
2021-07-06 11:37:31,006 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:31,006 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@4a65c40, testMethod = delete@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:31,009 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@763ddfc3, testMethod = addServiceInfo@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:31,013 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1 t:2*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 1625542651011, 2: 1625542651011, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:31,014 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:31,016 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:31,016 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:31,016 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@763ddfc3, testMethod = addServiceInfo@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:31,019 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@6b9fc5c7, testMethod = checkCreateServiceParam@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:31,022 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:95 #:1 t:1*/select count(*) from apigw_gportal_service where  1 = 1 and display_name = ? and project_id = ? {1: 'displayNameUnitTest', 2: 1};
2021-07-06 11:37:31,024 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:56*/select * from apigw_gportal_service where service_name=? {1: 'serviceNameUnitTest'};
2021-07-06 11:37:31,025 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:31,025 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:31,025 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@6b9fc5c7, testMethod = checkCreateServiceParam@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:31,026 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@52667676, testMethod = isServiceExists@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:31,028 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:31,028 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:31,029 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66 #:1*/select count(*) from apigw_gportal_service where  1 = 1 and id = ? {1: 68};
2021-07-06 11:37:31,030 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:31,031 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:31,031 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@52667676, testMethod = isServiceExists@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:31,032 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@34f32575, testMethod = add@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:31,033 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:31,033 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:31,034 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 69};
2021-07-06 11:37:31,035 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:31,035 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:31,035 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@34f32575, testMethod = add@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:31,037 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@1f370472, testMethod = getServiceByServiceName@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:31,037 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:31,037 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:31,038 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:56 #:1*/select * from apigw_gportal_service where service_name=? {1: 'serviceNameUnitTest'};
2021-07-06 11:37:31,039 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:31,039 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:31,039 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@1f370472, testMethod = getServiceByServiceName@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:31,041 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@1d4c6e32, testMethod = checkUpdateServiceParam@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:31,042 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:31,042 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:31,043 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:66 #:1*/select count(*) from apigw_gportal_service where  1 = 1 and id = ? {1: 71};
2021-07-06 11:37:31,043 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:46 #:1*/select * from apigw_gportal_service where id=? {1: 71};
2021-07-06 11:37:31,044 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:31,044 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:31,044 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@1d4c6e32, testMethod = checkUpdateServiceParam@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:31,045 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@6277a496, testMethod = getServiceByServiceNameAndProject@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:31,047 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:31,047 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:31,048 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:88 #:1*/select * from apigw_gportal_service where  1 = 1 and service_name = ? and project_id = ? {1: 'serviceNameUnitTest', 2: 3};
2021-07-06 11:37:31,049 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:31,049 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:31,050 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@6277a496, testMethod = getServiceByServiceNameAndProject@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:31,052 INFO o.s.t.c.t.TransactionContext [main] Began transaction (1) for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@165a5979, testMethod = findAllServiceByProjectIdLimit@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@77ecdc2b]; rollback [true]
2021-07-06 11:37:31,053 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:198 #:1*/insert into apigw_gportal_service (create_date, modify_date, display_name, service_name, contacts, description,service_type,project_id,sync_status,ext_service_id)  values (?, ?, ?, ?, ?, ?,?, ?,?,?) {1: 0, 2: 0, 3: 'displayNameUnitTest', 4: 'serviceNameUnitTest', 5: 'admin', 6: NULL, 7: 'http', 8: 3, 9: 0, 10: 0};
2021-07-06 11:37:31,053 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL #:1*/SELECT SCOPE_IDENTITY() WHERE SCOPE_IDENTITY() IS NOT NULL;
2021-07-06 11:37:31,064 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL l:137 #:1*/select * from apigw_gportal_service where project_id=? and (service_name like ? or display_name like ?) order by id desc limit ? offset ? {1: 3, 2: '%serviceNameUnitTest%', 3: '%serviceNameUnitTest%', 4: 20, 5: 0};
2021-07-06 11:37:31,066 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */ROLLBACK;
2021-07-06 11:37:31,067 INFO o.h.m.TraceWriterAdapter [main] jdbc[12] 
/*SQL */COMMIT;
2021-07-06 11:37:31,067 INFO o.s.t.c.t.TransactionContext [main] Rolled back transaction for test context [DefaultTestContext@62f73b0c testClass = ServiceInfoImplTest, testInstance = org.hango.cloud.ncegdashboard.apiserver.service.impl.ServiceInfoImplTest@165a5979, testMethod = findAllServiceByProjectIdLimit@ServiceInfoImplTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@118879d2 testClass = ServiceInfoImplTest, locations = '{}', classes = '{class org.hango.cloud.ncegdashboard.DashboardApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{classpath:unit-test.properties}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.SpringBootTestContextCustomizer@e056f20, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@10e41621, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@67a20f67, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@481a996b], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]]].
2021-07-06 11:37:31,077 INFO o.s.c.s.AbstractApplicationContext [Thread-6] Closing org.springframework.web.context.support.GenericWebApplicationContext@17a7d6c8: startup date [Tue Jul 06 11:37:27 CST 2021]; root of context hierarchy
2021-07-06 11:37:31,080 INFO o.s.c.s.AbstractApplicationContext [Thread-4] Closing org.springframework.web.context.support.GenericWebApplicationContext@49872d67: startup date [Tue Jul 06 11:37:15 CST 2021]; root of context hierarchy
